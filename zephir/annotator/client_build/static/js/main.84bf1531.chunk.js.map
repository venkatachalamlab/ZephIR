{"version":3,"sources":["annotation_window/actions.ts","third_party/lru.js","api/index.ts","annotations/actions.ts","provenances/actions.ts","app/selectors.ts","annotation_window/helpers.ts","annotation_window/selectors.ts","worldlines/selectors.ts","provenances/selectors.ts","annotations/selectors.ts","provenances/sagas.ts","provenances/components/Provenance.tsx","provenances/components/ProvenancePanel.tsx","annotations/sagas.ts","annotations/components/AnnotationsSVG.tsx","annotations/components/AnnotationPanel.tsx","worldlines/actions.ts","worldlines/sagas.ts","worldlines/components/Worldline.tsx","worldlines/components/WorldlinePanel.tsx","annotation_window/sagas.ts","test_components/ActionForm.tsx","annotation_window/components/AnnotationWindowTest.tsx","annotation_window/components/AnnotationView.tsx","annotation_window/components/WindowPanel.tsx","annotation_window/webgl/gl-matrix/common.js","annotation_window/webgl/gl-matrix/mat3.js","annotation_window/webgl/gl-matrix/mat4.js","annotation_window/webgl/gl-matrix/vec3.js","annotation_window/webgl/gl-matrix/vec4.js","annotation_window/webgl/gl-matrix/quat.js","annotation_window/webgl/gl-matrix/vec2.js","annotation_window/webgl/webgl-util.js","annotation_window/webgl/shader-srcs.js","annotation_window/components/VolumeView.tsx","annotation_window/components/AnnotationWindow.tsx","app/components/App.tsx","app/actions.ts","app/sagas.ts","app/components/AppTest.tsx","serviceWorker.js","index.tsx"],"names":["initialState","x","y","z","c_idx","t_idx","shape_x","shape_y","shape_z","views","shape_t","scale_x","scale_y","scale_z","LUT","red","green","blue","gamma","selected_annotation","visible_worldlines","selected_worldline","active_provenance","fill_circles","show_all_annotations","rpc_list","name","default_args","docstring","rpc_keybindings","rpc_args","threshold","val","min","max","Math","reducers","set_state","_state","action","payload","set_x","state","adjust_x","set_y","adjust_y","set_z","adjust_z","set_c_idx","adjust_c_idx","idx","n","length","set_t_idx","set_scale_x","set_scale_y","set_scale_z","set_shape_x","set_shape_y","set_shape_z","set_LUT_color","set_gamma","set_selected_annotation_local","set_selected_worldline_local","set_active_provenance","set_fill_circles","toggle_fill_circles","set_show_all_annotations","toggle_all_annotations","set_rpc_list","set_rpc_keybinding","set_rpc_args","set_rpc_arg","center_on_annotation","Number","annotation_window_slice","createSlice","actions","reducer","NEWER","Symbol","OLDER","LRUMap","limit","entries","this","size","oldest","newest","undefined","_keymap","Map","assign","Entry","key","value","EntryIterator","oldestEntry","entry","KeyIterator","ValueIterator","prototype","_markEntryAsUsed","MAX_VALUE","clear","it","iterator","itv","next","done","e","set","Error","get","shift","delete","find","has","ent","keys","values","forEach","fun","thisObj","call","toJSON","s","Array","i","toString","String","image_cache","annotation_cache","fetch_metadata","fetch","then","json","fetch_data_cache","url","signal","a","uint8_array","arrayBuffer","array","Uint8ClampedArray","catch","err","console","error","insert_annotation","annotation","method","headers","body","JSON","stringify","response","fetch_annotations_cache","t","annotations","fetch_annotations","update_annotation","id","delete_annotation","create_worldline","fetch_worldlines","update_worldline","w","delete_worldline","save","data","window","alert","path","log","load","fetch_rpcs","rpc","arg","annotations_slice","set_annotation_local","delete_annotation_local","provenances_slice","set_provenance_selected","visible","set_all_selected","provenance","get_annotations_state","app_state","idx_from_coord","coord","shape","floor","LUT_linear","lut","get_state","annotation_window","get_x","createSelector","get_y","get_z","get_c_idx","get_t_idx","get_shape_x","get_shape_y","get_shape_z","get_shape_t","get_views","get_scale_x","get_scale_y","get_scale_z","get_LUT","get_gamma","get_selected_annotation","get_visible_worldlines","get_selected_worldline","get_active_provenance","get_fill_circles","get_show_all_annotations","get_rpc_list","get_rpc_keybindings","get_x_idx","get_y_idx","get_z_idx","get_view","get_dim_viewname","dim","view","get_x_viewname","get_y_viewname","get_z_viewname","get_dim_viewidx","bare_getter","get_x_viewidx","get_y_viewidx","get_z_viewidx","make_data_url","get_x_url","get_y_url","get_z_url","get_vol_url","worldlines","get_worldlines","Object","filter","map","provenances","get_visible_provenances","p","app_selectors","get_annotation_ids","fp","get_used_worldline_ids","mapValues","get_annotations_list","get_visible_annotations","worldlines_selectors","provenances_selectors","pickBy","includes","worldline_id","get_selected_annotation_id","annotation_window_selectors","all","findKey","get_color","worldline","color","get_annotations_with_all_info","selected","get_annotations_view3D","pick","get_visible_annotations_near","output_x","output_y","r","close_3D","abs","radius","get_x_annotations","get_y_annotations","get_z_annotations","fetch_provenances","watch_fetch_provenances","saga_action_types","prefix","saga_actions","createAction","select","annotations_selectors","provenances_set","Set","put","takeEvery","sagas","Provenance","props","style","float","position","height","width","type","checked","onChange","event","on_check","target","marginTop","fontFamily","fontSize","border","ProvenancePanel","connect","selectors","dispatch","bindActionCreators","set_selected_worldline","annotation_window_saga_actions","connector","Card","elevation","variant","square","top","CardContent","Button","onClick","left","IconButton","insert_annotation_here","get_annotations","watch_insert_annotation","watch_insert_annotation_here","watch_get_annotations","watch_annotations_on_set_t_idx","watch_update_annotation","watch_delete_annotation","api","set_selected_annotation","bare","abort_controller","AbortController","cached_annotations","abort","annotation_window_actions","provenances_saga_actions","updated_annotation","ok","takeLatest","AnnotationsSVG","annotation_SVGs","cx","size_x","cy","size_y","stroke","strokeWidth","fill","deselect","preventDefault","stopPropagation","onDoubleClick","AnnotationSVG","AnnotationPanel","React","useState","setAnnotation","useEffect","textfields","TF","field","field_key","TextField","label","new_annotation","handle_change","margin","InputProps","set_worldlines_local","set_worldline_lists_local","worldline_lists","selected_lists","set_worldline_local","update_worldline_local","delete_worldline_local","worldlines_slice","set_all_visible","watch_create_worldline","watch_get_worldlines","watch_update_worldline","watch_delete_worldline","watch_set_all_visible","new_worldline_raw","new_worldline","raw_worldlines","removed_id","new_worldlines","Worldline","get_name","setState","onBlur","on_rename","backgroundColor","padding","on_recolor","opacity","WorldlinesPanel","new_name","new_color","fetch_state","adjust_selected_worldline","center_on_current_annotation","adjust_t","click","doubleclick","rpc_from_key","watch_fetch_state","watch_set_selected_annotation","watch_set_selected_worldline","watch_adjust_selected_worldline","watch_center_on_current_annotation","watch_adjust_t","watch_click","watch_doubleclick","watch_save","watch_load","watch_rpc","watch_rpc_from_key","meta","rpcs","new_state","new_id","worldlines_actions","new_w","annotations_saga_actions","worldlines_saga_actions","result","status","callbacks","try_int_payload","parseInt","putResolve","delay","f","exception","traceback","method_idx","ActionForm","handleChange","bind","handleSubmit","input_parser","onSubmit","defaultValue","Component","FloatForm","parseFloat","x_idx","A","full_state","bare_state","derived_state","state_json","mapDispatchToProps","connector_X","height_scale","width_scale","data_url","x_dim","y_dim","connector_Y","connector_Z","AnnotationView","fetch_and_draw","draw_to_canvas","LUTdata","ctx","refs","canvas","getContext","iData","ImageData","putImageData","make_click_handler","click_fn","getBoundingClientRect","x_pixels","clientX","y_pixels","clientY","x_local","y_local","handle_click","prev_props","svg_width","svg_height","hline","x1","y1","x2","y2","vline","right","ref","zIndex","AnnotationViewX","AnnotationViewY","AnnotationViewZ","DocstringTooltip","withStyles","tooltip","maxWidth","Tooltip","WindowPanel","window_state","set_window_state","toFixed","update","InputLabelProps","rpc_keys","split","keyname","rpc_idx","Fragment","interactive","title","placement","FormControl","marginBottom","InputLabel","Select","labelId","handle_new_rpc_keybinding","MenuItem","nextState","createNextState","draft","handle_rpc_arg_change","EPSILON","ARRAY_TYPE","Float32Array","RANDOM","random","PI","hypot","arguments","sqrt","create","out","glMatrix","fromMat4","clone","copy","fromValues","m00","m01","m02","m10","m11","m12","m20","m21","m22","identity","transpose","a01","a02","a12","invert","a00","a10","a11","a20","a21","a22","b01","b11","b21","det","adjoint","determinant","multiply","b","b00","b02","b10","b12","b20","b22","translate","v","rotate","rad","sin","c","cos","scale","fromTranslation","fromRotation","fromScaling","fromMat2d","fromQuat","q","z2","xx","yx","yy","zx","zy","zz","wx","wy","wz","normalFromMat4","a03","a13","a23","a30","a31","a32","a33","b03","b04","b05","b06","b07","b08","b09","projection","str","frob","add","subtract","multiplyScalar","multiplyScalarAndAdd","exactEquals","equals","a0","a1","a2","a3","a4","a5","a6","a7","a8","b0","b1","b2","b3","b4","b5","b6","b7","b8","mul","sub","m03","m13","m23","m30","m31","m32","m33","axis","len","rotateX","rotateY","rotateZ","fromXRotation","fromYRotation","fromZRotation","fromRotationTranslation","xy","xz","yz","fromQuat2","translation","bx","by","bz","bw","ax","ay","az","aw","magnitude","getTranslation","mat","getScaling","getRotation","scaling","is1","is2","is3","sm11","sm12","sm13","sm21","sm22","sm23","sm31","sm32","sm33","trace","S","fromRotationTranslationScale","sx","sy","sz","fromRotationTranslationScaleOrigin","o","ox","oy","oz","out0","out1","out2","out4","out5","out6","out8","out9","out10","frustum","bottom","near","far","rl","tb","nf","perspective","fovy","aspect","tan","Infinity","perspectiveFromFieldOfView","fov","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","ortho","lr","bt","lookAt","eye","center","up","x0","y0","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","targetTo","a9","a14","a15","b9","b13","b14","b15","divide","ceil","round","scaleAndAdd","distance","squaredDistance","squaredLength","negate","inverse","normalize","dot","cross","lerp","hermite","d","factorTimes2","factor1","factor2","factor3","factor4","bezier","inverseFactor","inverseFactorTimesTwo","zScale","transformMat4","m","transformMat3","transformQuat","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","angle","mag","cosine","acos","zero","div","dist","sqrDist","sqrLen","vec","stride","offset","count","fn","l","u","B","C","D","E","F","G","H","I","J","v1","v2","v3","v4","s1","s2","ix","iy","iz","iw","setAxisAngle","getAxisAngle","out_axis","getAngle","dotproduct","calculateW","exp","et","ln","atan2","pow","slerp","omega","cosom","sinom","scale0","scale1","u1","u2","u3","sqrt1MinusU1","sqrtU1","invDot","conjugate","fromMat3","fRoot","fTrace","j","k","fromEuler","halfToRad","cz","vec4","rotationTo","tmpvec3","vec3","xUnitVec3","yUnitVec3","sqlerp","temp1","temp2","setAxes","matr","mat3","transformMat2","transformMat2d","p0","p1","sinC","cosC","Shader","gl","vertexSrc","fragmentSrc","self","program","compileShader","regexUniform","matchUniformName","uniforms","vertexUnifs","match","fragUnifs","unif","getUniformLocation","use","useProgram","vert","frag","vs","createShader","VERTEX_SHADER","shaderSource","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","fs","FRAGMENT_SHADER","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","ArcballCamera","zoomSpeed","screenDims","veye","vcenter","vup","zAxis","viewDist","xAxis","yAxis","invScreen","centerTranslation","mat4","vt","rotMat","rotation","quat","camera","invCamera","updateCameraMatrix","prevMouse","curMouse","mPrev","vec2","clamp","mCur","mPrevBall","screenToArcball","mCurBall","zoom","amount","pan","mouseDelta","delta","worldDelta","eyePos","eyeDir","dir","upDir","unitP","pointDist","Buffer","capacity","dtype","buffer","Uint8Array","Int8Array","Uint16Array","Int16Array","Uint32Array","Int32Array","Float64Array","append","buf","newCap","tmp","constructor","BYTES_PER_ELEMENT","Controller","mousemove","press","wheel","twoFingerDrag","pinch","registerForCanvas","addEventListener","evt","rect","deltaY","oncontextmenu","touches","changedTouches","identifier","prevTouch","curTouch","buttons","curTouches","oldTouches","push","newTouches","motionVectors","motionDirs","pinchAxis","panAxis","pinchMotion","panMotion","sign","oldDist","newDist","panAmount","touchEnd","cubeStrip","_VolumeView","shader","volumeTexture","proj","projView","targetFrameTime","samplingRate","WIDTH","HEIGHT","volDims","tex","createTexture","activeTexture","TEXTURE0","bindTexture","TEXTURE_3D","texStorage3D","R8","texParameteri","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_WRAP_R","CLAMP_TO_EDGE","TEXTURE_WRAP_S","TEXTURE_WRAP_T","texSubImage3D","RED","UNSIGNED_BYTE","longestAxis","volScale","uniform3iv","uniform3fv","deleteTexture","setInterval","document","hidden","startTime","Date","clearColor","COLOR_BUFFER_BIT","uniformMatrix4fv","drawArrays","TRIANGLE_STRIP","finish","targetSamplingRate","getTime","uniform1f","defaultEye","controller","prev","cur","amt","drag","vao","createVertexArray","bindVertexArray","vbo","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","enableVertexAttribArray","vertexAttribPointer","FLOAT","uniform1i","enable","CULL_FACE","cullFace","FRONT","BLEND","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","colormapImage","Image","onload","draw","colormap","TEXTURE1","TEXTURE_2D","texStorage2D","SRGB8_ALPHA8","texSubImage2D","RGBA","src","VolumeView","XYZSliderBase","Slider","orientation","flip","step","track","handler","TSliderBase","max_val","LUTSliderBase","setValue","newValue","valueLabelDisplay","GammaBoxBase","inputProps","maxLength","AnnotationWindow","annotations_z","annotations_3D","size_z","origin_left","origin_top","padding_1","x_image_left","y_image_top","x_slider_top","y_slider_left","z_slider_1_left","z_slider_1_top","z_slider_2_left","z_slider_2_top","t_slider_top","t_slider_length","annotation_panel_left","LUT_slider_length","LUT_top","LUT_G_left","LUT_B_left","Gamma_left","window_panel_top","XSlider","YSlider","ZSlider1","ZSlider2","TSlider","LUTSliderRed","h","LUTSliderGreen","LUTSliderBlue","gammaBox","tabIndex","onKeyDown","fromCharCode","which","ctrl","ctrlKey","shiftKey","onKeyUp","App","annotations_actions","provenances_actions","combineReducers","annotation_window_reducer","annotations_reducer","worldlines_reducer","provenances_reducer","saga","annotation_window_sagas","annotations_sagas","worldlines_sagas","provenances_sagas","AppTest","theme","Boolean","location","hostname","sagaMiddleware","createSagaMiddleware","middleware","getDefaultMiddleware","thunk","store","configureStore","run","darkTheme","createMuiTheme","palette","primary","secondary","pink","typography","join","ReactDOM","render","ThemeProvider","exact","component","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.84bf1531.chunk.js","sourcesContent":["import { AnnotationWindowState_t as State_t, rpc_t } from './model'\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\"\nimport { annotation_id_t, Annotation_t } from '../annotations/model'\nimport { worldline_id_t } from '../worldlines/model';\n\nexport const initialState: State_t = {\n  x: 0.5,\n  y: 0.5,\n  z: 0.5,\n  c_idx: 0,\n  t_idx: 0,\n  shape_x: 0,\n  shape_y: 0,\n  shape_z: 0,\n  views: [\"slice\", \"mip\", \"vol\"],\n  shape_t: 0,\n  scale_x: 1,\n  scale_y: 1,\n  scale_z: 1,\n  LUT: {\n    red: [0, 150],\n    green: [0, 150],\n    blue: [0, 150]\n  },\n  gamma: 1.0,\n  selected_annotation: null,\n  visible_worldlines: [],\n  selected_worldline: null,\n  active_provenance: \"ANTT\",\n  fill_circles: true,\n  show_all_annotations: false,\n  rpc_list: [{ name: \"None found\", default_args: \"\", docstring: \"\" }],\n  rpc_keybindings: {\n    \"1\": 0,\n    \"2\": 2,\n    \"3\": 5,\n    \"4\": 5,\n    \"5\": 7,\n    \"6\": 8,\n    \"7\": 9,\n    \"8\": 0,\n    \"9\": 6,\n    \"0\": 3,\n  },\n  rpc_args: {\n    \"1\": \"_this, _now, *\",\n    \"2\": \"\",\n    \"3\": \"0\",\n    \"4\": \"1\",\n    \"5\": \"_this, _now, *, _ACTIVE\",\n    \"6\": \"_now, True, False, False\",\n    \"7\": \"key, value\",\n    \"8\": \"\",\n    \"9\": \"\",\n    \"0\": \"\",\n  },\n};\n\nconst threshold = (val: number, min: number, max: number): number =>\n  Math.max(Math.min(val, max), 0)\n\nconst reducers = {\n\n  set_state: (_state: State_t, action: PayloadAction<State_t>) =>\n    action.payload,\n\n  set_x: (state: State_t, action: PayloadAction<number>) => {\n    state.x = threshold(action.payload, 0, 1)\n  },\n  adjust_x: (state: State_t, action: PayloadAction<number>) => {\n    state.x = threshold(state.x + action.payload, 0, 1)\n  },\n\n  set_y: (state: State_t, action: PayloadAction<number>) => {\n    state.y = threshold(action.payload, 0, 1)\n  },\n  adjust_y: (state: State_t, action: PayloadAction<number>) => {\n    state.y = threshold(state.y + action.payload, 0, 1)\n  },\n\n  set_z: (state: State_t, action: PayloadAction<number>) => {\n    state.z = threshold(action.payload, 0, 1)\n  },\n  adjust_z: (state: State_t, action: PayloadAction<number>) => {\n    state.z = threshold(state.z + action.payload, 0, 1)\n  },\n\n  set_c_idx: (state: State_t, action: PayloadAction<number>) => {\n    state.c_idx = action.payload\n  },\n\n  adjust_c_idx: (state: State_t, action: PayloadAction<number>) => {\n    const idx = state.c_idx + action.payload\n    const n = state.views.length\n    state.c_idx = ((idx % n) + n) % n\n  },\n\n  set_t_idx: (state: State_t, action: PayloadAction<number>) => {\n    state.t_idx = threshold(action.payload, 0, state.shape_t - 1)\n  },\n\n  set_scale_x: (state: State_t, action: PayloadAction<number>) => {\n    state.scale_x = action.payload;\n  },\n  set_scale_y: (state: State_t, action: PayloadAction<number>) => {\n    state.scale_y = action.payload;\n  },\n  set_scale_z: (state: State_t, action: PayloadAction<number>) => {\n    state.scale_z = action.payload;\n  },\n\n  set_shape_x: (state: State_t, action: PayloadAction<number>) => {\n    state.shape_x = action.payload;\n  },\n  set_shape_y: (state: State_t, action: PayloadAction<number>) => {\n    state.shape_y = action.payload;\n  },\n  set_shape_z: (state: State_t, action: PayloadAction<number>) => {\n    state.shape_z = action.payload;\n  },\n\n  set_LUT_color: (state: State_t,\n    action: PayloadAction<[\"red\" | \"green\" | \"blue\", number, number]>) => {\n    state.LUT[action.payload[0]] = [action.payload[1], action.payload[2]]\n  },\n\n  set_gamma: (state: State_t, action: PayloadAction<number>) => {\n    state.gamma = Math.max(action.payload, 0)\n  },\n\n  set_selected_annotation_local: (\n    state: State_t, action: PayloadAction<annotation_id_t | null>) => {\n    state.selected_annotation = action.payload\n  },\n\n  set_selected_worldline_local: (\n    state: State_t, action: PayloadAction<worldline_id_t | null>) => {\n    state.selected_worldline = action.payload\n  },\n\n  set_active_provenance: (\n    state: State_t, action: PayloadAction<string>) => {\n    state.active_provenance = action.payload\n  },\n\n  set_fill_circles: (\n    state: State_t, action: PayloadAction<boolean>) => {\n    state.fill_circles = action.payload\n  },\n\n  toggle_fill_circles: (\n    state: State_t, action: PayloadAction) => {\n    state.fill_circles = !state.fill_circles\n  },\n\n  set_show_all_annotations: (\n    state: State_t, action: PayloadAction<boolean>) => {\n    state.show_all_annotations = action.payload\n  },\n\n  toggle_all_annotations: (\n    state: State_t, action: PayloadAction) => {\n    state.show_all_annotations = !state.show_all_annotations\n  },\n\n  set_rpc_list: (\n    state: State_t, action: PayloadAction<rpc_t[]>) => {\n    state.rpc_list = action.payload\n  },\n\n  set_rpc_keybinding: (\n    state: State_t, action: PayloadAction<[string, number]>) => {\n    state.rpc_keybindings[action.payload[0]] = action.payload[1]\n  },\n\n  set_rpc_args: (\n    state: State_t, action: PayloadAction<{ [key: string]: string }>) => {\n    state.rpc_args = action.payload\n  },\n\n  set_rpc_arg: (\n    state: State_t, action: PayloadAction<[string, string]>) => {\n    state.rpc_args[action.payload[0]] = action.payload[1]\n  },\n\n  center_on_annotation: (\n    state: State_t, action: PayloadAction<Annotation_t>) => {\n    state.x = Number(action.payload.x)\n    state.y = Number(action.payload.y)\n    state.z = Number(action.payload.z)\n  },\n}\n\nconst annotation_window_slice = createSlice({\n  name: 'annotation_window',\n  initialState,\n  reducers\n})\n\nexport const { actions, reducer } = annotation_window_slice\n","/**\n * A doubly linked list-based Least Recently Used (LRU) cache. Will keep most\n * recently used items while discarding least recently used items when its limit\n * is reached.\n *\n * Licensed under MIT. Copyright (c) 2010 Rasmus Andersson <http://hunch.se/>\n * See README.md for details.\n *\n * Illustration of the design:\n *\n *       entry             entry             entry             entry\n *       ______            ______            ______            ______\n *      | head |.newer => |      |.newer => |      |.newer => | tail |\n *      |  A   |          |  B   |          |  C   |          |  D   |\n *      |______| <= older.|______| <= older.|______| <= older.|______|\n *\n *  removed  <--  <--  <--  <--  <--  <--  <--  <--  <--  <--  <--  added\n */\n\nconst NEWER = Symbol('newer');\nconst OLDER = Symbol('older');\n\nexport function LRUMap(limit, entries) {\n  if (typeof limit !== 'number') {\n    // called as (entries)\n    entries = limit;\n    limit = 0;\n  }\n\n  this.size = 0;\n  this.limit = limit;\n  this.oldest = this.newest = undefined;\n  this._keymap = new Map();\n\n  if (entries) {\n    this.assign(entries);\n    if (limit < 1) {\n      this.limit = this.size;\n    }\n  }\n}\n\nfunction Entry(key, value) {\n  this.key = key;\n  this.value = value;\n  this[NEWER] = undefined;\n  this[OLDER] = undefined;\n}\n\n\nLRUMap.prototype._markEntryAsUsed = function(entry) {\n  if (entry === this.newest) {\n    // Already the most recenlty used entry, so no need to update the list\n    return;\n  }\n  // HEAD--------------TAIL\n  //   <.older   .newer>\n  //  <--- add direction --\n  //   A  B  C  <D>  E\n  if (entry[NEWER]) {\n    if (entry === this.oldest) {\n      this.oldest = entry[NEWER];\n    }\n    entry[NEWER][OLDER] = entry[OLDER]; // C <-- E.\n  }\n  if (entry[OLDER]) {\n    entry[OLDER][NEWER] = entry[NEWER]; // C. --> E\n  }\n  entry[NEWER] = undefined; // D --x\n  entry[OLDER] = this.newest; // D. --> E\n  if (this.newest) {\n    this.newest[NEWER] = entry; // E. <-- D\n  }\n  this.newest = entry;\n};\n\nLRUMap.prototype.assign = function(entries) {\n  let entry, limit = this.limit || Number.MAX_VALUE;\n  this._keymap.clear();\n  let it = entries[Symbol.iterator]();\n  for (let itv = it.next(); !itv.done; itv = it.next()) {\n    let e = new Entry(itv.value[0], itv.value[1]);\n    this._keymap.set(e.key, e);\n    if (!entry) {\n      this.oldest = e;\n    } else {\n      entry[NEWER] = e;\n      e[OLDER] = entry;\n    }\n    entry = e;\n    if (limit-- === 0) {\n      throw new Error('overflow');\n    }\n  }\n  this.newest = entry;\n  this.size = this._keymap.size;\n};\n\nLRUMap.prototype.get = function(key) {\n  // First, find our cache entry\n  var entry = this._keymap.get(key);\n  if (!entry) return; // Not cached. Sorry.\n  // As <key> was found in the cache, register it as being requested recently\n  this._markEntryAsUsed(entry);\n  return entry.value;\n};\n\nLRUMap.prototype.set = function(key, value) {\n  var entry = this._keymap.get(key);\n\n  if (entry) {\n    // update existing\n    entry.value = value;\n    this._markEntryAsUsed(entry);\n    return this;\n  }\n\n  // new entry\n  this._keymap.set(key, (entry = new Entry(key, value)));\n\n  if (this.newest) {\n    // link previous tail to the new tail (entry)\n    this.newest[NEWER] = entry;\n    entry[OLDER] = this.newest;\n  } else {\n    // we're first in -- yay\n    this.oldest = entry;\n  }\n\n  // add new entry to the end of the linked list -- it's now the freshest entry.\n  this.newest = entry;\n  ++this.size;\n  if (this.size > this.limit) {\n    // we hit the limit -- remove the head\n    this.shift();\n  }\n\n  return this;\n};\n\nLRUMap.prototype.shift = function() {\n  // todo: handle special case when limit == 1\n  var entry = this.oldest;\n  if (entry) {\n    if (this.oldest[NEWER]) {\n      // advance the list\n      this.oldest = this.oldest[NEWER];\n      this.oldest[OLDER] = undefined;\n    } else {\n      // the cache is exhausted\n      this.oldest = undefined;\n      this.newest = undefined;\n    }\n    // Remove last strong reference to <entry> and remove links from the purged\n    // entry being returned:\n    entry[NEWER] = entry[OLDER] = undefined;\n    this._keymap.delete(entry.key);\n    --this.size;\n    return [entry.key, entry.value];\n  }\n};\n\n// ----------------------------------------------------------------------------\n// Following code is optional and can be removed without breaking the core\n// functionality.\n\nLRUMap.prototype.find = function(key) {\n  let e = this._keymap.get(key);\n  return e ? e.value : undefined;\n};\n\nLRUMap.prototype.has = function(key) {\n  return this._keymap.has(key);\n};\n\nLRUMap.prototype['delete'] = function(key) {\n  var entry = this._keymap.get(key);\n  if (!entry) return;\n  this._keymap.delete(entry.key);\n  if (entry[NEWER] && entry[OLDER]) {\n    // relink the older entry with the newer entry\n    entry[OLDER][NEWER] = entry[NEWER];\n    entry[NEWER][OLDER] = entry[OLDER];\n  } else if (entry[NEWER]) {\n    // remove the link to us\n    entry[NEWER][OLDER] = undefined;\n    // link the newer entry to head\n    this.oldest = entry[NEWER];\n  } else if (entry[OLDER]) {\n    // remove the link to us\n    entry[OLDER][NEWER] = undefined;\n    // link the newer entry to head\n    this.newest = entry[OLDER];\n  } else {// if(entry[OLDER] === undefined && entry.newer === undefined) {\n    this.oldest = this.newest = undefined;\n  }\n\n  this.size--;\n  return entry.value;\n};\n\nLRUMap.prototype.clear = function() {\n  // Not clearing links should be safe, as we don't expose live links to user\n  this.oldest = this.newest = undefined;\n  this.size = 0;\n  this._keymap.clear();\n};\n\n\nfunction EntryIterator(oldestEntry) { this.entry = oldestEntry; }\nEntryIterator.prototype[Symbol.iterator] = function() { return this; }\nEntryIterator.prototype.next = function() {\n  let ent = this.entry;\n  if (ent) {\n    this.entry = ent[NEWER];\n    return { done: false, value: [ent.key, ent.value] };\n  } else {\n    return { done: true, value: undefined };\n  }\n};\n\n\nfunction KeyIterator(oldestEntry) { this.entry = oldestEntry; }\nKeyIterator.prototype[Symbol.iterator] = function() { return this; }\nKeyIterator.prototype.next = function() {\n  let ent = this.entry;\n  if (ent) {\n    this.entry = ent[NEWER];\n    return { done: false, value: ent.key };\n  } else {\n    return { done: true, value: undefined };\n  }\n};\n\nfunction ValueIterator(oldestEntry) { this.entry = oldestEntry; }\nValueIterator.prototype[Symbol.iterator] = function() { return this; }\nValueIterator.prototype.next = function() {\n  let ent = this.entry;\n  if (ent) {\n    this.entry = ent[NEWER];\n    return { done: false, value: ent.value };\n  } else {\n    return { done: true, value: undefined };\n  }\n};\n\n\nLRUMap.prototype.keys = function() {\n  return new KeyIterator(this.oldest);\n};\n\nLRUMap.prototype.values = function() {\n  return new ValueIterator(this.oldest);\n};\n\nLRUMap.prototype.entries = function() {\n  return this;\n};\n\nLRUMap.prototype[Symbol.iterator] = function() {\n  return new EntryIterator(this.oldest);\n};\n\nLRUMap.prototype.forEach = function(fun, thisObj) {\n  if (typeof thisObj !== 'object') {\n    thisObj = this;\n  }\n  let entry = this.oldest;\n  while (entry) {\n    fun.call(thisObj, entry.value, entry.key, this);\n    entry = entry[NEWER];\n  }\n};\n\n/** Returns a JSON (array) representation */\nLRUMap.prototype.toJSON = function() {\n  var s = new Array(this.size), i = 0, entry = this.oldest;\n  while (entry) {\n    s[i++] = { key: entry.key, value: entry.value };\n    entry = entry[NEWER];\n  }\n  return s;\n};\n\n/** Returns a String representation */\nLRUMap.prototype.toString = function() {\n  var s = '', entry = this.oldest;\n  while (entry) {\n    s += String(entry.key)+':'+entry.value;\n    entry = entry[NEWER];\n    if (entry) {\n      s += ' < ';\n    }\n  }\n  return s;\n};\n","import { LRUMap } from '../third_party/lru'\nimport { AnnotationsState_t, Annotation_t, annotation_id_t } from '../annotations/model'\nimport { Worldline_t, Worldlines_t, worldline_id_t } from '../worldlines/model'\n\nconst image_cache = new LRUMap<string, Uint8ClampedArray>(5000)\nconst annotation_cache = new LRUMap<number, AnnotationsState_t>(1000)\n\n// Annotation window\n\nexport const fetch_metadata = () => {\n  return fetch(\"/metadata\")\n    .then(x => x.json())\n}\n\nexport async function fetch_data_cache(\n  url: string,\n  signal: AbortSignal): Promise<Uint8ClampedArray> {\n\n  if (image_cache.has(url)) {\n    const uint8_array = image_cache.get(url)\n    if (uint8_array !== undefined) {\n      return uint8_array\n    }\n  }\n\n  return await fetch(url, { signal })\n    .then((x) => x.arrayBuffer())\n    .then((x) => {\n      const array = new Uint8ClampedArray(x);\n      image_cache.set(url, array);\n      return array;\n    })\n    .catch(err => {\n      if (err.name === \"AbortError\") {\n        // console.log(\"Fetch aborted:\", url)\n      }\n      else {\n        console.error(err)\n      }\n    }) as Uint8ClampedArray\n\n}\n\nexport async function fetch_data(\n  url: string,\n  signal: AbortSignal): Promise<Uint8ClampedArray> {\n\n  return await fetch(url, { signal })\n    .then((x) => x.arrayBuffer())\n    .then((x) => new Uint8ClampedArray(x))\n    .catch(err => {\n      if (err.name === \"AbortError\") {\n        // console.log(\"Fetch aborted:\", url)\n      }\n      else {\n        console.error(err)\n      }\n    }) as Uint8ClampedArray\n\n}\n\n// Annotations\n\nexport type bare_annotation_t = {\n  x: number,\n  y: number,\n  z: number,\n  t_idx: number,\n  worldline_id: number\n}\n\nexport const insert_annotation = (annotation: bare_annotation_t) => {\n  return fetch(\"/annotations\", {\n    method: \"POST\", // or \"PUT\"\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(annotation),\n  })\n    .then((response) => response.json())\n}\n\nexport function fetch_annotations_cache(t: number):\n  AnnotationsState_t | undefined {\n\n  if (annotation_cache.has(t)) {\n    const annotations = annotation_cache.get(t)\n    if (annotations !== undefined) {\n      return annotations\n    }\n  }\n\n}\n\n// export const fetch_annotations = (t: number) =>{\n//   return fetch(`/t/${t}/annotations`)\n//   .then((response) => response.json())\n// }\n\nexport async function fetch_annotations(t: number, signal: AbortSignal):\n  Promise<AnnotationsState_t> {\n\n  return await fetch(`/t/${t}/annotations`, { signal })\n    .then((x) => x.json())\n    .then((x) => {\n      annotation_cache.set(t, x);\n      return x;\n    })\n    .catch(err => {\n      if (err.name === \"AbortError\") {\n        // console.log(\"Fetch aborted: Annotations for \", t)\n      }\n      else {\n        console.error(err)\n      }\n    }) as AnnotationsState_t\n}\n\nexport const update_annotation = (a: Annotation_t) => {\n  return fetch(`/annotations/${a.id}`, {\n    method: \"PUT\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(a),\n  })\n    .then((response) => response.json())\n}\n\nexport const delete_annotation = (id: annotation_id_t) => {\n  return fetch(`/annotations/${id}`, { method: \"DELETE\" })\n}\n\n// Worldlines\n\nexport const create_worldline = () => {\n  return fetch(`/worldlines`, { method: \"POST\" })\n    .then((response) => response.json())\n}\n\nexport const fetch_worldlines = () => {\n  return fetch(`/worldlines`, { method: \"GET\" })\n    .then((response) => (response.json() as Promise<Worldlines_t>))\n}\n\nexport const update_worldline = (w: Partial<Worldline_t>) => {\n  return fetch(`/worldlines/${w.id}`, {\n    method: \"PUT\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(w),\n  })\n    .then((response) => response.json())\n}\n\nexport const delete_worldline = (id: worldline_id_t) => {\n  return fetch(`/worldlines/${id}`, { method: \"DELETE\" })\n}\n\n// Save worldlines and annotations\n\nexport const save = () => {\n  return fetch(\"/save\", {\n    method: \"POST\",\n  })\n    .then((response) => response.json())\n    .then((data) => {\n      window.alert(`Save successful: ${data.path}`);\n      console.log(\"Saved to: \", data)\n    })\n    .catch((error) => {\n      window.alert(\"Save failed. See console.\")\n      console.error(\"Error:\", error);\n    });\n}\n\n// Load worldlines and annotations\n\nexport const load = () => {\n  return fetch(\"/load\", {\n    method: \"POST\",\n  })\n    .then((response) => response.json())\n    .then((data) => {\n      window.alert(`Load successful: ${data.path}`);\n    })\n    .catch((error) => {\n      window.alert(\"Load failed. See console.\")\n      console.error(\"Error:\", error);\n    });\n}\n\n// RPC\n\nexport const fetch_rpcs = () => {\n  return fetch(\"/rpc\")\n    .then(x => x.json())\n}\n\nexport const rpc = (method: string, arg: string, state: AnnotationsState_t) => {\n\n  return fetch(\"/rpc\", {\n    method: \"POST\", // or \"PUT\"\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ method, arg, state }),\n  })\n    .then((response) => response.json())\n\n}","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\n\nimport {\n  AnnotationsState_t as State_t ,\n  Annotation_t,\n  annotation_id_t\n} from './model'\n\nexport const initialState: State_t = {}\n\nconst reducers = {\n\n  set_state: (state: State_t, action: PayloadAction<State_t>) =>\n    action.payload,\n\n  set_annotation_local: (\n    state: State_t,\n    action: PayloadAction<Annotation_t>) => {\n      state[action.payload.id] = action.payload\n    },\n\n  delete_annotation_local: (\n    state: State_t,\n    action: PayloadAction<annotation_id_t>) => {\n      delete state[action.payload]\n    }\n\n}\n\nconst annotations_slice = createSlice({\n  name: 'annotations',\n  initialState,\n  reducers\n})\n\nexport const { actions, reducer } = annotations_slice","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\n\nimport {\n  provenance_id_t,\n  ProvenancesState_t as State_t,\n} from './model'\n\nexport const initialState: State_t = {}\n\nconst reducers = {\n\n  set_state: (_state: State_t, action: PayloadAction<State_t>) =>\n    action.payload,\n\n  set_provenance_selected:  (\n    state: State_t,\n    action: PayloadAction<[provenance_id_t, boolean]>) => {\n    state[action.payload[0]].visible = action.payload[1]\n  },\n\n  set_all_selected: (\n    state: State_t,\n    action: PayloadAction<boolean>) => {\n      for (let provenance in state) {\n        state[provenance].visible = action.payload\n      }\n    }\n\n}\n\nconst provenances_slice = createSlice({\n  name: 'provenances',\n  initialState,\n  reducers\n})\n\nexport const { actions, reducer } = provenances_slice","import { State_t } from './model'\n\nexport const get_annotation_window_state = (app_state: State_t) =>\n    app_state.annotation_window\n\nexport const get_annotations_state = (app_state: State_t) =>\n    app_state.annotations\n\nexport const get_worldlines_state = (app_state: State_t) =>\n    app_state.worldlines\n\nexport const get_provenances_state = (app_state: State_t) =>\n    app_state.provenances\n\nexport const get_dataset = (app_state: State_t) =>\n    app_state.dataset\n","// Convert x/y/z to index values using shape. The convention is that images\n// go from 0.0 to 1.0, so the center values of each pixel are in (0, 1)\n\nimport { LUT_t } from \"./model\"\n\nexport const idx_from_coord = (coord: number, shape: number): number => {\n  return Math.max(Math.floor(coord * shape - 1e-6), 0)\n}\nexport const coord_from_idx = (idx: number, shape: number): number => {\n  return (idx + 0.5) / shape\n}\n\n// Apply a LUT to a uint8 array.\n\nconst LUT_linear = (value: number, lut: [number, number], gamma: number): number =>\n  255  * (((value - lut[0]) / (lut[1] - lut[0])) ** gamma)\n\nexport const apply_LUT =\n  (data: Uint8ClampedArray, LUT: LUT_t, gamma: number): Uint8ClampedArray =>\n\n    data.map((val: number, idx: number): number => {\n      const offset = idx % 4\n      switch (offset) {\n        case 0: return LUT_linear(val, LUT.red, gamma)\n        case 1: return LUT_linear(val, LUT.green, gamma)\n        case 2: return LUT_linear(val, LUT.blue, gamma)\n        default: return val\n      }\n    })\n\nexport const apply_green_LUT =\n  (data: Uint8ClampedArray, LUT: LUT_t, gamma: number): Uint8ClampedArray =>\n\n  data.map((val: number): number => LUT_linear(val, LUT.green, gamma))\n","import { createSelector } from 'reselect'\n\nimport * as app_selectors from '../app/selectors'\nimport { idx_from_coord } from './helpers'\nimport { State_t } from '../app/model'\n\nexport const get_state = app_selectors.get_annotation_window_state\n\n// Top level selectors\nexport const get_x = createSelector(get_state, s => s.x)\nexport const get_y = createSelector(get_state, s => s.y)\nexport const get_z = createSelector(get_state, s => s.z)\nexport const get_c_idx = createSelector(get_state, s => s.c_idx)\nexport const get_t_idx = createSelector(get_state, s => s.t_idx)\nexport const get_shape_x = createSelector(get_state, s => s.shape_x)\nexport const get_shape_y = createSelector(get_state, s => s.shape_y)\nexport const get_shape_z = createSelector(get_state, s => s.shape_z)\nexport const get_shape_t = createSelector(get_state, s => s.shape_t)\nexport const get_views = createSelector(get_state, s => s.views)\nexport const get_scale_x = createSelector(get_state, s => s.scale_x)\nexport const get_scale_y = createSelector(get_state, s => s.scale_y)\nexport const get_scale_z = createSelector(get_state, s => s.scale_z)\nexport const get_LUT = createSelector(get_state, s => s.LUT)\nexport const get_gamma = createSelector(get_state, s => s.gamma)\nexport const get_selected_annotation = createSelector(get_state,\n  s => s.selected_annotation)\nexport const get_visible_worldlines = createSelector(get_state,\n  s => s.visible_worldlines)\nexport const get_selected_worldline = createSelector(get_state,\n  s => s.selected_worldline)\nexport const get_active_provenance = createSelector(get_state,\n  s => s.active_provenance)\nexport const get_fill_circles = createSelector(get_state, s => s.fill_circles)\nexport const get_show_all_annotations = createSelector(get_state,\n  s => s.show_all_annotations)\nexport const get_rpc_list = createSelector(get_state,\n  s => s.rpc_list)\nexport const get_rpc_keybindings = createSelector(get_state,\n  s => s.rpc_keybindings)\n\n// Convert coordinate in (0, 1) to index in [0, shape-1]\nexport const get_x_idx = createSelector([get_x, get_shape_x], idx_from_coord)\nexport const get_y_idx = createSelector([get_y, get_shape_y], idx_from_coord)\nexport const get_z_idx = createSelector([get_z, get_shape_z], idx_from_coord)\n\n// Get view information\n\nexport const get_view = createSelector(\n  get_views,\n  get_c_idx,\n  (views, c_idx) => views[c_idx]\n)\n\nconst get_dim_viewname = (dim: 'x' | 'y' | 'z') => createSelector(\n  get_view,\n  (view) => {\n    switch (view) {\n      case \"slice\": return dim\n      case \"mip\": return `mip_${dim}`\n      default: return dim\n    }\n  }\n)\n\nconst get_x_viewname = get_dim_viewname('x')\nconst get_y_viewname = get_dim_viewname('y')\nconst get_z_viewname = get_dim_viewname('z')\n\nconst get_dim_viewidx = (dim: 'x' | 'y' | 'z',\n  bare_getter: (s: State_t) => number) => createSelector(\n    get_view,\n    bare_getter,\n    (view, idx) => {\n      switch (view) {\n        case \"slice\": return idx\n        case \"mip\": return 0\n        default: return idx\n      }\n    }\n)\n\nconst get_x_viewidx = get_dim_viewidx('x', get_x_idx)\nconst get_y_viewidx = get_dim_viewidx('y', get_y_idx)\nconst get_z_viewidx = get_dim_viewidx('z', get_z_idx)\n\n// Get image urls (fetching has to be done in components)\n\nconst make_data_url = (t: number, view: string, x: number) =>\n  `/t/${t}/data/${view}/${x}`\n\nexport const get_x_url = createSelector(\n  get_t_idx,\n  get_x_viewname,\n  get_x_viewidx,\n  make_data_url\n)\nexport const get_y_url = createSelector(\n  get_t_idx,\n  get_y_viewname,\n  get_y_viewidx,\n  make_data_url\n)\nexport const get_z_url = createSelector(\n  get_t_idx,\n  get_z_viewname,\n  get_z_viewidx,\n  make_data_url\n)\n\nexport const get_vol_url = createSelector(\n  get_t_idx,\n  (t) => make_data_url(t, \"gvol\", 1)\n)","import { createSelector } from 'reselect'\n\nimport * as app_selectors from '../app/selectors'\n\nexport const get_state = app_selectors.get_worldlines_state\n\nexport const get_worldlines = createSelector(\n  get_state,\n  (s) => s.worldlines\n)\n\nexport const get_visible_worldlines = createSelector(\n  get_worldlines,\n  (s) => Object.entries(s)\n    .filter((w) => w[1].visible)\n    .map((w) => Number(w[0]))\n)\n","import { createSelector } from 'reselect'\n\nimport * as app_selectors from '../app/selectors'\n\nexport const get_state = app_selectors.get_provenances_state\n\nexport const get_visible_provenances = createSelector(\n    get_state,\n    (x) => {\n        console.log(x)\n        return Object.entries(x)\n        .filter((p) => p[1].visible)\n        .map((p) => p[1].id)}\n)","import { createSelector } from 'reselect'\nimport fp from 'lodash/fp'\nimport { Dictionary } from 'lodash'\n\nimport { annotation_id_t, Annotation_t } from './model'\nimport * as app_selectors from '../app/selectors'\nimport * as annotation_window_selectors from '../annotation_window/selectors'\nimport * as worldlines_selectors from '../worldlines/selectors'\nimport * as provenances_selectors from '../provenances/selectors'\nimport { Worldline_t, WorldlinesState_t } from '../worldlines/model'\n\nexport const get_state = app_selectors.get_annotations_state\n\nexport const get_annotation_ids = createSelector(\n  get_state,\n  fp.keys\n)\n\nexport const get_used_worldline_ids = createSelector(\n  get_state,\n  (x) => fp.values(fp.mapValues(\"worldline_id\")(x))\n)\n\n// Get annotations\n\nexport const get_annotations_list = createSelector(\n  get_state,\n  (annotations) => {\n    return Object.entries(annotations).map((a) => a[1])\n  }\n)\n\nexport const get_visible_annotations = createSelector(\n  get_state,\n  worldlines_selectors.get_visible_worldlines,\n  provenances_selectors.get_visible_provenances,\n  (s, w, p) => fp.pickBy((x: Annotation_t) =>\n    w.includes(x.worldline_id) && p.includes(x.provenance))(s)\n)\n\nexport const get_selected_annotation_id = createSelector(\n  get_state,\n  annotation_window_selectors.get_selected_annotation,\n  annotation_window_selectors.get_selected_worldline,\n  (all, a, w) => {\n    if (a !== null) {\n      return a\n    }\n    else if (w !== null) {\n      return Number(fp.findKey({ worldline_id: w })(all))\n    } else {\n      return null\n    }\n  }\n)\n\nexport const get_selected_annotation = createSelector(\n  get_state,\n  get_selected_annotation_id,\n  (all, a) => { return (a ? all[a] : null) }\n)\n\n// Gather information needed to draw annotations in 3D or 2D.\n\nconst get_worldline_for_annotation = (\n  annotation: Annotation_t,\n  worldlines: WorldlinesState_t) =>\n  worldlines.worldlines[annotation.worldline_id]\n\nconst get_color = (annotation: Annotation_t, worldline: Worldline_t) => {\n  return worldline.color\n}\n\nconst get_annotations_with_all_info = createSelector(\n  get_visible_annotations,\n  worldlines_selectors.get_state,\n  get_selected_annotation_id,\n  (a, w, s) => fp.mapValues((x: Annotation_t) => {\n    const worldline = get_worldline_for_annotation(x, w)\n    return {\n      ...x,\n      //worldline: worldline,\n      color: get_color(x, worldline),\n      selected: x.id === s\n    }\n  }\n  )(a)\n)\n\nexport type AnnotationView3D_t = {\n  id: annotation_id_t,\n  x: number,\n  y: number,\n  z: number,\n  color: string,\n  selected: boolean\n}\nexport const get_annotations_view3D = createSelector(\n  get_annotations_with_all_info,\n  fp.mapValues(fp.pick(['id', 'x', 'y', 'z', 'color', 'selected']))\n)\n\nexport type AnnotationView2D_t = {\n  id: annotation_id_t,\n  x: number,\n  y: number,\n  color: string,\n  selected: boolean,\n  radius: number\n}\nconst get_visible_annotations_near = (\n  annotations: Dictionary<AnnotationView3D_t>,\n  dim: 'x' | 'y' | 'z',\n  output_x: 'x' | 'y' | 'z',\n  output_y: 'x' | 'y' | 'z',\n  coord: number,\n  r: number\n): Dictionary<AnnotationView2D_t> => {\n\n  const is_close = (a: AnnotationView3D_t) => {\n    return (r - Math.abs(a[dim] - coord)) > 0\n  }\n\n  const project_2D = (a: AnnotationView3D_t): any => {\n    return {\n      id: a.id,\n      x: a[output_x],\n      y: a[output_y],\n      color: a.color,\n      selected: a.selected,\n      radius: 4\n    }\n  }\n\n  const close_3D = fp.pickBy(is_close)(annotations)\n  return fp.mapValues(project_2D)(close_3D)\n\n}\n\nconst RADIUS_X = 0.02\nconst RADIUS_Y = 0.02\nconst RADIUS_Z = 0.07\n\nexport const get_x_annotations = createSelector(\n  get_annotations_view3D,\n  annotation_window_selectors.get_x,\n  annotation_window_selectors.get_show_all_annotations,\n  (a, x, all) => {\n    if (all) {\n      return get_visible_annotations_near(a, \"x\", \"z\", \"y\", x, 2.0)\n    } else {\n      return get_visible_annotations_near(a, \"x\", \"z\", \"y\", x, RADIUS_X)\n    }\n  }\n)\n\nexport const get_y_annotations = createSelector(\n  get_annotations_view3D,\n  annotation_window_selectors.get_y,\n  annotation_window_selectors.get_show_all_annotations,\n  (a, y, all) => {\n    if (all) {\n      return get_visible_annotations_near(a, \"y\", \"x\", \"z\", y, 2.0)\n    } else {\n      return get_visible_annotations_near(a, \"y\", \"x\", \"z\", y, RADIUS_Y)\n    }\n  }\n)\n\nexport const get_z_annotations = createSelector(\n  get_annotations_view3D,\n  annotation_window_selectors.get_z,\n  annotation_window_selectors.get_show_all_annotations,\n  (a, z, all) => {\n    if (all) {\n      return get_visible_annotations_near(a, \"z\", \"x\", \"y\", z, 2.0)\n    } else {\n      return get_visible_annotations_near(a, \"z\", \"x\", \"y\", z, RADIUS_Z)\n    }\n  }\n)","import { createAction, PayloadAction } from '@reduxjs/toolkit'\nimport { put, takeEvery, select } from 'redux-saga/effects'\n\nimport { actions } from './actions'\nimport { ProvenancesState_t } from './model'\n\nimport { Annotation_t } from '../annotations/model'\nimport * as annotations_selectors from '../annotations/selectors'\n\nconst prefix = \"provenances/\"\nconst saga_action_types = {\n  fetch_provenances: prefix + \"fetch_provenances\",\n}\n\nexport const saga_actions = {\n  fetch_provenances: createAction(saga_action_types.fetch_provenances),\n}\n\nfunction* fetch_provenances(action: PayloadAction) {\n  const annotations = (yield select(\n    annotations_selectors.get_annotations_list)) as Annotation_t[]\n\n  const provenances_set = new Set(annotations.map(x => x.provenance));\n\n  const provenances: ProvenancesState_t = {}\n  provenances_set.forEach(x => {\n    provenances[x] = {id: x, visible: true}\n  });\n\n  yield put(actions.set_state(provenances))\n}\n\nfunction* watch_fetch_provenances() {\n  yield takeEvery(saga_action_types.fetch_provenances, fetch_provenances)\n}\nexport const sagas = [\n  watch_fetch_provenances,\n]","import React from 'react'\n\nimport { Provenance_t } from '../model'\n\ntype Provenance_props_t = {\n  provenance: Provenance_t,\n  on_check: (state: boolean) => any,\n}\n\nconst Provenance = (props: Provenance_props_t) => {\n\n  return (\n    <div\n      style={{\n        float: \"left\",\n        position: \"relative\",\n        height: \"30px\",\n        width: \"100px\"\n      }}>\n      <input type=\"checkbox\"\n        checked={props.provenance.visible}\n        onChange={(event) => props.on_check(event.target.checked)}\n        style={{\n          float: \"left\",\n          marginTop: \"8px\"\n        }} />\n      <div\n        style={{\n          float: \"left\",\n          fontFamily: \"monospace\",\n          fontSize: \"14px\",\n          color: \"#C0C0C0\",\n          marginTop: \"5px\",\n          border: \"0px\",\n          width: \"20px\"\n        }}>\n          { props.provenance.id }\n      </div>\n    </div >)\n\n}\n\nexport default Provenance","import React from 'react'\nimport { bindActionCreators } from 'redux'\nimport { connect, ConnectedProps } from \"react-redux\"\n\nimport { Card, CardContent } from '@material-ui/core'\nimport IconButton from '@material-ui/core/IconButton'\nimport RefreshIcon from '@material-ui/icons/Refresh'\nimport Button from '@material-ui/core/Button'\n\nimport { State_t } from '../../app/model'\nimport { AppDispatch_t } from '../../index'\n\nimport { Provenance_t } from '../model'\nimport * as selectors from '../selectors'\nimport { actions } from '../actions'\nimport { saga_actions } from '../sagas'\n\nimport { saga_actions as annotation_window_saga_actions }\n  from '../../annotation_window'\n\nimport Provenance from './Provenance'\n\nconst mapStateToProps = (state: State_t) => {\n  return {\n    state: selectors.get_state(state),\n  }\n}\n\nconst mapDispatchToProps = (dispatch: AppDispatch_t) => {\n  return {\n    actions: bindActionCreators({ ...actions }, dispatch),\n    saga_actions: bindActionCreators({ ...saga_actions }, dispatch),\n    set_selected_worldline: bindActionCreators(\n      annotation_window_saga_actions.set_selected_worldline, dispatch\n    )\n  }\n}\n\nconst connector = connect(mapStateToProps, mapDispatchToProps)\ntype ReduxProps_t = ConnectedProps<typeof connector>\n\ntype ProvenancePanel_props_t = ReduxProps_t\n\nconst _ProvenancePanel = (props: ProvenancePanel_props_t) => {\n\n  const provenances = (Object.values(props.state)).map(\n    (x: Provenance_t) =>\n      <Provenance key={x.id}\n        provenance={x}\n        on_check={(checked) =>\n          props.actions.set_provenance_selected([x.id, checked])\n        }\n      />)\n\n  return (\n    <Card\n      elevation={3}\n      variant=\"outlined\"\n      square\n      style={{\n        position: \"relative\",\n        top: \"50px\",\n        width: \"340px\",\n        height: \"auto\"\n      }}>\n      <CardContent>\n        <h3>Provenances:</h3>\n\n        <Button\n          color=\"default\"\n          onClick={(event) => props.actions.set_all_selected(true)}\n          style={{\n            position: \"absolute\",\n            left: \"140px\",\n            top: \"28px\"\n          }}>\n          all\n        </Button>\n        <Button\n          color=\"default\"\n          onClick={(event) => props.actions.set_all_selected(false)}\n          style={{\n            position: \"absolute\",\n            left: \"190px\",\n            top: \"28px\"\n          }}>\n          none\n        </Button>\n\n        {provenances ? provenances : null}\n\n        <IconButton\n          aria-label=\"fetch\"\n          onClick={props.saga_actions.fetch_provenances}\n          style={{\n            position: \"absolute\",\n            left: \"250px\",\n            top: \"25px\"\n          }}>\n          <RefreshIcon fontSize=\"small\" />\n        </IconButton>\n\n      </CardContent>\n    </Card>)\n\n}\n\nconst ProvenancePanel = connector(_ProvenancePanel)\nexport default ProvenancePanel","import { call, put, takeEvery, takeLatest, select }\n  from 'redux-saga/effects'\nimport { createAction, PayloadAction } from '@reduxjs/toolkit'\nimport { actions } from './actions'\nimport { actions as annotation_window_actions ,\n  saga_actions as annotation_window_saga_actions }\n  from '../annotation_window'\nimport {saga_actions as provenances_saga_actions} from '../provenances'\nimport * as annotation_window_selectors from '../annotation_window/selectors'\nimport * as annotations_selectors from '../annotations/selectors'\nimport { State_t as AppState_t } from '../app/model'\n\nimport * as api from '../api'\nimport { Annotation_t } from './model'\n\nconst prefix = \"annotations/\"\nconst saga_action_types = {\n  insert_annotation: prefix + \"insert_annotation\",\n  insert_annotation_here: prefix + \"insert_annotation_here\",\n  get_annotations: prefix + \"get_annotations\",\n  update_annotation: prefix + \"update_annotation\",\n  delete_annotation: prefix + \"delete_annotation\",\n}\n\nexport const saga_actions = {\n\n  insert_annotation: createAction<api.bare_annotation_t>(\n    saga_action_types.insert_annotation),\n\n  insert_annotation_here: createAction(\n    saga_action_types.insert_annotation_here),\n\n  get_annotations: createAction(saga_action_types.get_annotations),\n\n  update_annotation: createAction<Annotation_t>(\n    saga_action_types.update_annotation),\n\n  delete_annotation: createAction(saga_action_types.delete_annotation)\n\n}\n\nfunction* insert_annotation(action: PayloadAction<api.bare_annotation_t>) {\n\n  const a = yield call(api.insert_annotation, action.payload)\n  yield put(actions.set_annotation_local(a))\n  yield put(annotation_window_saga_actions.set_selected_annotation(a.id))\n\n}\n\nfunction* insert_annotation_here() {\n\n  const state: AppState_t = yield select()\n\n  const { x, y, z, t_idx, selected_worldline, active_provenance } =\n    state.annotation_window\n\n  let worldline_id = selected_worldline\n  if (worldline_id === null) {\n    worldline_id = 0\n  }\n\n  const bare = { x, y, z, t_idx, worldline_id, provenance: active_provenance }\n\n  yield put(saga_actions.insert_annotation(bare))\n\n}\n\nlet abort_controller = new AbortController()\nfunction* get_annotations(action:PayloadAction<number>) {\n\n  const t_idx = yield select(annotation_window_selectors.get_t_idx)\n\n  const cached_annotations = yield call(api.fetch_annotations_cache, t_idx)\n  if (cached_annotations !== undefined) {\n    yield put(actions.set_state(cached_annotations))\n  }\n\n  abort_controller.abort()\n  abort_controller = new AbortController()\n\n  const annotations = yield call(api.fetch_annotations, t_idx,\n    abort_controller.signal)\n  yield put(actions.set_state(annotations))\n\n  yield put(annotation_window_actions.set_selected_annotation_local(null))\n\n  const selected_annotation = yield select(\n    annotations_selectors.get_selected_annotation)\n\n  if (selected_annotation) {\n    yield put(\n      annotation_window_actions.center_on_annotation(selected_annotation))\n  }\n\n  yield put(provenances_saga_actions.fetch_provenances())\n\n}\n\nfunction* update_annotation(action: PayloadAction<Annotation_t>) {\n  const updated_annotation = yield call(api.update_annotation, action.payload)\n  yield put(actions.set_annotation_local(updated_annotation))\n  yield put(annotation_window_saga_actions\n    .set_selected_annotation(updated_annotation.id))\n}\n\nfunction* delete_annotation(action: PayloadAction) {\n\n  const selected = yield select(\n    annotations_selectors.get_selected_annotation_id)\n\n  const status = yield call(api.delete_annotation, selected)\n\n  if (status.ok) {\n    yield put(actions.delete_annotation_local(selected))\n    yield put(annotation_window_actions.set_selected_annotation_local(null))\n  }\n}\n\nfunction* watch_insert_annotation() {\n  yield takeEvery(saga_action_types.insert_annotation, insert_annotation)\n}\n\nfunction* watch_insert_annotation_here() {\n  yield takeEvery(saga_action_types.insert_annotation_here,\n    insert_annotation_here)\n}\n\nfunction* watch_get_annotations() {\n  yield takeLatest(saga_action_types.get_annotations, get_annotations)\n}\n\nfunction* watch_annotations_on_set_t_idx() {\n  yield takeLatest(\"annotation_window/set_t_idx\", get_annotations)\n}\n\nfunction* watch_update_annotation() {\n  yield takeEvery(saga_action_types.update_annotation, update_annotation)\n}\n\nfunction* watch_delete_annotation() {\n  yield takeEvery(saga_action_types.delete_annotation, delete_annotation)\n}\nexport const sagas = [\n  watch_insert_annotation,\n  watch_insert_annotation_here,\n  watch_get_annotations,\n  watch_annotations_on_set_t_idx,\n  watch_update_annotation,\n  watch_delete_annotation,\n]","import React from 'react'\n\nimport { AnnotationView2D_t } from '../selectors'\nimport { Dictionary } from 'lodash'\n\ntype AnnotationSVG_props_t = AnnotationView2D_t & {\n  size_x: number,\n  size_y: number,\n  select: (id: number) => any,\n  deselect: (id: number) => any,\n  fill_circles: boolean,\n}\n\nconst AnnotationSVG = (props: AnnotationSVG_props_t) =>\n  <circle\n    key={props.id}\n    cx={props.x * props.size_x}\n    cy={props.y * props.size_y}\n    r={props.selected ? 2 * props.radius : props.radius}\n    stroke={props.fill_circles? \"white\":  props.color}\n    strokeWidth=\"1\"\n    fill={props.fill_circles? props.color: \"none\"}\n    onClick={(e) => {\n      props.selected ? props.deselect(props.id) : props.select(props.id)\n      e.preventDefault()\n      e.stopPropagation()\n    }}\n    onDoubleClick={(e) => { e.preventDefault(); e.stopPropagation(); }} />\n\n\ntype AnnotationsSVG_props_t = {\n  annotations: Dictionary<AnnotationView2D_t>\n  size_x: number,\n  size_y: number,\n  select: (id: number) => any,\n  deselect: (id: number) => any,\n  fill_circles: boolean,\n}\n\nconst AnnotationsSVG = (props: AnnotationsSVG_props_t) => {\n\n  const annotation_SVGs = Object.entries(props.annotations).map((a) =>\n    AnnotationSVG({\n      ...a[1],\n      size_x: props.size_x,\n      size_y: props.size_y,\n      select: props.select,\n      deselect: props.deselect,\n      fill_circles: props.fill_circles\n    }))\n\n  return <g> {annotation_SVGs} </g>\n}\n\nexport default AnnotationsSVG","import React from 'react'\nimport { bindActionCreators } from 'redux'\nimport { connect, ConnectedProps } from \"react-redux\"\nimport { TextField, Card, CardContent } from '@material-ui/core'\nimport IconButton from '@material-ui/core/IconButton'\nimport DeleteIcon from '@material-ui/icons/Delete'\nimport DoneIcon from '@material-ui/icons/Done'\n\nimport { State_t } from '../../app/model'\nimport { AppDispatch_t } from '../../index'\nimport * as selectors from '../selectors'\nimport { saga_actions } from '../sagas'\nimport { Annotation_t } from '../model'\n\nconst mapStateToProps = (state: State_t) => {\n  return {\n    annotation: selectors.get_selected_annotation(state),\n  }\n}\n\nconst mapDispatchToProps = (dispatch: AppDispatch_t) => {\n  return {\n    saga_actions: bindActionCreators({ ...saga_actions }, dispatch),\n  }\n}\n\nconst connector = connect(mapStateToProps, mapDispatchToProps)\ntype ReduxProps_t = ConnectedProps<typeof connector>\n\ntype AnnotationPanel_props_t = ReduxProps_t\n\nconst _AnnotationPanel = (props: AnnotationPanel_props_t) => {\n\n  const [annotation, setAnnotation] = React.useState(props.annotation)\n\n  React.useEffect(() => {\n    setAnnotation(props.annotation);\n  },\n    [props.annotation])\n\n  let textfields = [<div key=\"null\" style={{ position: \"absolute\" }}>\n    select an annotation\n    </div>,]\n\n  const handle_change = (key: string, value: number | string) => {\n    const new_annotation = { ...(annotation as Annotation_t), [key]: value }\n    console.log(key, value, new_annotation)\n    setAnnotation(new_annotation)\n  }\n\n  if (annotation != null) {\n\n    const TF = (field: string, name: string) => {\n      const field_key = field as keyof Annotation_t\n\n      return <TextField\n        type=\"string\"\n        label={name}\n        key={field_key}\n        value={annotation[field_key] !== null ? annotation[field_key] : \"\"}\n        onChange={(event) => handle_change(field_key, event.target.value)}\n        style={{\n          position: \"relative\",\n          width: \"100px\",\n          height: \"30px\",\n          margin: \"10px\",\n        }}\n        InputProps={{ style: { fontFamily: \"monospace\" } }}\n      />\n    }\n\n    textfields = [\n      [\"x\", \"x\"],\n      [\"y\", \"y\"],\n      [\"z\", \"z\"],\n      [\"t_idx\", \"t\"],\n      [\"id\", \"id\"],\n      [\"worldline_id\", \"track\"],\n      [\"parent_id\", \"parent_id\"],\n      [\"provenance\", \"provenance\"]]\n      .map((x) => TF(x[0], x[1]))\n\n  }\n\n  return (\n    <Card\n      elevation={3}\n      variant=\"outlined\"\n      square\n      style={{\n        position: \"relative\",\n        width: \"340px\",\n        height: \"300px\",\n        top: \"20px\"\n      }}>\n      <CardContent>\n        <h3>Annotation</h3>\n\n        <IconButton\n          aria-label=\"done\"\n          onClick={() =>\n            props.saga_actions.update_annotation(annotation as Annotation_t)}\n          style={{\n            position: \"absolute\",\n            left: \"230px\",\n            top: \"20px\"\n          }}>\n          <DoneIcon fontSize=\"small\" />\n        </IconButton>\n\n        <IconButton\n          aria-label=\"delete\"\n          onClick={props.saga_actions.delete_annotation}\n          style={{\n            position: \"absolute\",\n            left: \"280px\",\n            top: \"20px\"\n          }}>\n          <DeleteIcon fontSize=\"small\" />\n        </IconButton>\n\n        {textfields}\n      </CardContent>\n    </Card>)\n}\n\nconst AnnotationPanel = connector(_AnnotationPanel)\nexport default AnnotationPanel","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\n\nimport {\n  worldline_id_t,\n  Worldline_t,\n  Worldlines_t,\n  WorldlinesState_t as State_t,\n} from './model'\n\nexport const initialState: State_t = {\n  worldlines: {},\n  worldline_lists: null,\n  selected_lists: []\n}\n\nconst reducers = {\n\n  set_state: (state: State_t, action: PayloadAction<State_t>) =>\n    action.payload,\n\n  set_worldlines_local: (\n    state: State_t,\n    action: PayloadAction<Worldlines_t>) => {\n    state.worldlines = action.payload\n  },\n\n  set_worldline_lists_local: (\n    state: State_t,\n    action: PayloadAction<{ [key: string]: [worldline_id_t] }>) => {\n    state.worldline_lists = action.payload\n    state.selected_lists = []\n  },\n\n  set_worldline_local: (\n    state: State_t,\n    action: PayloadAction<Worldline_t>) => {\n    state.worldlines[action.payload.id] = action.payload\n  },\n\n  update_worldline_local: (\n    state: State_t,\n    action: PayloadAction<Partial<Worldline_t>>) => {\n    if (action.payload.id !== undefined)\n      state.worldlines[action.payload.id] = {\n        ...state.worldlines[action.payload.id],\n        ...action.payload\n      }\n  },\n\n  delete_worldline_local: (\n    state: State_t,\n    action: PayloadAction<worldline_id_t>) => {\n    delete state.worldlines[action.payload]\n  },\n\n}\n\nconst worldlines_slice = createSlice({\n  name: 'worldlines',\n  initialState,\n  reducers\n})\n\nexport const { actions, reducer } = worldlines_slice","import { createAction, PayloadAction } from '@reduxjs/toolkit'\nimport { call, put, takeEvery, select } from 'redux-saga/effects'\nimport fp from 'lodash/fp'\n\nimport * as api from '../api'\nimport { actions } from './actions'\nimport * as selectors from './selectors'\nimport { Worldline_t, worldline_id_t, Worldlines_t } from './model'\n\nconst prefix = \"worldlines/\"\nconst saga_action_types = {\n  create_worldline: prefix + \"create_worldline\",\n  get_worldlines: prefix + \"get_worldlines\",\n  update_worldline: prefix + \"update_worldline\",\n  delete_worldline: prefix + \"delete_worldline\",\n  set_all_visible: prefix + \"set_all_visible\"\n}\n\nexport const saga_actions = {\n  create_worldline: createAction(saga_action_types.create_worldline),\n  get_worldlines: createAction(saga_action_types.get_worldlines),\n  update_worldline: createAction<Partial<Worldline_t>>(\n    saga_action_types.update_worldline),\n  delete_worldline: createAction<worldline_id_t>(\n    saga_action_types.delete_worldline),\n  set_all_visible: createAction<boolean>(saga_action_types.set_all_visible),\n}\n\nfunction* create_worldline(action: PayloadAction) {\n  const new_worldline_raw = yield call(api.create_worldline)\n  const new_worldline = {\n    ...new_worldline_raw,\n    visible: true,\n  }\n  yield put(actions.set_worldline_local(new_worldline))\n}\n\nfunction* get_worldlines(action: PayloadAction) {\n\n  const raw_worldlines = (yield call(api.fetch_worldlines)) as Worldlines_t\n\n  let worldlines: Worldlines_t = {}\n  for (let w of Object.values(raw_worldlines)) {\n    worldlines[Number(w.id)] = {\n      id: Number(w.id),\n      name: String(w.name),\n      color: String(w.color),\n      visible: true\n    }\n  }\n\n  yield put(actions.set_worldlines_local(worldlines))\n\n}\n\nfunction* update_worldline(action: PayloadAction<Partial<Worldline_t>>) {\n  const worldline = yield call(api.update_worldline, action.payload)\n  yield put(actions.update_worldline_local(worldline))\n}\n\nfunction* delete_worldline(action: PayloadAction<worldline_id_t>) {\n  const removed_id = yield call(api.delete_worldline, action.payload)\n  if (removed_id >= 0) yield put(actions.delete_worldline_local(removed_id))\n}\n\nfunction* set_all_visible(action: PayloadAction<boolean>) {\n  const worldlines = yield select(selectors.get_worldlines)\n  const new_worldlines = fp.mapValues((x: Worldline_t) => {\n    return { ...x, visible: action.payload }})(worldlines)\n  yield put(actions.set_worldlines_local(new_worldlines))\n}\n\nfunction* watch_create_worldline() {\n  yield takeEvery(saga_action_types.create_worldline, create_worldline)\n}\nfunction* watch_get_worldlines() {\n  yield takeEvery(saga_action_types.get_worldlines, get_worldlines)\n}\nfunction* watch_update_worldline() {\n  yield takeEvery(saga_action_types.update_worldline, update_worldline)\n}\nfunction* watch_delete_worldline() {\n  yield takeEvery(saga_action_types.delete_worldline, delete_worldline)\n}\nfunction* watch_set_all_visible() {\n  yield takeEvery(saga_action_types.set_all_visible, set_all_visible)\n}\n\nexport const sagas = [\n  watch_create_worldline,\n  watch_get_worldlines,\n  watch_update_worldline,\n  watch_delete_worldline,\n  watch_set_all_visible\n]","import React, { useState } from 'react'\n\nimport { Worldline_t } from '../model'\n\ntype Worldline_props_t = {\n  // left: number,\n  // top: number,\n  worldline: Worldline_t,\n  on_check: (state: boolean) => any,\n  on_rename: (new_name: string) => any,\n  on_recolor: (new_color: string) => any,\n}\n\nconst Worldline = (props: Worldline_props_t) => {\n\n  const get_name = (x: Worldline_props_t) => {\n    const name = x.worldline.name\n    if (name && name !== \"null\") {\n      return name\n    } else {\n      return String(x.worldline.id)\n    }\n  }\n\n  const [state, setState] = useState(get_name(props))\n  React.useEffect(() => {\n    setState(get_name(props));\n  }, [props])\n\n\n  return (\n    <div\n      style={{\n        float: \"left\",\n        position: \"relative\",\n        height: \"30px\",\n        width: \"100px\"\n        // left: props.left,\n        // top: props.top,\n      }}>\n      <input type=\"checkbox\"\n        checked={props.worldline.visible}\n        onChange={(event) => props.on_check(event.target.checked)}\n        style={{\n          float: \"left\",\n          marginTop: \"8px\"\n        }} />\n      <div\n        style={{\n          float: \"left\",\n          fontFamily: \"monospace\",\n          fontSize: \"10px\",\n          color: \"#C0C0C0\",\n          marginTop: \"8px\",\n          border: \"0px\",\n          width: \"20px\"\n        }}>\n          { props.worldline.id }\n      </div>\n      <input type=\"text\"\n        onBlur={(event) => props.on_rename(event.target.value)}\n        onChange={(event) => setState(event.target.value)}\n        value={state}\n        style={{\n          float: \"left\",\n          marginTop: \"5px\",\n          fontFamily: \"monospace\",\n          color: \"white\",\n          backgroundColor: \"#666\",\n          border: \"0px\",\n          width: \"40px\"\n        }} />\n      <div style={{\n        backgroundColor: props.worldline.color,\n        float: \"left\",\n        marginTop: \"5px\",\n        border: \"0px\",\n        padding: \"0px\",\n        width: \"16px\",\n        height: \"18px\",\n      }} >\n        <input type=\"color\"\n          value={props.worldline.color}\n          onChange={(event) => props.on_recolor(event.target.value)}\n          style={{\n            float: \"left\",\n            opacity: \"0\",\n            marginTop: \"5px\",\n            border: \"0px\",\n            padding: \"0px\",\n            width: \"16px\",\n            height: \"16px\",\n          }} />\n      </div>\n    </div >)\n\n}\n\nexport default Worldline","import React from 'react'\nimport { bindActionCreators } from 'redux'\nimport { connect, ConnectedProps } from \"react-redux\"\n\nimport { Card, CardContent } from '@material-ui/core'\nimport IconButton from '@material-ui/core/IconButton'\nimport AddIcon from '@material-ui/icons/Add'\nimport Button from '@material-ui/core/Button'\n\nimport { State_t } from '../../app/model'\nimport { AppDispatch_t } from '../../index'\n\nimport { Worldline_t } from '../model'\nimport * as selectors from '../selectors'\nimport { actions } from '../actions'\nimport { saga_actions } from '../sagas'\n\nimport { saga_actions as annotation_window_saga_actions }\n  from '../../annotation_window'\n\nimport Worldline from './Worldline'\n\nconst mapStateToProps = (state: State_t) => {\n  return {\n    state: selectors.get_state(state),\n  }\n}\n\nconst mapDispatchToProps = (dispatch: AppDispatch_t) => {\n  return {\n    actions: bindActionCreators({ ...actions }, dispatch),\n    saga_actions: bindActionCreators({ ...saga_actions }, dispatch),\n    set_selected_worldline: bindActionCreators(\n      annotation_window_saga_actions.set_selected_worldline, dispatch\n    )\n  }\n}\n\nconst connector = connect(mapStateToProps, mapDispatchToProps)\ntype ReduxProps_t = ConnectedProps<typeof connector>\n\ntype WorldlinesPanel_props_t = ReduxProps_t\n\nconst _WorldlinesPanel = (props: WorldlinesPanel_props_t) => {\n\n  const worldlines = (Object.values(props.state.worldlines)).map(\n    (x: Worldline_t) =>\n      <Worldline key={x.id}\n        worldline={x}\n        on_check={(checked) => {\n          props.actions.update_worldline_local({\n            id: x.id,\n            visible: checked\n          })\n          if (checked)\n            props.set_selected_worldline(x.id)\n        }}\n        on_rename={(new_name) =>\n          props.saga_actions.update_worldline({\n            id: x.id,\n            name: new_name\n          })}\n        on_recolor={(new_color) =>\n          props.saga_actions.update_worldline({\n            id: x.id,\n            color: new_color\n          })}\n      />)\n\n  return (\n    <Card\n      elevation={3}\n      variant=\"outlined\"\n      square\n      style={{\n        position: \"relative\",\n        // left: props.left,\n        top: \"90px\",\n        width: \"340px\",\n        height: \"auto\"\n      }}>\n      <CardContent>\n        <h3>Tracks:</h3>\n\n        <Button\n          color=\"default\"\n          onClick={(event) => props.saga_actions.set_all_visible(true)}\n          style={{\n            position: \"absolute\",\n            left: \"90px\",\n            top: \"28px\"\n          }}>\n          all\n        </Button>\n        <Button\n          color=\"default\"\n          onClick={(event) => props.saga_actions.set_all_visible(false)}\n          style={{\n            position: \"absolute\",\n            left: \"160px\",\n            top: \"28px\"\n          }}>\n          none\n        </Button>\n\n        {worldlines}\n\n        <IconButton\n          aria-label=\"add\"\n          onClick={() => props.saga_actions.create_worldline()}\n          style={{\n            position: \"absolute\",\n            left: \"220px\",\n            top: \"25px\"\n          }}>\n          <AddIcon fontSize=\"small\" />\n        </IconButton>\n\n      </CardContent>\n    </Card>)\n\n}\n\nconst WorldlinesPanel = connector(_WorldlinesPanel)\nexport default WorldlinesPanel","import { call, put, putResolve, delay, select, takeEvery, takeLatest }\n  from 'redux-saga/effects'\nimport { createAction, PayloadAction } from '@reduxjs/toolkit'\n\nimport { actions, initialState } from './actions'\nimport * as api from '../api'\nimport { annotation_id_t } from '../annotations/model'\nimport { selectors } from './'\n\nimport { saga_actions as annotations_saga_actions } from '../annotations'\nimport { actions as worldlines_actions } from '../worldlines'\nimport { saga_actions as worldlines_saga_actions } from '../worldlines'\nimport { worldline_id_t } from '../worldlines/model'\nimport { selectors as annotations_selectors } from '../annotations'\nimport { selectors as worldlines_selectors } from '../worldlines'\nimport { get_annotations_state } from '../app/selectors'\n\nconst prefix = \"annotation_window/\"\n\nconst saga_action_types = {\n  fetch_state: prefix + \"fetch_state\",\n  set_selected_annotation: prefix + \"set_selected_annotation\",\n  set_selected_worldline: prefix + \"set_selected_worldline\",\n  adjust_selected_worldline: prefix + \"adjust_selected_worldline\",\n  center_on_current_annotation: prefix + \"center_on_current_annotation\",\n  adjust_t: prefix + \"adjust_t\",\n  click: prefix + \"click\",\n  doubleclick: prefix + \"doubleclick\",\n  save: prefix + \"save\",\n  load: prefix + \"load\",\n  rpc: prefix + \"rpc\",\n  rpc_from_key: prefix + \"rpc_from_key\",\n}\n\nexport type click_payload_t = {\n  x?: number,\n  y?: number,\n  z?: number,\n}\n\nexport const saga_actions = {\n\n  fetch_state: createAction(\n    saga_action_types.fetch_state),\n\n  set_selected_annotation: createAction<annotation_id_t | null>(\n    saga_action_types.set_selected_annotation),\n\n  set_selected_worldline: createAction<worldline_id_t | null>(\n    saga_action_types.set_selected_worldline),\n\n  adjust_selected_worldline: createAction<worldline_id_t | null>(\n    saga_action_types.adjust_selected_worldline),\n\n  center_on_current_annotation: createAction(\n    saga_action_types.center_on_current_annotation),\n\n  adjust_t: createAction<number>(\n    saga_action_types.adjust_t),\n\n  click: createAction<click_payload_t>(\n    saga_action_types.click),\n\n  doubleclick: createAction<click_payload_t>(\n    saga_action_types.doubleclick),\n\n  save: createAction(saga_action_types.save),\n\n  load: createAction(saga_action_types.load),\n\n  rpc: createAction<[number, string]>(saga_action_types.rpc),\n\n  rpc_from_key: createAction<string>(saga_action_types.rpc_from_key),\n\n}\n\nfunction* fetch_state() {\n\n  const meta = yield call(api.fetch_metadata)\n  const rpcs = yield call(api.fetch_rpcs)\n\n  const new_state = {\n    ...initialState,\n    shape_x: meta.shape_x,\n    shape_y: meta.shape_y,\n    shape_z: meta.shape_z,\n    shape_t: meta.shape_t,\n    scale_x: 700 / meta.shape_x,\n    scale_y: 700 / meta.shape_x,\n    scale_z: 120 / meta.shape_z,\n    rpc_list: rpcs.payload,\n  }\n\n  yield put(actions.set_state(new_state))\n}\n\nfunction* set_selected_annotation(\n  action: PayloadAction<annotation_id_t | null>) {\n\n  if (!action.payload) {\n    yield put(actions.set_selected_annotation_local(null))\n    yield put(actions.set_selected_worldline_local(null))\n  }\n\n  else {\n\n    const annotations = yield select(get_annotations_state)\n\n    const a = annotations[action.payload]\n\n    if (a === undefined) {\n      console.error(`Annotation ${action.payload} not found.`)\n      return\n    }\n\n    yield put(actions.set_selected_annotation_local(a.id))\n    yield put(actions.set_selected_worldline_local(a.worldline_id))\n\n    yield put(saga_actions.center_on_current_annotation())\n  }\n}\n\nfunction* set_selected_worldline(\n  action: PayloadAction<worldline_id_t | null>) {\n\n  const new_id = action.payload\n\n  if (new_id === null) {\n    yield put(actions.set_selected_worldline_local(null))\n    return\n  }\n\n  const worldlines = yield select(worldlines_selectors.get_worldlines)\n\n  if (!worldlines[new_id]) {\n    window.alert(`Bad track: ${new_id}. Please select an existing one or `\n      + `create a new one.`)\n    return\n  }\n\n  yield put(actions.set_selected_worldline_local(new_id))\n  yield put(actions.set_selected_annotation_local(null))\n\n  if (new_id !== null)\n    yield put(worldlines_actions.update_worldline_local({\n      id: new_id,\n      visible: true,\n    }))\n\n  yield put(saga_actions.center_on_current_annotation())\n\n}\n\nfunction* adjust_selected_worldline(\n  action: PayloadAction<worldline_id_t | null>) {\n\n  const w = yield select(selectors.get_selected_worldline)\n\n  if (w === null) {\n\n    const new_id = 0\n    yield put(saga_actions.set_selected_worldline(new_id))\n\n  } else {\n\n    const new_w = w + action.payload\n    const worldlines = yield select(worldlines_selectors.get_worldlines)\n    const n = Object.keys(worldlines).length\n    const new_id = ((new_w % n) + n) % n\n\n    yield put(saga_actions.set_selected_worldline(new_id))\n\n  }\n}\n\nfunction* center_on_current_annotation() {\n\n  const a = yield select(annotations_selectors.get_selected_annotation)\n\n  if (a !== null && a !== undefined)\n    yield put(actions.center_on_annotation(a))\n\n}\n\nfunction* adjust_t(action: PayloadAction<number>) {\n  const t_idx = yield select(selectors.get_t_idx)\n  yield put(actions.set_t_idx(t_idx + action.payload))\n}\n\nfunction* click(action: PayloadAction<click_payload_t>) {\n  if (action.payload.x)\n    yield put(actions.set_x(action.payload.x))\n  if (action.payload.y)\n    yield put(actions.set_y(action.payload.y))\n  if (action.payload.z)\n    yield put(actions.set_z(action.payload.z))\n}\n\nfunction* doubleclick(action: PayloadAction<click_payload_t>) {\n  yield put(saga_actions.click(action.payload))\n  yield put(annotations_saga_actions.insert_annotation_here())\n}\n\nfunction* save() {\n  yield call(api.save)\n}\n\nfunction* load() {\n  yield call(api.load)\n  yield put(annotations_saga_actions.get_annotations())\n  yield put(worldlines_saga_actions.get_worldlines())\n}\n\nfunction* rpc(action: PayloadAction<[number, string]>) {\n\n  const state = yield select(selectors.get_state)\n\n  const rpc = state.rpc_list[action.payload[0]]\n  const method = rpc.name\n  const arg = action.payload[1]\n\n  const result = yield call(api.rpc, method, arg, state)\n\n  console.log(result)\n\n  if (result.status === \"ok\") {\n    for (let action of result.callbacks) {\n      const try_int_payload = parseInt(action.payload)\n      if (String(try_int_payload) === action.payload)\n        action.payload = try_int_payload\n      yield putResolve(action)\n      yield delay(100)\n    }\n  }\n  else if (result.status === \"error\") {\n    window.alert(result.exception)\n    console.error(result.traceback)\n  }\n\n}\n\nfunction* rpc_from_key(action: PayloadAction<string>) {\n\n  const state = yield select(selectors.get_state)\n  const method_idx = state.rpc_keybindings[action.payload]\n  const arg = state.rpc_args[action.payload]\n\n  yield put(saga_actions.rpc([method_idx, arg]))\n}\n\n\nfunction* watch_fetch_state() {\n  yield takeLatest(saga_action_types.fetch_state, fetch_state)\n}\n\nfunction* watch_set_selected_annotation() {\n  yield takeLatest(saga_action_types.set_selected_annotation,\n    set_selected_annotation)\n}\n\nfunction* watch_set_selected_worldline() {\n  yield takeLatest(saga_action_types.set_selected_worldline,\n    set_selected_worldline)\n}\n\nfunction* watch_adjust_selected_worldline() {\n  yield takeLatest(saga_action_types.adjust_selected_worldline,\n    adjust_selected_worldline)\n}\n\nfunction* watch_center_on_current_annotation() {\n  yield takeLatest(saga_action_types.center_on_current_annotation,\n    center_on_current_annotation)\n}\n\nfunction* watch_adjust_t() {\n  yield takeLatest(saga_action_types.adjust_t, adjust_t)\n}\n\n\nfunction* watch_click() {\n  yield takeLatest(saga_action_types.click, click)\n}\n\nfunction* watch_doubleclick() {\n  yield takeLatest(saga_action_types.doubleclick, doubleclick)\n}\n\nfunction* watch_save() {\n  yield takeLatest(saga_action_types.save, save)\n}\n\nfunction* watch_load() {\n  yield takeLatest(saga_action_types.load, load)\n}\n\nfunction* watch_rpc() {\n  yield takeEvery(saga_action_types.rpc, rpc)\n}\n\nfunction* watch_rpc_from_key() {\n  yield takeEvery(saga_action_types.rpc_from_key, rpc_from_key)\n}\n\n// These are the exported sagas.\nexport const sagas = [\n  watch_fetch_state,\n  watch_set_selected_annotation,\n  watch_set_selected_worldline,\n  watch_adjust_selected_worldline,\n  watch_center_on_current_annotation,\n  watch_adjust_t,\n  watch_click,\n  watch_doubleclick,\n  watch_save,\n  watch_load,\n  watch_rpc,\n  watch_rpc_from_key,\n]","\nimport React from 'react'\n\ntype SimpleFormProps = {\n  name: string,\n  action: Function\n}\n\ntype ActionFormProps = SimpleFormProps & { input_parser: Function }\n\ntype ActionFormState = { value: string }\n\nexport class ActionForm extends\n  React.Component<ActionFormProps, ActionFormState>\n{\n\n  constructor(props: ActionFormProps) {\n    super(props);\n    this.state = { value: \"0\" }\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(event: any) {\n    this.setState({ value: event.target.value });\n  }\n\n  handleSubmit(event: any) {\n    this.props.action(this.props.input_parser(this.state.value))\n    event.preventDefault()\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <input type=\"submit\" value={this.props.name} />\n        <input type=\"text\"\n          defaultValue={this.state.value}\n          onChange={this.handleChange} />\n      </form>\n    );\n  }\n}\n\nexport const FloatForm = (props: SimpleFormProps) =>\n  <ActionForm {...props} input_parser={parseFloat} />","/* This file should provide an interface to visualize the state and dispatch\nactions. UI and styling should be minimal. */\n\nimport React from 'react'\nimport { connect } from \"react-redux\"\n//import { TextField, Button}  from '@material-ui/core';\n\nimport * as selectors from '../selectors'\nimport { actions } from '../actions'\nimport { saga_actions } from '../sagas'\nimport { State_t } from '../../app/model'\nimport { FloatForm } from '../../test_components/ActionForm'\n\nconst _Test = ({ state, x_idx, ...A }: any) => {\n\n  const derived_state = { x_idx }\n\n  const full_state = { bare_state: state, derived_state }\n\n  const state_json = JSON.stringify(full_state, null, 4);\n\n  return (\n    <div>\n      <pre><code>annotation_window: {state_json}</code></pre>\n\n      <br />\n\n      Simple Actions:\n      <FloatForm name=\"set_shape_x\" action={A.set_shape_x} />\n      <FloatForm name=\"set_x\" action={A.set_x} />\n      <FloatForm name=\"adjust_x\" action={A.adjust_x} />\n      <FloatForm name=\"set_scale_x\" action={A.set_scale_x} />\n\n      <br />\n\n      Async Actions:\n      <br />\n      <button onClick={() => A.fetch_state()}>fetch_state</button>\n\n    </div>\n  )\n}\n\nconst mapStateToProps = (state: State_t) => {\n  return {\n    state: selectors.get_state(state),\n    x_idx: selectors.get_x_idx(state)\n  }\n}\n\nconst AnnotationWindowTest =\n  connect(mapStateToProps, { ...actions, ...saga_actions })(_Test)\n\nexport default AnnotationWindowTest","import React, { Component } from 'react'\nimport { connect, ConnectedProps } from 'react-redux'\n\nimport { State_t } from '../../app/model'\nimport { AppDispatch_t } from '../..'\nimport { fetch_data_cache } from '../../api'\n\nimport { selectors } from '../'\nimport { apply_LUT } from '../helpers'\nimport { saga_actions, click_payload_t } from '../sagas'\nimport { AnnotationsSVG } from '../../annotations'\n\nimport { selectors as annotations_selectors } from '../../annotations'\n\nconst mapStateToProps_X = (state: State_t) => {\n  return {\n    height: selectors.get_shape_y(state),\n    width: selectors.get_shape_z(state),\n    height_scale: selectors.get_scale_y(state),\n    width_scale: selectors.get_scale_z(state),\n    data_url: selectors.get_x_url(state),\n    x: selectors.get_z(state),\n    y: selectors.get_y(state),\n    x_dim: \"z\",\n    y_dim: \"y\",\n    annotations: annotations_selectors.get_x_annotations(state),\n    fill_circles: selectors.get_fill_circles(state),\n    LUT: selectors.get_LUT(state),\n    gamma: selectors.get_gamma(state)\n  }\n}\n\nconst mapStateToProps_Y = (state: State_t) => {\n  return {\n    height: selectors.get_shape_z(state),\n    width: selectors.get_shape_x(state),\n    height_scale: selectors.get_scale_z(state),\n    width_scale: selectors.get_scale_x(state),\n    data_url: selectors.get_y_url(state),\n    x: selectors.get_x(state),\n    y: selectors.get_z(state),\n    x_dim: \"x\",\n    y_dim: \"z\",\n    annotations: annotations_selectors.get_y_annotations(state),\n    fill_circles: selectors.get_fill_circles(state),\n    LUT: selectors.get_LUT(state),\n    gamma: selectors.get_gamma(state)\n  }\n}\n\nconst mapStateToProps_Z = (state: State_t) => {\n  return {\n    height: selectors.get_shape_y(state),\n    width: selectors.get_shape_x(state),\n    height_scale: selectors.get_scale_y(state),\n    width_scale: selectors.get_scale_x(state),\n    data_url: selectors.get_z_url(state),\n    x: selectors.get_x(state),\n    y: selectors.get_y(state),\n    x_dim: \"x\",\n    y_dim: \"y\",\n    annotations: annotations_selectors.get_z_annotations(state),\n    fill_circles: selectors.get_fill_circles(state),\n    LUT: selectors.get_LUT(state),\n    gamma: selectors.get_gamma(state)\n  }\n}\n\nconst mapDispatchToProps = (dispatch: AppDispatch_t) => {\n  return {\n    select: (x: number) => dispatch(saga_actions.set_selected_annotation(x)),\n    deselect: () => dispatch(saga_actions.set_selected_annotation(null)),\n    click: (x: click_payload_t) => dispatch(saga_actions.click(x)),\n    // doubleclick: (x: click_payload_t) =>\n    //   dispatch(saga_actions.doubleclick(x))\n  }\n}\n\nconst connector_X = connect(mapStateToProps_X, mapDispatchToProps)\nconst connector_Y = connect(mapStateToProps_Y, mapDispatchToProps)\nconst connector_Z = connect(mapStateToProps_Z, mapDispatchToProps)\n\ntype ReduxProps_t = ConnectedProps<typeof connector_X>\ntype AnnotationView_props_t = ReduxProps_t & {\n  left: number,\n  top: number,\n}\n\ntype AnnotationView_state_t = {\n  data: Uint8ClampedArray | null\n}\n\nclass AnnotationView\n  extends Component<AnnotationView_props_t, AnnotationView_state_t> {\n\n  state: AnnotationView_state_t\n  abort_controller: AbortController\n\n  constructor(props: AnnotationView_props_t) {\n    super(props)\n    this.abort_controller = new AbortController()\n    this.state = {\n      data: null,\n    }\n  }\n\n  componentDidMount() {\n    this.fetch_and_draw()\n  }\n\n  componentDidUpdate(prev_props: AnnotationView_props_t) {\n    if (this.props.data_url !== prev_props.data_url)\n      this.fetch_and_draw()\n    else if (this.props.LUT !== prev_props.LUT)\n      this.draw_to_canvas()\n    else if (this.props.gamma !== prev_props.gamma)\n      this.draw_to_canvas()\n  }\n\n  fetch_and_draw = () => {\n\n    this.abort_controller.abort()\n    this.abort_controller = new AbortController()\n\n    fetch_data_cache(this.props.data_url, this.abort_controller.signal)\n      .then(data => this.setState({ data }))\n      .then(this.draw_to_canvas)\n  }\n\n  draw_to_canvas = () => {\n\n    if ((this.state.data != null) &&\n      (this.props.width > 0) &&\n      (this.props.height > 0)) {\n\n      const LUTdata = apply_LUT(this.state.data, this.props.LUT, this.props.gamma)\n\n      const cvs = this.refs.canvas as HTMLCanvasElement\n      const ctx = cvs.getContext(\"2d\")\n\n      const iData = new ImageData(\n        LUTdata,\n        this.props.width,\n        this.props.height);\n\n      ctx?.putImageData(iData, 0, 0)\n\n    }\n  }\n\n  make_click_handler = (click_fn: any) => (event: React.MouseEvent) => {\n    const target = event.target as HTMLElement;\n    const dim = target.getBoundingClientRect();\n    const x_pixels = event.clientX - dim.left;\n    const y_pixels = event.clientY - dim.top;\n\n    const svg_width = this.props.width * this.props.width_scale\n    const svg_height = this.props.height * this.props.height_scale\n\n    const x_local = x_pixels / svg_width\n    const y_local = y_pixels / svg_height\n\n    click_fn({\n      [this.props.x_dim]: x_local,\n      [this.props.y_dim]: y_local\n    })\n\n  }\n\n  handle_click = this.make_click_handler(this.props.click)\n  // handle_doubleclick = this.make_click_handler(this.props.doubleclick)\n\n  render() {\n\n    const svg_width = this.props.width * this.props.width_scale\n    const svg_height = this.props.height * this.props.height_scale\n\n    const hline =\n      <line\n        x1={0}\n        y1={this.props.y * svg_height}\n        x2={svg_width}\n        y2={this.props.y * svg_height}\n        strokeWidth=\"0.4\" stroke=\"grey\" />\n    const vline =\n      <line\n        x1={this.props.x * svg_width}\n        y1={0}\n        x2={this.props.x * svg_width}\n        y2={svg_height}\n        strokeWidth=\"0.4\" stroke=\"grey\" />\n\n    return (\n      <div style={{\n        position: \"relative\",\n        left: this.props.left,\n        top: this.props.top,\n        right: \"0px\",\n      }}>\n\n        <canvas ref=\"canvas\"\n          width={this.props.width}\n          height={this.props.height}\n          style={{\n            position: \"absolute\",\n            left: \"0px\",\n            top: \"0px\",\n            zIndex: 1,\n            width: this.props.width * this.props.width_scale,\n            height: this.props.height * this.props.height_scale\n          }}>\n        </canvas>\n\n        <svg ref=\"svg\"\n          width={this.props.width * this.props.width_scale}\n          height={this.props.height * this.props.height_scale}\n          onClick={this.handle_click}\n          // onContextMenu={this.handle_doubleclick}\n          // onDoubleClick={this.handle_doubleclick}\n          style={{\n            position: \"absolute\",\n            left: \"0px\",\n            top: \"0px\",\n            zIndex: 2,\n          }}>\n          <AnnotationsSVG\n            annotations={this.props.annotations}\n            size_x={this.props.width * this.props.width_scale}\n            size_y={this.props.height * this.props.height_scale}\n            select={this.props.select}\n            deselect={this.props.deselect}\n            fill_circles={this.props.fill_circles} />\n          {hline}\n          {vline}\n        </svg>\n      </div>)\n  }\n}\n\nexport const AnnotationViewX = connector_X(AnnotationView)\nexport const AnnotationViewY = connector_Y(AnnotationView)\nexport const AnnotationViewZ = connector_Z(AnnotationView)\n","import React from 'react'\nimport { bindActionCreators } from 'redux'\nimport { createNextState } from '@reduxjs/toolkit'\nimport { connect, ConnectedProps } from \"react-redux\"\nimport { get } from 'lodash'\n\nimport TextField from '@material-ui/core/TextField'\nimport Card from '@material-ui/core/Card'\nimport CardContent from '@material-ui/core/CardContent'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport { withStyles } from '@material-ui/core/styles'\nimport IconButton from '@material-ui/core/IconButton'\nimport SaveIcon from '@material-ui/icons/Save'\nimport GetApp from '@material-ui/icons/GetApp'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport FormControl from '@material-ui/core/FormControl'\nimport Select from '@material-ui/core/Select'\n\nimport { State_t } from '../../app/model'\nimport { AppDispatch_t } from '../../index'\nimport { AnnotationWindowState_t } from '../model'\nimport { actions, saga_actions, selectors } from '../'\n\nconst DocstringTooltip = withStyles({\n  tooltip: {\n    maxWidth: 600,\n    margin: 10,\n    padding: 10,\n    position: \"absolute\",\n    top: -50\n  }\n})(Tooltip)\n\nconst mapStateToProps = (state: State_t) => {\n  return {\n    window_state: selectors.get_state(state),\n  }\n}\n\nconst mapDispatchToProps = (dispatch: AppDispatch_t) => {\n  return {\n    actions: bindActionCreators({ ...actions }, dispatch),\n    saga_actions: bindActionCreators({ ...saga_actions }, dispatch),\n  }\n}\n\nconst connector = connect(mapStateToProps, mapDispatchToProps)\ntype ReduxProps_t = ConnectedProps<typeof connector>\n\ntype WindowPanel_props_t = ReduxProps_t & {\n  left: number,\n  top: number,\n}\n\nconst _WindowPanel = (props: WindowPanel_props_t) => {\n\n  const [window_state, set_window_state] = React.useState(props.window_state)\n\n  React.useEffect(() => {\n    set_window_state({\n      ...props.window_state,\n      x: parseFloat(props.window_state.x.toFixed(3)),\n      y: parseFloat(props.window_state.y.toFixed(3)),\n      z: parseFloat(props.window_state.z.toFixed(3)),\n    });\n  },\n    [props.window_state])\n\n  const handle_change = (key: string, value: string) => {\n    const new_state = { ...(window_state), [key]: value }\n    set_window_state(new_state)\n  }\n\n  const handle_new_rpc_keybinding = (key: string, rpc_idx: number) => {\n\n    props.actions.set_rpc_keybinding([key, rpc_idx])\n\n    props.actions.set_rpc_arg([key,\n      window_state.rpc_list[rpc_idx].default_args])\n  }\n\n  const handle_rpc_arg_change = (key: string, value: string) => {\n\n    const rpc_idx = window_state.rpc_keybindings[key]\n\n    const nextState = createNextState(window_state, draft => {\n      draft.rpc_args[key] = value\n      draft.rpc_list[rpc_idx].default_args = value\n    })\n\n    set_window_state(nextState)\n  }\n\n\n  const update = () => {\n    props.actions.set_x(window_state.x)\n    props.actions.set_y(window_state.y)\n    props.actions.set_z(window_state.z)\n    props.actions.set_t_idx(window_state.t_idx)\n\n    const a = window_state.selected_annotation\n    if ((a === null) || String(a) === \"\") {\n      props.saga_actions.set_selected_annotation(null)\n    } else {\n      props.saga_actions.set_selected_annotation(Number(a))\n    }\n\n    const w = window_state.selected_worldline\n    if ((w === null) || String(w) === \"\") {\n      props.saga_actions.set_selected_worldline(null)\n    } else {\n      props.saga_actions.set_selected_worldline(Number(w))\n    }\n\n    props.actions.set_active_provenance(window_state.active_provenance)\n\n    props.actions.set_rpc_args(window_state.rpc_args)\n    props.actions.set_rpc_list(window_state.rpc_list)\n\n  }\n\n  const TF = (field: string, name: string) => {\n    const field_key = field as keyof AnnotationWindowState_t\n\n    return <TextField\n      type=\"string\"\n      label={name}\n      key={field_key}\n      value={window_state[field_key] !== null ? window_state[field_key] : \"\"}\n      onChange={(event) => handle_change(field_key, event.target.value)}\n      onBlur={update}\n      style={{\n        position: \"relative\",\n        width: \"80px\",\n        margin: \"10px\",\n      }}\n      InputLabelProps= {{style: { fontSize: 14 }}}\n      InputProps={{ style: { fontFamily: \"monospace\" } }}\n    />\n  }\n\n  const textfields = [\n    [\"x\", \"x\"],\n    [\"y\", \"y\"],\n    [\"z\", \"z\"],\n    [\"t_idx\", \"t\"],\n    [\"selected_annotation\", \"anno.\"],\n    [\"selected_worldline\", \"track\"],\n    [\"active_provenance\", \"prov\"]]\n    .map((x) => TF(x[0], x[1]))\n\n  const RPCKeyConfig = (keyname: string) => {\n\n    const rpc_idx = get(window_state.rpc_keybindings, keyname, 0)\n    const rpc = get(window_state.rpc_list, rpc_idx)\n    let docstring\n    if (rpc) {\n      docstring = get(rpc, \"docstring\", \"\")\n    } else {\n      docstring = \"\"\n    }\n\n    return (\n      <React.Fragment key={keyname}>\n        <DocstringTooltip\n          interactive\n          title={\n            <pre style={{ fontSize: 14 }} >\n              {docstring}\n            </pre>}\n          placement=\"right\"\n        >\n          <FormControl style={{\n            width: 810, margin: 10, top: 10, marginBottom: 50\n          }}>\n            <InputLabel id={`action-${keyname}-select-label`}>Key {keyname}\n            </InputLabel>\n            <Select\n              labelId={`action-${keyname}-select-label`}\n              id={`action-${keyname}-select`}\n              value={rpc_idx}\n              onChange={(event) => handle_new_rpc_keybinding(\n                keyname, Number(event.target.value))}\n              style={{\n                width: 250,\n                position: \"absolute\",\n                fontFamily: \"monospace\"\n              }}\n            >\n              {props.window_state.rpc_list.map((x, idx) =>\n                <MenuItem\n                  style={{ fontFamily: \"monospace\" }}\n                  value={idx}\n                  key={idx}>\n                  {x.name}\n                </MenuItem>\n              )}\n            </Select>\n            <TextField\n              type=\"string\"\n              label={\"arg\"}\n              value={window_state.rpc_args[keyname]}\n              onChange={(event) => handle_rpc_arg_change(\n                keyname, event.target.value)}\n              onBlur={update}\n              style={{\n                position: \"absolute\",\n                left: 300,\n                width: 400,\n              }}\n              InputProps={{ style: { fontFamily: \"monospace\" } }}\n            />\n          </FormControl>\n        </DocstringTooltip>\n      </React.Fragment>\n    )\n  }\n\n  const rpc_keys = \"1234567890\".split(\"\").map(RPCKeyConfig)\n\n  return (\n    <Card\n      elevation={3}\n      variant=\"outlined\"\n      square\n      style={{\n        position: \"absolute\",\n        left: props.left,\n        top: props.top,\n        width: \"840px\",\n        height: \"1000px\"\n      }}>\n      <CardContent>\n        <h3>Annotation Window</h3>\n\n        <Tooltip title=\"Load from disk\">\n          <IconButton\n            aria-label=\"load\"\n            onClick={() => props.saga_actions.load()}\n            style={{\n              position: \"absolute\",\n              left: \"650px\",\n              top: \"5px\"\n            }}>\n            <GetApp fontSize=\"small\" />\n          </IconButton>\n        </Tooltip>\n\n        <Tooltip title=\"Save to disk\">\n          <IconButton\n            aria-label=\"save\"\n            onClick={() => props.saga_actions.save()}\n            style={{\n              position: \"absolute\",\n              left: \"700px\",\n              top: \"5px\"\n            }}>\n            <SaveIcon fontSize=\"small\" />\n          </IconButton>\n        </Tooltip>\n\n        {textfields}\n\n        <Tooltip title=\"Keyboard shortcut: o\">\n          <div style={{width:150, float: \"left\"}}>\n            <input type=\"checkbox\"\n              checked={props.window_state.fill_circles}\n              id=\"fill-circles-cb\"\n              onChange={(event) =>\n                props.actions.set_fill_circles(event.target.checked)}\n              style={{\n                // float: \"left\",\n                marginTop: \"30px\"\n              }} />\n            <label>Fill circles</label>\n          </div>\n        </Tooltip>\n\n        <Tooltip title=\"Keyboard shortcut: a\">\n          <div style={{width:150, float: \"left\"}}>\n            <input type=\"checkbox\"\n              checked={props.window_state.show_all_annotations}\n              id=\"all-annotations-cb\"\n              onChange={(event) =>\n                props.actions.set_show_all_annotations(event.target.checked)}\n              style={{\n                // float: \"left\",\n                marginTop: \"30px\"\n              }} />\n            <label>Show all</label>\n          </div>\n        </Tooltip>\n\n\n        {rpc_keys}\n\n      </CardContent>\n    </Card>)\n}\n\nconst WindowPanel = connector(_WindowPanel)\nexport default WindowPanel","/**\n * Common utilities\n * @module glMatrix\n */\n\n// Configuration Constants\nexport const EPSILON = 0.000001;\nexport let ARRAY_TYPE = (typeof Float32Array !== 'undefined') ? Float32Array : Array;\nexport const RANDOM = Math.random;\n\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\n\nconst degree = Math.PI / 180;\n\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\nexport function toRadian(a) {\n  return a * degree;\n}\n\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON*Math.max(1.0, Math.abs(a), Math.abs(b));\n}\n\nif (!Math.hypot) Math.hypot = function() {\n  var y = 0, i = arguments.length;\n  while (i--) y += arguments[i] * arguments[i];\n  return Math.sqrt(y);\n};\n","/* eslint-disable */\nimport * as glMatrix from \"./common.js\";\n\n/**\n * 3x3 Matrix\n * @module mat3\n */\n\n/**\n * Creates a new identity mat3\n *\n * @returns {mat3} a new 3x3 matrix\n */\nexport function create() {\n  let out = new glMatrix.ARRAY_TYPE(9);\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {ReadonlyMat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\nexport function clone(a) {\n  let out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n\n/**\n * Create a new mat3 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} A new mat3\n */\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  let out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n\n/**\n * Set the components of a mat3 to the given values\n *\n * @param {mat3} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} out\n */\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    let a01 = a[1],\n      a02 = a[2],\n      a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\nexport function invert(out, a) {\n  let a00 = a[0],\n    a01 = a[1],\n    a02 = a[2];\n  let a10 = a[3],\n    a11 = a[4],\n    a12 = a[5];\n  let a20 = a[6],\n    a21 = a[7],\n    a22 = a[8];\n\n  let b01 = a22 * a11 - a12 * a21;\n  let b11 = -a22 * a10 + a12 * a20;\n  let b21 = a21 * a10 - a11 * a20;\n\n  // Calculate the determinant\n  let det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n  det = 1.0 / det;\n\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n\n/**\n * Calculates the adjugate of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\nexport function adjoint(out, a) {\n  let a00 = a[0],\n    a01 = a[1],\n    a02 = a[2];\n  let a10 = a[3],\n    a11 = a[4],\n    a12 = a[5];\n  let a20 = a[6],\n    a21 = a[7],\n    a22 = a[8];\n\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n\n/**\n * Calculates the determinant of a mat3\n *\n * @param {ReadonlyMat3} a the source matrix\n * @returns {Number} determinant of a\n */\nexport function determinant(a) {\n  let a00 = a[0],\n    a01 = a[1],\n    a02 = a[2];\n  let a10 = a[3],\n    a11 = a[4],\n    a12 = a[5];\n  let a20 = a[6],\n    a21 = a[7],\n    a22 = a[8];\n\n  return (\n    a00 * (a22 * a11 - a12 * a21) +\n    a01 * (-a22 * a10 + a12 * a20) +\n    a02 * (a21 * a10 - a11 * a20)\n  );\n}\n\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\nexport function multiply(out, a, b) {\n  let a00 = a[0],\n    a01 = a[1],\n    a02 = a[2];\n  let a10 = a[3],\n    a11 = a[4],\n    a12 = a[5];\n  let a20 = a[6],\n    a21 = a[7],\n    a22 = a[8];\n\n  let b00 = b[0],\n    b01 = b[1],\n    b02 = b[2];\n  let b10 = b[3],\n    b11 = b[4],\n    b12 = b[5];\n  let b20 = b[6],\n    b21 = b[7],\n    b22 = b[8];\n\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to translate\n * @param {ReadonlyVec2} v vector to translate by\n * @returns {mat3} out\n */\nexport function translate(out, a, v) {\n  let a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a10 = a[3],\n    a11 = a[4],\n    a12 = a[5],\n    a20 = a[6],\n    a21 = a[7],\n    a22 = a[8],\n    x = v[0],\n    y = v[1];\n\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\nexport function rotate(out, a, rad) {\n  let a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a10 = a[3],\n    a11 = a[4],\n    a12 = a[5],\n    a20 = a[6],\n    a21 = a[7],\n    a22 = a[8],\n    s = Math.sin(rad),\n    c = Math.cos(rad);\n\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\nexport function scale(out, a, v) {\n  let x = v[0],\n    y = v[1];\n\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.translate(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Translation vector\n * @returns {mat3} out\n */\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.rotate(dest, dest, rad);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\nexport function fromRotation(out, rad) {\n  let s = Math.sin(rad),\n    c = Math.cos(rad);\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.scale(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Scaling vector\n * @returns {mat3} out\n */\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to copy\n * @returns {mat3} out\n **/\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Calculates a 3x3 matrix from the given quaternion\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat3} out\n */\nexport function fromQuat(out, q) {\n  let x = q[0],\n    y = q[1],\n    z = q[2],\n    w = q[3];\n  let x2 = x + x;\n  let y2 = y + y;\n  let z2 = z + z;\n\n  let xx = x * x2;\n  let yx = y * x2;\n  let yy = y * y2;\n  let zx = z * x2;\n  let zy = z * y2;\n  let zz = z * z2;\n  let wx = w * x2;\n  let wy = w * y2;\n  let wz = w * z2;\n\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n\n  return out;\n}\n\n/**\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\n *\n * @returns {mat3} out\n */\nexport function normalFromMat4(out, a) {\n  let a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a03 = a[3];\n  let a10 = a[4],\n    a11 = a[5],\n    a12 = a[6],\n    a13 = a[7];\n  let a20 = a[8],\n    a21 = a[9],\n    a22 = a[10],\n    a23 = a[11];\n  let a30 = a[12],\n    a31 = a[13],\n    a32 = a[14],\n    a33 = a[15];\n\n  let b00 = a00 * a11 - a01 * a10;\n  let b01 = a00 * a12 - a02 * a10;\n  let b02 = a00 * a13 - a03 * a10;\n  let b03 = a01 * a12 - a02 * a11;\n  let b04 = a01 * a13 - a03 * a11;\n  let b05 = a02 * a13 - a03 * a12;\n  let b06 = a20 * a31 - a21 * a30;\n  let b07 = a20 * a32 - a22 * a30;\n  let b08 = a20 * a33 - a23 * a30;\n  let b09 = a21 * a32 - a22 * a31;\n  let b10 = a21 * a33 - a23 * a31;\n  let b11 = a22 * a33 - a23 * a32;\n\n  // Calculate the determinant\n  let det =\n    b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n  det = 1.0 / det;\n\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n\n  return out;\n}\n\n/**\n * Generates a 2D projection matrix with the given bounds\n *\n * @param {mat3} out mat3 frustum matrix will be written into\n * @param {number} width Width of your gl context\n * @param {number} height Height of gl context\n * @returns {mat3} out\n */\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Returns a string representation of a mat3\n *\n * @param {ReadonlyMat3} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\nexport function str(a) {\n  return (\n    \"mat3(\" +\n    a[0] +\n    \", \" +\n    a[1] +\n    \", \" +\n    a[2] +\n    \", \" +\n    a[3] +\n    \", \" +\n    a[4] +\n    \", \" +\n    a[5] +\n    \", \" +\n    a[6] +\n    \", \" +\n    a[7] +\n    \", \" +\n    a[8] +\n    \")\"\n  );\n}\n\n/**\n * Returns Frobenius norm of a mat3\n *\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n}\n\n/**\n * Adds two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat3} out\n */\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n\n/**\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat3} out the receiving vector\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat3} out\n */\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return (\n    a[0] === b[0] &&\n    a[1] === b[1] &&\n    a[2] === b[2] &&\n    a[3] === b[3] &&\n    a[4] === b[4] &&\n    a[5] === b[5] &&\n    a[6] === b[6] &&\n    a[7] === b[7] &&\n    a[8] === b[8]\n  );\n}\n\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function equals(a, b) {\n  let a0 = a[0],\n    a1 = a[1],\n    a2 = a[2],\n    a3 = a[3],\n    a4 = a[4],\n    a5 = a[5],\n    a6 = a[6],\n    a7 = a[7],\n    a8 = a[8];\n  let b0 = b[0],\n    b1 = b[1],\n    b2 = b[2],\n    b3 = b[3],\n    b4 = b[4],\n    b5 = b[5],\n    b6 = b[6],\n    b7 = b[7],\n    b8 = b[8];\n  return (\n    Math.abs(a0 - b0) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n    Math.abs(a1 - b1) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n    Math.abs(a2 - b2) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) &&\n    Math.abs(a3 - b3) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) &&\n    Math.abs(a4 - b4) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) &&\n    Math.abs(a5 - b5) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) &&\n    Math.abs(a6 - b6) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) &&\n    Math.abs(a7 - b7) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) &&\n    Math.abs(a8 - b8) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8))\n  );\n}\n\n/**\n * Alias for {@link mat3.multiply}\n * @function\n */\nexport const mul = multiply;\n\n/**\n * Alias for {@link mat3.subtract}\n * @function\n */\nexport const sub = subtract;\n","/* eslint-disable */\nimport * as glMatrix from \"./common.js\";\n\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\nexport function create() {\n  let out = new glMatrix.ARRAY_TYPE(16);\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\nexport function clone(a) {\n  let out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\nexport function fromValues(\n  m00,\n  m01,\n  m02,\n  m03,\n  m10,\n  m11,\n  m12,\n  m13,\n  m20,\n  m21,\n  m22,\n  m23,\n  m30,\n  m31,\n  m32,\n  m33\n) {\n  let out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\nexport function set(\n  out,\n  m00,\n  m01,\n  m02,\n  m03,\n  m10,\n  m11,\n  m12,\n  m13,\n  m20,\n  m21,\n  m22,\n  m23,\n  m30,\n  m31,\n  m32,\n  m33\n) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    let a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n    let a12 = a[6],\n      a13 = a[7];\n    let a23 = a[11];\n\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\nexport function invert(out, a) {\n  let a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a03 = a[3];\n  let a10 = a[4],\n    a11 = a[5],\n    a12 = a[6],\n    a13 = a[7];\n  let a20 = a[8],\n    a21 = a[9],\n    a22 = a[10],\n    a23 = a[11];\n  let a30 = a[12],\n    a31 = a[13],\n    a32 = a[14],\n    a33 = a[15];\n\n  let b00 = a00 * a11 - a01 * a10;\n  let b01 = a00 * a12 - a02 * a10;\n  let b02 = a00 * a13 - a03 * a10;\n  let b03 = a01 * a12 - a02 * a11;\n  let b04 = a01 * a13 - a03 * a11;\n  let b05 = a02 * a13 - a03 * a12;\n  let b06 = a20 * a31 - a21 * a30;\n  let b07 = a20 * a32 - a22 * a30;\n  let b08 = a20 * a33 - a23 * a30;\n  let b09 = a21 * a32 - a22 * a31;\n  let b10 = a21 * a33 - a23 * a31;\n  let b11 = a22 * a33 - a23 * a32;\n\n  // Calculate the determinant\n  let det =\n    b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n  det = 1.0 / det;\n\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n\n  return out;\n}\n\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\nexport function adjoint(out, a) {\n  let a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a03 = a[3];\n  let a10 = a[4],\n    a11 = a[5],\n    a12 = a[6],\n    a13 = a[7];\n  let a20 = a[8],\n    a21 = a[9],\n    a22 = a[10],\n    a23 = a[11];\n  let a30 = a[12],\n    a31 = a[13],\n    a32 = a[14],\n    a33 = a[15];\n\n  let b00 = a00 * a11 - a01 * a10;\n  let b01 = a00 * a12 - a02 * a10;\n  let b02 = a00 * a13 - a03 * a10;\n  let b03 = a01 * a12 - a02 * a11;\n  let b04 = a01 * a13 - a03 * a11;\n  let b05 = a02 * a13 - a03 * a12;\n  let b06 = a20 * a31 - a21 * a30;\n  let b07 = a20 * a32 - a22 * a30;\n  let b08 = a20 * a33 - a23 * a30;\n  let b09 = a21 * a32 - a22 * a31;\n  let b10 = a21 * a33 - a23 * a31;\n  let b11 = a22 * a33 - a23 * a32;\n\n  out[0] = a11 * b11 - a12 * b10 + a13 * b09;\n  out[1] = a02 * b10 - a01 * b11 - a03 * b09;\n  out[2] = a31 * b05 - a32 * b04 + a33 * b03;\n  out[3] = a22 * b04 - a21 * b05 - a23 * b03;\n  out[4] = a12 * b08 - a10 * b11 - a13 * b07;\n  out[5] = a00 * b11 - a02 * b08 + a03 * b07;\n  out[6] = a32 * b02 - a30 * b05 - a33 * b01;\n  out[7] = a20 * b05 - a22 * b02 + a23 * b01;\n  out[8] = a10 * b10 - a11 * b08 + a13 * b06;\n  out[9] = a01 * b08 - a00 * b10 - a03 * b06;\n  out[10] = a30 * b04 - a31 * b02 + a33 * b00;\n  out[11] = a21 * b02 - a20 * b04 - a23 * b00;\n  out[12] = a11 * b07 - a10 * b09 - a12 * b06;\n  out[13] = a00 * b09 - a01 * b07 + a02 * b06;\n  out[14] = a31 * b01 - a30 * b03 - a32 * b00;\n  out[15] = a20 * b03 - a21 * b01 + a22 * b00;\n  return out;\n}\n\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\nexport function determinant(a) {\n  let a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a03 = a[3];\n  let a10 = a[4],\n    a11 = a[5],\n    a12 = a[6],\n    a13 = a[7];\n  let a20 = a[8],\n    a21 = a[9],\n    a22 = a[10],\n    a23 = a[11];\n  let a30 = a[12],\n    a31 = a[13],\n    a32 = a[14],\n    a33 = a[15];\n\n  let b0 = a00 * a11 - a01 * a10;\n  let b1 = a00 * a12 - a02 * a10;\n  let b2 = a01 * a12 - a02 * a11;\n  let b3 = a20 * a31 - a21 * a30;\n  let b4 = a20 * a32 - a22 * a30;\n  let b5 = a21 * a32 - a22 * a31;\n  let b6 = a00 * b5 - a01 * b4 + a02 * b3;\n  let b7 = a10 * b5 - a11 * b4 + a12 * b3;\n  let b8 = a20 * b2 - a21 * b1 + a22 * b0;\n  let b9 = a30 * b2 - a31 * b1 + a32 * b0;\n\n  // Calculate the determinant\n  return a13 * b6 - a03 * b7 + a33 * b8 - a23 * b9;\n}\n\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\nexport function multiply(out, a, b) {\n  let a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a03 = a[3];\n  let a10 = a[4],\n    a11 = a[5],\n    a12 = a[6],\n    a13 = a[7];\n  let a20 = a[8],\n    a21 = a[9],\n    a22 = a[10],\n    a23 = a[11];\n  let a30 = a[12],\n    a31 = a[13],\n    a32 = a[14],\n    a33 = a[15];\n\n  // Cache only the current line of the second matrix\n  let b0 = b[0],\n    b1 = b[1],\n    b2 = b[2],\n    b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\nexport function translate(out, a, v) {\n  let x = v[0],\n    y = v[1],\n    z = v[2];\n  let a00, a01, a02, a03;\n  let a10, a11, a12, a13;\n  let a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\nexport function scale(out, a, v) {\n  let x = v[0],\n    y = v[1],\n    z = v[2];\n\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nexport function rotate(out, a, rad, axis) {\n  let x = axis[0],\n    y = axis[1],\n    z = axis[2];\n  let len = Math.hypot(x, y, z);\n  let s, c, t;\n  let a00, a01, a02, a03;\n  let a10, a11, a12, a13;\n  let a20, a21, a22, a23;\n  let b00, b01, b02;\n  let b10, b11, b12;\n  let b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11];\n\n  // Construct the elements of the rotation matrix\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c;\n\n  // Perform rotation-specific matrix multiplication\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n  return out;\n}\n\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function rotateX(out, a, rad) {\n  let s = Math.sin(rad);\n  let c = Math.cos(rad);\n  let a10 = a[4];\n  let a11 = a[5];\n  let a12 = a[6];\n  let a13 = a[7];\n  let a20 = a[8];\n  let a21 = a[9];\n  let a22 = a[10];\n  let a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  // Perform axis-specific matrix multiplication\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function rotateY(out, a, rad) {\n  let s = Math.sin(rad);\n  let c = Math.cos(rad);\n  let a00 = a[0];\n  let a01 = a[1];\n  let a02 = a[2];\n  let a03 = a[3];\n  let a20 = a[8];\n  let a21 = a[9];\n  let a22 = a[10];\n  let a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  // Perform axis-specific matrix multiplication\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function rotateZ(out, a, rad) {\n  let s = Math.sin(rad);\n  let c = Math.cos(rad);\n  let a00 = a[0];\n  let a01 = a[1];\n  let a02 = a[2];\n  let a03 = a[3];\n  let a10 = a[4];\n  let a11 = a[5];\n  let a12 = a[6];\n  let a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  // Perform axis-specific matrix multiplication\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nexport function fromRotation(out, rad, axis) {\n  let x = axis[0],\n    y = axis[1],\n    z = axis[2];\n  let len = Math.hypot(x, y, z);\n  let s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n\n  // Perform rotation-specific matrix multiplication\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function fromXRotation(out, rad) {\n  let s = Math.sin(rad);\n  let c = Math.cos(rad);\n\n  // Perform axis-specific matrix multiplication\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function fromYRotation(out, rad) {\n  let s = Math.sin(rad);\n  let c = Math.cos(rad);\n\n  // Perform axis-specific matrix multiplication\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function fromZRotation(out, rad) {\n  let s = Math.sin(rad);\n  let c = Math.cos(rad);\n\n  // Perform axis-specific matrix multiplication\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  let x = q[0],\n    y = q[1],\n    z = q[2],\n    w = q[3];\n  let x2 = x + x;\n  let y2 = y + y;\n  let z2 = z + z;\n\n  let xx = x * x2;\n  let xy = x * y2;\n  let xz = x * z2;\n  let yy = y * y2;\n  let yz = y * z2;\n  let zz = z * z2;\n  let wx = w * x2;\n  let wy = w * y2;\n  let wz = w * z2;\n\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n\n  return out;\n}\n\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\nexport function fromQuat2(out, a) {\n  let translation = new glMatrix.ARRAY_TYPE(3);\n  let bx = -a[0],\n    by = -a[1],\n    bz = -a[2],\n    bw = a[3],\n    ax = a[4],\n    ay = a[5],\n    az = a[6],\n    aw = a[7];\n\n  let magnitude = bx * bx + by * by + bz * bz + bw * bw;\n  //Only scale if it makes sense\n  if (magnitude > 0) {\n    translation[0] = ((ax * bw + aw * bx + ay * bz - az * by) * 2) / magnitude;\n    translation[1] = ((ay * bw + aw * by + az * bx - ax * bz) * 2) / magnitude;\n    translation[2] = ((az * bw + aw * bz + ax * by - ay * bx) * 2) / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n\n  return out;\n}\n\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\nexport function getScaling(out, mat) {\n  let m11 = mat[0];\n  let m12 = mat[1];\n  let m13 = mat[2];\n  let m21 = mat[4];\n  let m22 = mat[5];\n  let m23 = mat[6];\n  let m31 = mat[8];\n  let m32 = mat[9];\n  let m33 = mat[10];\n\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n\n  return out;\n}\n\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\nexport function getRotation(out, mat) {\n  let scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n\n  let is1 = 1 / scaling[0];\n  let is2 = 1 / scaling[1];\n  let is3 = 1 / scaling[2];\n\n  let sm11 = mat[0] * is1;\n  let sm12 = mat[1] * is2;\n  let sm13 = mat[2] * is3;\n  let sm21 = mat[4] * is1;\n  let sm22 = mat[5] * is2;\n  let sm23 = mat[6] * is3;\n  let sm31 = mat[8] * is1;\n  let sm32 = mat[9] * is2;\n  let sm33 = mat[10] * is3;\n\n  let trace = sm11 + sm22 + sm33;\n  let S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  let x = q[0],\n    y = q[1],\n    z = q[2],\n    w = q[3];\n  let x2 = x + x;\n  let y2 = y + y;\n  let z2 = z + z;\n\n  let xx = x * x2;\n  let xy = x * y2;\n  let xz = x * z2;\n  let yy = y * y2;\n  let yz = y * z2;\n  let zz = z * z2;\n  let wx = w * x2;\n  let wy = w * y2;\n  let wz = w * z2;\n  let sx = s[0];\n  let sy = s[1];\n  let sz = s[2];\n\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n\n  return out;\n}\n\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  let x = q[0],\n    y = q[1],\n    z = q[2],\n    w = q[3];\n  let x2 = x + x;\n  let y2 = y + y;\n  let z2 = z + z;\n\n  let xx = x * x2;\n  let xy = x * y2;\n  let xz = x * z2;\n  let yy = y * y2;\n  let yz = y * z2;\n  let zz = z * z2;\n  let wx = w * x2;\n  let wy = w * y2;\n  let wz = w * z2;\n\n  let sx = s[0];\n  let sy = s[1];\n  let sz = s[2];\n\n  let ox = o[0];\n  let oy = o[1];\n  let oz = o[2];\n\n  let out0 = (1 - (yy + zz)) * sx;\n  let out1 = (xy + wz) * sx;\n  let out2 = (xz - wy) * sx;\n  let out4 = (xy - wz) * sy;\n  let out5 = (1 - (xx + zz)) * sy;\n  let out6 = (yz + wx) * sy;\n  let out8 = (xz + wy) * sz;\n  let out9 = (yz - wx) * sz;\n  let out10 = (1 - (xx + yy)) * sz;\n\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n\n  return out;\n}\n\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\nexport function fromQuat(out, q) {\n  let x = q[0],\n    y = q[1],\n    z = q[2],\n    w = q[3];\n  let x2 = x + x;\n  let y2 = y + y;\n  let z2 = z + z;\n\n  let xx = x * x2;\n  let yx = y * x2;\n  let yy = y * y2;\n  let zx = z * x2;\n  let zy = z * y2;\n  let zz = z * z2;\n  let wx = w * x2;\n  let wy = w * y2;\n  let wz = w * z2;\n\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n\n  return out;\n}\n\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function frustum(out, left, right, bottom, top, near, far) {\n  let rl = 1 / (right - left);\n  let tb = 1 / (top - bottom);\n  let nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n\n/**\n * Generates a perspective projection matrix with the given bounds.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\nexport function perspective(out, fovy, aspect, near, far) {\n  let f = 1.0 / Math.tan(fovy / 2),\n    nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n  return out;\n}\n\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  let upTan = Math.tan((fov.upDegrees * Math.PI) / 180.0);\n  let downTan = Math.tan((fov.downDegrees * Math.PI) / 180.0);\n  let leftTan = Math.tan((fov.leftDegrees * Math.PI) / 180.0);\n  let rightTan = Math.tan((fov.rightDegrees * Math.PI) / 180.0);\n  let xScale = 2.0 / (leftTan + rightTan);\n  let yScale = 2.0 / (upTan + downTan);\n\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = (far * near) / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n\n/**\n * Generates a orthogonal projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function ortho(out, left, right, bottom, top, near, far) {\n  let lr = 1 / (left - right);\n  let bt = 1 / (bottom - top);\n  let nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\nexport function lookAt(out, eye, center, up) {\n  let x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  let eyex = eye[0];\n  let eyey = eye[1];\n  let eyez = eye[2];\n  let upx = up[0];\n  let upy = up[1];\n  let upz = up[2];\n  let centerx = center[0];\n  let centery = center[1];\n  let centerz = center[2];\n\n  if (\n    Math.abs(eyex - centerx) < glMatrix.EPSILON &&\n    Math.abs(eyey - centery) < glMatrix.EPSILON &&\n    Math.abs(eyez - centerz) < glMatrix.EPSILON\n  ) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n\n  len = Math.hypot(y0, y1, y2);\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n\n  return out;\n}\n\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\nexport function targetTo(out, eye, target, up) {\n  let eyex = eye[0],\n    eyey = eye[1],\n    eyez = eye[2],\n    upx = up[0],\n    upy = up[1],\n    upz = up[2];\n\n  let z0 = eyex - target[0],\n    z1 = eyey - target[1],\n    z2 = eyez - target[2];\n\n  let len = z0 * z0 + z1 * z1 + z2 * z2;\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  let x0 = upy * z2 - upz * z1,\n    x1 = upz * z0 - upx * z2,\n    x2 = upx * z1 - upy * z0;\n\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\nexport function str(a) {\n  return (\n    \"mat4(\" +\n    a[0] +\n    \", \" +\n    a[1] +\n    \", \" +\n    a[2] +\n    \", \" +\n    a[3] +\n    \", \" +\n    a[4] +\n    \", \" +\n    a[5] +\n    \", \" +\n    a[6] +\n    \", \" +\n    a[7] +\n    \", \" +\n    a[8] +\n    \", \" +\n    a[9] +\n    \", \" +\n    a[10] +\n    \", \" +\n    a[11] +\n    \", \" +\n    a[12] +\n    \", \" +\n    a[13] +\n    \", \" +\n    a[14] +\n    \", \" +\n    a[15] +\n    \")\"\n  );\n}\n\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nexport function frob(a) {\n  return Math.hypot(\n    a[0],\n    a[1],\n    a[2],\n    a[3],\n    a[4],\n    a[5],\n    a[6],\n    a[7],\n    a[8],\n    a[9],\n    a[10],\n    a[11],\n    a[12],\n    a[13],\n    a[14],\n    a[15]\n  );\n}\n\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return (\n    a[0] === b[0] &&\n    a[1] === b[1] &&\n    a[2] === b[2] &&\n    a[3] === b[3] &&\n    a[4] === b[4] &&\n    a[5] === b[5] &&\n    a[6] === b[6] &&\n    a[7] === b[7] &&\n    a[8] === b[8] &&\n    a[9] === b[9] &&\n    a[10] === b[10] &&\n    a[11] === b[11] &&\n    a[12] === b[12] &&\n    a[13] === b[13] &&\n    a[14] === b[14] &&\n    a[15] === b[15]\n  );\n}\n\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function equals(a, b) {\n  let a0 = a[0],\n    a1 = a[1],\n    a2 = a[2],\n    a3 = a[3];\n  let a4 = a[4],\n    a5 = a[5],\n    a6 = a[6],\n    a7 = a[7];\n  let a8 = a[8],\n    a9 = a[9],\n    a10 = a[10],\n    a11 = a[11];\n  let a12 = a[12],\n    a13 = a[13],\n    a14 = a[14],\n    a15 = a[15];\n\n  let b0 = b[0],\n    b1 = b[1],\n    b2 = b[2],\n    b3 = b[3];\n  let b4 = b[4],\n    b5 = b[5],\n    b6 = b[6],\n    b7 = b[7];\n  let b8 = b[8],\n    b9 = b[9],\n    b10 = b[10],\n    b11 = b[11];\n  let b12 = b[12],\n    b13 = b[13],\n    b14 = b[14],\n    b15 = b[15];\n\n  return (\n    Math.abs(a0 - b0) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n    Math.abs(a1 - b1) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n    Math.abs(a2 - b2) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) &&\n    Math.abs(a3 - b3) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) &&\n    Math.abs(a4 - b4) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) &&\n    Math.abs(a5 - b5) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) &&\n    Math.abs(a6 - b6) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) &&\n    Math.abs(a7 - b7) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) &&\n    Math.abs(a8 - b8) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) &&\n    Math.abs(a9 - b9) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) &&\n    Math.abs(a10 - b10) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) &&\n    Math.abs(a11 - b11) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) &&\n    Math.abs(a12 - b12) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) &&\n    Math.abs(a13 - b13) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) &&\n    Math.abs(a14 - b14) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) &&\n    Math.abs(a15 - b15) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15))\n  );\n}\n\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\nexport const mul = multiply;\n\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\nexport const sub = subtract;\n","/* eslint-disable */\nimport * as glMatrix from \"./common.js\";\n\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\nexport function create() {\n  let out = new glMatrix.ARRAY_TYPE(3);\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n  return out;\n}\n\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport function length(a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  return Math.hypot(x, y, z);\n}\n\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\nexport function fromValues(x, y, z) {\n  let out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\nexport function distance(a, b) {\n  let x = b[0] - a[0];\n  let y = b[1] - a[1];\n  let z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\nexport function squaredDistance(a, b) {\n  let x = b[0] - a[0];\n  let y = b[1] - a[1];\n  let z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nexport function squaredLength(a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  return x * x + y * y + z * z;\n}\n\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\nexport function normalize(out, a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  let len = x * x + y * y + z * z;\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function cross(out, a, b) {\n  let ax = a[0],\n    ay = a[1],\n    az = a[2];\n  let bx = b[0],\n    by = b[1],\n    bz = b[2];\n\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\nexport function lerp(out, a, b, t) {\n  let ax = a[0];\n  let ay = a[1];\n  let az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\nexport function hermite(out, a, b, c, d, t) {\n  let factorTimes2 = t * t;\n  let factor1 = factorTimes2 * (2 * t - 3) + 1;\n  let factor2 = factorTimes2 * (t - 2) + t;\n  let factor3 = factorTimes2 * (t - 1);\n  let factor4 = factorTimes2 * (3 - 2 * t);\n\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n\n  return out;\n}\n\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\nexport function bezier(out, a, b, c, d, t) {\n  let inverseFactor = 1 - t;\n  let inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  let factorTimes2 = t * t;\n  let factor1 = inverseFactorTimesTwo * inverseFactor;\n  let factor2 = 3 * t * inverseFactorTimesTwo;\n  let factor3 = 3 * factorTimes2 * inverseFactor;\n  let factor4 = factorTimes2 * t;\n\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n\n  return out;\n}\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\nexport function random(out, scale) {\n  scale = scale || 1.0;\n\n  let r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  let z = glMatrix.RANDOM() * 2.0 - 1.0;\n  let zScale = Math.sqrt(1.0 - z * z) * scale;\n\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\nexport function transformMat4(out, a, m) {\n  let x = a[0],\n    y = a[1],\n    z = a[2];\n  let w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\nexport function transformMat3(out, a, m) {\n  let x = a[0],\n    y = a[1],\n    z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec3} out\n */\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  let qx = q[0],\n    qy = q[1],\n    qz = q[2],\n    qw = q[3];\n  let x = a[0],\n    y = a[1],\n    z = a[2];\n  // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n  let uvx = qy * z - qz * y,\n    uvy = qz * x - qx * z,\n    uvz = qx * y - qy * x;\n  // var uuv = vec3.cross([], qvec, uv);\n  let uuvx = qy * uvz - qz * uvy,\n    uuvy = qz * uvx - qx * uvz,\n    uuvz = qx * uvy - qy * uvx;\n  // vec3.scale(uv, uv, 2 * w);\n  let w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2;\n  // vec3.scale(uuv, uuv, 2);\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2;\n  // return vec3.add(out, a, vec3.add(out, uv, uuv));\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\nexport function rotateX(out, a, b, rad) {\n  let p = [],\n    r = [];\n  //Translate point to the origin\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2];\n\n  //perform rotation\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad);\n\n  //translate to correct position\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n\n  return out;\n}\n\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\nexport function rotateY(out, a, b, rad) {\n  let p = [],\n    r = [];\n  //Translate point to the origin\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2];\n\n  //perform rotation\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad);\n\n  //translate to correct position\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n\n  return out;\n}\n\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\nexport function rotateZ(out, a, b, rad) {\n  let p = [],\n    r = [];\n  //Translate point to the origin\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2];\n\n  //perform rotation\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2];\n\n  //translate to correct position\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n\n  return out;\n}\n\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\nexport function angle(a, b) {\n  let ax = a[0],\n    ay = a[1],\n    az = a[2],\n    bx = b[0],\n    by = b[1],\n    bz = b[2],\n    mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n    mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n    mag = mag1 * mag2,\n    cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function equals(a, b) {\n  let a0 = a[0],\n    a1 = a[1],\n    a2 = a[2];\n  let b0 = b[0],\n    b1 = b[1],\n    b2 = b[2];\n  return (\n    Math.abs(a0 - b0) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n    Math.abs(a1 - b1) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n    Math.abs(a2 - b2) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2))\n  );\n}\n\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\nexport const sub = subtract;\n\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\nexport const mul = multiply;\n\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\nexport const div = divide;\n\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\nexport const dist = distance;\n\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\nexport const sqrDist = squaredDistance;\n\n/**\n * Alias for {@link vec3.length}\n * @function\n */\nexport const len = length;\n\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\nexport const sqrLen = squaredLength;\n\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nexport const forEach = (function() {\n  let vec = create();\n\n  return function(a, stride, offset, count, fn, arg) {\n    let i, l;\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n})();\n","/* eslint-disable */\nimport * as glMatrix from \"./common.js\";\n\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\nexport function create() {\n  let out = new glMatrix.ARRAY_TYPE(4);\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n  return out;\n}\n\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {ReadonlyVec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\nexport function clone(a) {\n  let out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\nexport function fromValues(x, y, z, w) {\n  let out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the source vector\n * @returns {vec4} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to ceil\n * @returns {vec4} out\n */\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to floor\n * @returns {vec4} out\n */\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n\n/**\n * Math.round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to round\n * @returns {vec4} out\n */\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} distance between a and b\n */\nexport function distance(a, b) {\n  let x = b[0] - a[0];\n  let y = b[1] - a[1];\n  let z = b[2] - a[2];\n  let w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\nexport function squaredDistance(a, b) {\n  let x = b[0] - a[0];\n  let y = b[1] - a[1];\n  let z = b[2] - a[2];\n  let w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n\n/**\n * Calculates the length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport function length(a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  let w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n\n/**\n * Calculates the squared length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nexport function squaredLength(a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  let w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to negate\n * @returns {vec4} out\n */\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to invert\n * @returns {vec4} out\n */\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to normalize\n * @returns {vec4} out\n */\nexport function normalize(out, a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  let w = a[3];\n  let len = x * x + y * y + z * z + w * w;\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} dot product of a and b\n */\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n\n/**\n * Returns the cross-product of three vectors in a 4-dimensional space\n *\n * @param {ReadonlyVec4} result the receiving vector\n * @param {ReadonlyVec4} U the first vector\n * @param {ReadonlyVec4} V the second vector\n * @param {ReadonlyVec4} W the third vector\n * @returns {vec4} result\n */\nexport function cross(out, u, v, w) {\n  let A = v[0] * w[1] - v[1] * w[0],\n    B = v[0] * w[2] - v[2] * w[0],\n    C = v[0] * w[3] - v[3] * w[0],\n    D = v[1] * w[2] - v[2] * w[1],\n    E = v[1] * w[3] - v[3] * w[1],\n    F = v[2] * w[3] - v[3] * w[2];\n  let G = u[0];\n  let H = u[1];\n  let I = u[2];\n  let J = u[3];\n\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n\n  return out;\n}\n\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec4} out\n */\nexport function lerp(out, a, b, t) {\n  let ax = a[0];\n  let ay = a[1];\n  let az = a[2];\n  let aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\nexport function random(out, scale) {\n  scale = scale || 1.0;\n\n  // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n  var v1, v2, v3, v4;\n  var s1, s2;\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec4} out\n */\nexport function transformMat4(out, a, m) {\n  let x = a[0],\n    y = a[1],\n    z = a[2],\n    w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec4} out\n */\nexport function transformQuat(out, a, q) {\n  let x = a[0],\n    y = a[1],\n    z = a[2];\n  let qx = q[0],\n    qy = q[1],\n    qz = q[2],\n    qw = q[3];\n\n  // calculate quat * vec\n  let ix = qw * x + qy * z - qz * y;\n  let iy = qw * y + qz * x - qx * z;\n  let iz = qw * z + qx * y - qy * x;\n  let iw = -qx * x - qy * y - qz * z;\n\n  // calculate result * inverse quat\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n\n/**\n * Set the components of a vec4 to zero\n *\n * @param {vec4} out the receiving vector\n * @returns {vec4} out\n */\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function equals(a, b) {\n  let a0 = a[0],\n    a1 = a[1],\n    a2 = a[2],\n    a3 = a[3];\n  let b0 = b[0],\n    b1 = b[1],\n    b2 = b[2],\n    b3 = b[3];\n  return (\n    Math.abs(a0 - b0) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n    Math.abs(a1 - b1) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n    Math.abs(a2 - b2) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) &&\n    Math.abs(a3 - b3) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3))\n  );\n}\n\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\nexport const sub = subtract;\n\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\nexport const mul = multiply;\n\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\nexport const div = divide;\n\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\nexport const dist = distance;\n\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\nexport const sqrDist = squaredDistance;\n\n/**\n * Alias for {@link vec4.length}\n * @function\n */\nexport const len = length;\n\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\nexport const sqrLen = squaredLength;\n\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nexport const forEach = (function() {\n  let vec = create();\n\n  return function(a, stride, offset, count, fn, arg) {\n    let i, l;\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n})();\n","/* eslint-disable */\nimport * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n\n/**\n * Quaternion\n * @module quat\n */\n\n/**\n * Creates a new identity quat\n *\n * @returns {quat} a new quaternion\n */\nexport function create() {\n  let out = new glMatrix.ARRAY_TYPE(4);\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n  out[3] = 1;\n  return out;\n}\n\n/**\n * Set a quat to the identity quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n\n/**\n * Sets a quat from the given angle and rotation axis,\n * then returns it.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyVec3} axis the axis around which to rotate\n * @param {Number} rad the angle in radians\n * @returns {quat} out\n **/\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  let s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n\n/**\n * Gets the rotation axis and angle for a given\n *  quaternion. If a quaternion is created with\n *  setAxisAngle, this method will return the same\n *  values as providied in the original parameter list\n *  OR functionally equivalent values.\n * Example: The quaternion formed by axis [0, 0, 1] and\n *  angle -90 is the same as the quaternion formed by\n *  [0, 0, 1] and 270. This method favors the latter.\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\n * @param  {ReadonlyQuat} q     Quaternion to be decomposed\n * @return {Number}     Angle, in radians, of the rotation\n */\nexport function getAxisAngle(out_axis, q) {\n  let rad = Math.acos(q[3]) * 2.0;\n  let s = Math.sin(rad / 2.0);\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n  return rad;\n}\n\n/**\n * Gets the angular distance between two unit quaternions\n *\n * @param  {ReadonlyQuat} a     Origin unit quaternion\n * @param  {ReadonlyQuat} b     Destination unit quaternion\n * @return {Number}     Angle, in radians, between the two quaternions\n */\nexport function getAngle(a, b) {\n  let dotproduct = dot(a, b);\n\n  return Math.acos(2 * dotproduct * dotproduct - 1);\n}\n\n/**\n * Multiplies two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n */\nexport function multiply(out, a, b) {\n  let ax = a[0],\n    ay = a[1],\n    az = a[2],\n    aw = a[3];\n  let bx = b[0],\n    by = b[1],\n    bz = b[2],\n    bw = b[3];\n\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n\n/**\n * Rotates a quaternion by the given angle about the X axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n\n  let ax = a[0],\n    ay = a[1],\n    az = a[2],\n    aw = a[3];\n  let bx = Math.sin(rad),\n    bw = Math.cos(rad);\n\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n\n/**\n * Rotates a quaternion by the given angle about the Y axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n\n  let ax = a[0],\n    ay = a[1],\n    az = a[2],\n    aw = a[3];\n  let by = Math.sin(rad),\n    bw = Math.cos(rad);\n\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n\n/**\n * Rotates a quaternion by the given angle about the Z axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n\n  let ax = a[0],\n    ay = a[1],\n    az = a[2],\n    aw = a[3];\n  let bz = Math.sin(rad),\n    bw = Math.cos(rad);\n\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n\n/**\n * Calculates the W component of a quat from the X, Y, and Z components.\n * Assumes that quaternion is 1 unit in length.\n * Any existing W component will be ignored.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate W component of\n * @returns {quat} out\n */\nexport function calculateW(out, a) {\n  let x = a[0],\n    y = a[1],\n    z = a[2];\n\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n\n/**\n * Calculate the exponential of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\nexport function exp(out, a) {\n  let x = a[0],\n    y = a[1],\n    z = a[2],\n    w = a[3];\n\n  let r = Math.sqrt(x * x + y * y + z * z);\n  let et = Math.exp(w);\n  let s = r > 0 ? (et * Math.sin(r)) / r : 0;\n\n  out[0] = x * s;\n  out[1] = y * s;\n  out[2] = z * s;\n  out[3] = et * Math.cos(r);\n\n  return out;\n}\n\n/**\n * Calculate the natural logarithm of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\nexport function ln(out, a) {\n  let x = a[0],\n    y = a[1],\n    z = a[2],\n    w = a[3];\n\n  let r = Math.sqrt(x * x + y * y + z * z);\n  let t = r > 0 ? Math.atan2(r, w) / r : 0;\n\n  out[0] = x * t;\n  out[1] = y * t;\n  out[2] = z * t;\n  out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);\n\n  return out;\n}\n\n/**\n * Calculate the scalar power of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @param {Number} b amount to scale the quaternion by\n * @returns {quat} out\n */\nexport function pow(out, a, b) {\n  ln(out, a);\n  scale(out, out, b);\n  exp(out, out);\n  return out;\n}\n\n/**\n * Performs a spherical linear interpolation between two quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  let ax = a[0],\n    ay = a[1],\n    az = a[2],\n    aw = a[3];\n  let bx = b[0],\n    by = b[1],\n    bz = b[2],\n    bw = b[3];\n\n  let omega, cosom, sinom, scale0, scale1;\n\n  // calc cosine\n  cosom = ax * bx + ay * by + az * bz + aw * bw;\n  // adjust signs (if necessary)\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  }\n  // calculate coefficients\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  }\n  // calculate final values\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n\n  return out;\n}\n\n/**\n * Generates a random unit quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  let u1 = glMatrix.RANDOM();\n  let u2 = glMatrix.RANDOM();\n  let u3 = glMatrix.RANDOM();\n\n  let sqrt1MinusU1 = Math.sqrt(1 - u1);\n  let sqrtU1 = Math.sqrt(u1);\n\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n\n/**\n * Calculates the inverse of a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate inverse of\n * @returns {quat} out\n */\nexport function invert(out, a) {\n  let a0 = a[0],\n    a1 = a[1],\n    a2 = a[2],\n    a3 = a[3];\n  let dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  let invDot = dot ? 1.0 / dot : 0;\n\n  // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n\n/**\n * Calculates the conjugate of a quat\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate conjugate of\n * @returns {quat} out\n */\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n\n/**\n * Creates a quaternion from the given 3x3 rotation matrix.\n *\n * NOTE: The resultant quaternion is not normalized, so you should be sure\n * to renormalize the quaternion yourself where necessary.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyMat3} m rotation matrix\n * @returns {quat} out\n * @function\n */\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  let fTrace = m[0] + m[4] + m[8];\n  let fRoot;\n\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    let i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    let j = (i + 1) % 3;\n    let k = (i + 2) % 3;\n\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n\n  return out;\n}\n\n/**\n * Creates a quaternion from the given euler angle x, y, z.\n *\n * @param {quat} out the receiving quaternion\n * @param {x} Angle to rotate around X axis in degrees.\n * @param {y} Angle to rotate around Y axis in degrees.\n * @param {z} Angle to rotate around Z axis in degrees.\n * @returns {quat} out\n * @function\n */\nexport function fromEuler(out, x, y, z) {\n  let halfToRad = (0.5 * Math.PI) / 180.0;\n  x *= halfToRad;\n  y *= halfToRad;\n  z *= halfToRad;\n\n  let sx = Math.sin(x);\n  let cx = Math.cos(x);\n  let sy = Math.sin(y);\n  let cy = Math.cos(y);\n  let sz = Math.sin(z);\n  let cz = Math.cos(z);\n\n  out[0] = sx * cy * cz - cx * sy * sz;\n  out[1] = cx * sy * cz + sx * cy * sz;\n  out[2] = cx * cy * sz - sx * sy * cz;\n  out[3] = cx * cy * cz + sx * sy * sz;\n\n  return out;\n}\n\n/**\n * Returns a string representation of a quatenion\n *\n * @param {ReadonlyQuat} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nexport function str(a) {\n  return \"quat(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n\n/**\n * Creates a new quat initialized with values from an existing quaternion\n *\n * @param {ReadonlyQuat} a quaternion to clone\n * @returns {quat} a new quaternion\n * @function\n */\nexport const clone = vec4.clone;\n\n/**\n * Creates a new quat initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} a new quaternion\n * @function\n */\nexport const fromValues = vec4.fromValues;\n\n/**\n * Copy the values from one quat to another\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the source quaternion\n * @returns {quat} out\n * @function\n */\nexport const copy = vec4.copy;\n\n/**\n * Set the components of a quat to the given values\n *\n * @param {quat} out the receiving quaternion\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} out\n * @function\n */\nexport const set = vec4.set;\n\n/**\n * Adds two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n * @function\n */\nexport const add = vec4.add;\n\n/**\n * Alias for {@link quat.multiply}\n * @function\n */\nexport const mul = multiply;\n\n/**\n * Scales a quat by a scalar number\n *\n * @param {quat} out the receiving vector\n * @param {ReadonlyQuat} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {quat} out\n * @function\n */\nexport const scale = vec4.scale;\n\n/**\n * Calculates the dot product of two quat's\n *\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\nexport const dot = vec4.dot;\n\n/**\n * Performs a linear interpolation between two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n * @function\n */\nexport const lerp = vec4.lerp;\n\n/**\n * Calculates the length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport const length = vec4.length;\n\n/**\n * Alias for {@link quat.length}\n * @function\n */\nexport const len = length;\n\n/**\n * Calculates the squared length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate squared length of\n * @returns {Number} squared length of a\n * @function\n */\nexport const squaredLength = vec4.squaredLength;\n\n/**\n * Alias for {@link quat.squaredLength}\n * @function\n */\nexport const sqrLen = squaredLength;\n\n/**\n * Normalize a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quaternion to normalize\n * @returns {quat} out\n * @function\n */\nexport const normalize = vec4.normalize;\n\n/**\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyQuat} a The first quaternion.\n * @param {ReadonlyQuat} b The second quaternion.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport const exactEquals = vec4.exactEquals;\n\n/**\n * Returns whether or not the quaternions have approximately the same elements in the same position.\n *\n * @param {ReadonlyQuat} a The first vector.\n * @param {ReadonlyQuat} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport const equals = vec4.equals;\n\n/**\n * Sets a quaternion to represent the shortest rotation from one\n * vector to another.\n *\n * Both vectors are assumed to be unit length.\n *\n * @param {quat} out the receiving quaternion.\n * @param {ReadonlyVec3} a the initial vector\n * @param {ReadonlyVec3} b the destination vector\n * @returns {quat} out\n */\nexport const rotationTo = (function() {\n  let tmpvec3 = vec3.create();\n  let xUnitVec3 = vec3.fromValues(1, 0, 0);\n  let yUnitVec3 = vec3.fromValues(0, 1, 0);\n\n  return function(out, a, b) {\n    let dot = vec3.dot(a, b);\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n})();\n\n/**\n * Performs a spherical linear interpolation with two control points\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {ReadonlyQuat} c the third operand\n * @param {ReadonlyQuat} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\nexport const sqlerp = (function() {\n  let temp1 = create();\n  let temp2 = create();\n\n  return function(out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n\n    return out;\n  };\n})();\n\n/**\n * Sets the specified quaternion with values corresponding to the given\n * axes. Each axis is a vec3 and is expected to be unit length and\n * perpendicular to all other specified axes.\n *\n * @param {ReadonlyVec3} view  the vector representing the viewing direction\n * @param {ReadonlyVec3} right the vector representing the local \"right\" direction\n * @param {ReadonlyVec3} up    the vector representing the local \"up\" direction\n * @returns {quat} out\n */\nexport const setAxes = (function() {\n  let matr = mat3.create();\n\n  return function(out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n\n    return normalize(out, fromMat3(out, matr));\n  };\n})();\n","/* eslint-disable */\nimport * as glMatrix from \"./common.js\";\n\n/**\n * 2 Dimensional Vector\n * @module vec2\n */\n\n/**\n * Creates a new, empty vec2\n *\n * @returns {vec2} a new 2D vector\n */\nexport function create() {\n  let out = new glMatrix.ARRAY_TYPE(2);\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n  return out;\n}\n\n/**\n * Creates a new vec2 initialized with values from an existing vector\n *\n * @param {ReadonlyVec2} a vector to clone\n * @returns {vec2} a new 2D vector\n */\nexport function clone(a) {\n  let out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n\n/**\n * Creates a new vec2 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} a new 2D vector\n */\nexport function fromValues(x, y) {\n  let out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n\n/**\n * Copy the values from one vec2 to another\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the source vector\n * @returns {vec2} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n\n/**\n * Set the components of a vec2 to the given values\n *\n * @param {vec2} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} out\n */\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n\n/**\n * Adds two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n\n/**\n * Multiplies two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n\n/**\n * Divides two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n\n/**\n * Math.ceil the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to ceil\n * @returns {vec2} out\n */\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n\n/**\n * Math.floor the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to floor\n * @returns {vec2} out\n */\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n\n/**\n * Returns the minimum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n\n/**\n * Returns the maximum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n\n/**\n * Math.round the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to round\n * @returns {vec2} out\n */\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n\n/**\n * Scales a vec2 by a scalar number\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec2} out\n */\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n\n/**\n * Adds two vec2's after scaling the second operand by a scalar value\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec2} out\n */\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} distance between a and b\n */\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n    y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n\n/**\n * Calculates the squared euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} squared distance between a and b\n */\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n    y = b[1] - a[1];\n  return x * x + y * y;\n}\n\n/**\n * Calculates the length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport function length(a) {\n  var x = a[0],\n    y = a[1];\n  return Math.hypot(x, y);\n}\n\n/**\n * Calculates the squared length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nexport function squaredLength(a) {\n  var x = a[0],\n    y = a[1];\n  return x * x + y * y;\n}\n\n/**\n * Negates the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to negate\n * @returns {vec2} out\n */\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n\n/**\n * Returns the inverse of the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to invert\n * @returns {vec2} out\n */\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n\n/**\n * Normalize a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to normalize\n * @returns {vec2} out\n */\nexport function normalize(out, a) {\n  var x = a[0],\n    y = a[1];\n  var len = x * x + y * y;\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n\n/**\n * Calculates the dot product of two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} dot product of a and b\n */\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n\n/**\n * Computes the cross product of two vec2's\n * Note that the cross product must by definition produce a 3D vector\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec3} out\n */\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n\n/**\n * Performs a linear interpolation between two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec2} out\n */\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n    ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec2} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec2} out\n */\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n\n/**\n * Transforms the vec2 with a mat2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2} m matrix to transform with\n * @returns {vec2} out\n */\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n    y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n\n/**\n * Transforms the vec2 with a mat2d\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2d} m matrix to transform with\n * @returns {vec2} out\n */\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n    y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n\n/**\n * Transforms the vec2 with a mat3\n * 3rd vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat3} m matrix to transform with\n * @returns {vec2} out\n */\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n    y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n\n/**\n * Transforms the vec2 with a mat4\n * 3rd vector component is implicitly '0'\n * 4th vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec2} out\n */\nexport function transformMat4(out, a, m) {\n  let x = a[0];\n  let y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n\n/**\n * Rotate a 2D vector\n * @param {vec2} out The receiving vec2\n * @param {ReadonlyVec2} a The vec2 point to rotate\n * @param {ReadonlyVec2} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec2} out\n */\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  let p0 = a[0] - b[0],\n    p1 = a[1] - b[1],\n    sinC = Math.sin(rad),\n    cosC = Math.cos(rad);\n\n  //perform rotation and translate to correct position\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n\n  return out;\n}\n\n/**\n * Get the angle between two 2D vectors\n * @param {ReadonlyVec2} a The first operand\n * @param {ReadonlyVec2} b The second operand\n * @returns {Number} The angle in radians\n */\nexport function angle(a, b) {\n  let x1 = a[0],\n    y1 = a[1],\n    x2 = b[0],\n    y2 = b[1],\n    // mag is the product of the magnitudes of a and b\n    mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n    // mag &&.. short circuits if mag == 0\n    cosine = mag && (x1 * x2 + y1 * y2) / mag;\n  // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n\n/**\n * Set the components of a vec2 to zero\n *\n * @param {vec2} out the receiving vector\n * @returns {vec2} out\n */\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec2} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n\n/**\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function equals(a, b) {\n  let a0 = a[0],\n    a1 = a[1];\n  let b0 = b[0],\n    b1 = b[1];\n  return (\n    Math.abs(a0 - b0) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n    Math.abs(a1 - b1) <=\n      glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1))\n  );\n}\n\n/**\n * Alias for {@link vec2.length}\n * @function\n */\nexport const len = length;\n\n/**\n * Alias for {@link vec2.subtract}\n * @function\n */\nexport const sub = subtract;\n\n/**\n * Alias for {@link vec2.multiply}\n * @function\n */\nexport const mul = multiply;\n\n/**\n * Alias for {@link vec2.divide}\n * @function\n */\nexport const div = divide;\n\n/**\n * Alias for {@link vec2.distance}\n * @function\n */\nexport const dist = distance;\n\n/**\n * Alias for {@link vec2.squaredDistance}\n * @function\n */\nexport const sqrDist = squaredDistance;\n\n/**\n * Alias for {@link vec2.squaredLength}\n * @function\n */\nexport const sqrLen = squaredLength;\n\n/**\n * Perform some operation over an array of vec2s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nexport const forEach = (function() {\n  let vec = create();\n\n  return function(a, stride, offset, count, fn, arg) {\n    let i, l;\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n})();\n","/* eslint-disable */\n// Code from https://github.com/Twinklebear/webgl-volume-raycaster\n\nimport {\n    vec2, vec3, vec4, mat3, mat4, quat\n} from './gl-matrix'\n\n// Compute the view frustum in world space from the provided\n// column major projection * view matrix\nvar Frustum = function(projView) {\n    var rows = [vec4.create(), vec4.create(), vec4.create(), vec4.create()];\n    for (var i = 0; i < rows.length; ++i) {\n        rows[i] = vec4.set(rows[i], projView[i], projView[4 + i],\n            projView[8 + i], projView[12 + i]);\n    }\n\n    this.planes = [\n        // -x plane\n        vec4.add(vec4.create(), rows[3], rows[0]),\n        // +x plane\n        vec4.sub(vec4.create(), rows[3], rows[0]),\n        // -y plane\n        vec4.add(vec4.create(), rows[3], rows[1]),\n        // +y plane\n        vec4.sub(vec4.create(), rows[3], rows[1]),\n        // -z plane\n        vec4.add(vec4.create(), rows[3], rows[2]),\n        // +z plane\n        vec4.sub(vec4.create(), rows[3], rows[2])\n    ];\n\n    // Normalize the planes\n    for (var i = 0; i < this.planes.length; ++i) {\n        var s = 1.0 / Math.sqrt(this.planes[i][0] * this.planes[i][0] +\n            this.planes[i][1] * this.planes[i][1] + this.planes[i][2] * this.planes[i][2]);\n        this.planes[i][0] *= s;\n        this.planes[i][1] *= s;\n        this.planes[i][2] *= s;\n        this.planes[i][3] *= s;\n    }\n\n    // Compute the frustum points as well\n    var invProjView = mat4.invert(mat4.create(), projView);\n    this.points = [\n        // x_l, y_l, z_l\n        vec4.set(vec4.create(), -1, -1, -1, 1),\n        // x_h, y_l, z_l\n        vec4.set(vec4.create(), 1, -1, -1, 1),\n        // x_l, y_h, z_l\n        vec4.set(vec4.create(), -1, 1, -1, 1),\n        // x_h, y_h, z_l\n        vec4.set(vec4.create(), 1, 1, -1, 1),\n        // x_l, y_l, z_h\n        vec4.set(vec4.create(), -1, -1, 1, 1),\n        // x_h, y_l, z_h\n        vec4.set(vec4.create(), 1, -1, 1, 1),\n        // x_l, y_h, z_h\n        vec4.set(vec4.create(), -1, 1, 1, 1),\n        // x_h, y_h, z_h\n        vec4.set(vec4.create(), 1, 1, 1, 1)\n    ];\n    for (var i = 0; i < 8; ++i) {\n        this.points[i] = vec4.transformMat4(this.points[i], this.points[i], invProjView);\n        this.points[i][0] /= this.points[i][3];\n        this.points[i][1] /= this.points[i][3];\n        this.points[i][2] /= this.points[i][3];\n        this.points[i][3] = 1.0;\n    }\n}\n\n// Check if the box is contained in the Frustum\n// The box should be [x_lower, y_lower, z_lower, x_upper, y_upper, z_upper]\n// This is done using Inigo Quilez's approach to help with large\n// bounds: https://www.iquilezles.org/www/articles/frustumcorrect/frustumcorrect.htm\nFrustum.prototype.containsBox = function(box) {\n    // Test the box against each plane\n    var vec = vec4.create();\n    var out = 0;\n    for (var i = 0; i < this.planes.length; ++i) {\n        out = 0;\n        // x_l, y_l, z_l\n        vec4.set(vec, box[0], box[1], box[2], 1.0);\n        out += vec4.dot(this.planes[i], vec) < 0.0 ? 1 : 0;\n        // x_h, y_l, z_l\n        vec4.set(vec, box[3], box[1], box[2], 1.0);\n        out += vec4.dot(this.planes[i], vec) < 0.0 ? 1 : 0;\n        // x_l, y_h, z_l\n        vec4.set(vec, box[0], box[4], box[2], 1.0);\n        out += vec4.dot(this.planes[i], vec) < 0.0 ? 1 : 0;\n        // x_h, y_h, z_l\n        vec4.set(vec, box[3], box[4], box[2], 1.0);\n        out += vec4.dot(this.planes[i], vec) < 0.0 ? 1 : 0;\n        // x_l, y_l, z_h\n        vec4.set(vec, box[0], box[1], box[5], 1.0);\n        out += vec4.dot(this.planes[i], vec) < 0.0 ? 1 : 0;\n        // x_h, y_l, z_h\n        vec4.set(vec, box[3], box[1], box[5], 1.0);\n        out += vec4.dot(this.planes[i], vec) < 0.0 ? 1 : 0;\n        // x_l, y_h, z_h\n        vec4.set(vec, box[0], box[4], box[5], 1.0);\n        out += vec4.dot(this.planes[i], vec) < 0.0 ? 1 : 0;\n        // x_h, y_h, z_h\n        vec4.set(vec, box[3], box[4], box[5], 1.0);\n        out += vec4.dot(this.planes[i], vec) < 0.0 ? 1 : 0;\n\n        if (out == 8) {\n            return false;\n        }\n    }\n\n    // Test the frustum against the box\n    out = 0;\n    for (var i = 0; i < 8; ++i) {\n        out += this.points[i][0] > box[3] ? 1 : 0;\n    }\n    if (out == 8) {\n        return false;\n    }\n\n    out = 0;\n    for (var i = 0; i < 8; ++i) {\n        out += this.points[i][0] < box[0] ? 1 : 0;\n    }\n    if (out == 8) {\n        return false;\n    }\n\n    out = 0;\n    for (var i = 0; i < 8; ++i) {\n        out += this.points[i][1] > box[4] ? 1 : 0;\n    }\n    if (out == 8) {\n        return false;\n    }\n\n    out = 0;\n    for (var i = 0; i < 8; ++i) {\n        out += this.points[i][1] < box[1] ? 1 : 0;\n    }\n    if (out == 8) {\n        return false;\n    }\n\n    out = 0;\n    for (var i = 0; i < 8; ++i) {\n        out += this.points[i][2] > box[5] ? 1 : 0;\n    }\n    if (out == 8) {\n        return false;\n    }\n\n    out = 0;\n    for (var i = 0; i < 8; ++i) {\n        out += this.points[i][2] < box[2] ? 1 : 0;\n    }\n    if (out == 8) {\n        return false;\n    }\n    return true;\n}\n\n\nvar Shader = function(gl, vertexSrc, fragmentSrc) {\n    var self = this;\n    this.program = compileShader(gl, vertexSrc, fragmentSrc);\n\n    var regexUniform = /uniform[^;]+[ ](\\w+);/g\n    var matchUniformName = /uniform[^;]+[ ](\\w+);/\n\n    this.uniforms = {};\n\n    var vertexUnifs = vertexSrc.match(regexUniform);\n    var fragUnifs = fragmentSrc.match(regexUniform);\n\n    if (vertexUnifs) {\n        vertexUnifs.forEach(function(unif) {\n            var m = unif.match(matchUniformName);\n            self.uniforms[m[1]] = -1;\n        });\n    }\n    if (fragUnifs) {\n        fragUnifs.forEach(function(unif) {\n            var m = unif.match(matchUniformName);\n            self.uniforms[m[1]] = -1;\n        });\n    }\n\n    for (var unif in this.uniforms) {\n        this.uniforms[unif] = gl.getUniformLocation(this.program, unif);\n    }\n}\n\nShader.prototype.use = function(gl) {\n    gl.useProgram(this.program);\n}\n\n// Compile and link the shaders vert and frag. vert and frag should contain\n// the shader source code for the vertex and fragment shaders respectively\n// Returns the compiled and linked program, or null if compilation or linking failed\nvar compileShader = function(gl, vert, frag){\n    var vs = gl.createShader(gl.VERTEX_SHADER);\n    gl.shaderSource(vs, vert);\n    gl.compileShader(vs);\n    if (!gl.getShaderParameter(vs, gl.COMPILE_STATUS)){\n        alert(\"Vertex shader failed to compile, see console for log\");\n        console.log(gl.getShaderInfoLog(vs));\n        return null;\n    }\n\n    var fs = gl.createShader(gl.FRAGMENT_SHADER);\n    gl.shaderSource(fs, frag);\n    gl.compileShader(fs);\n    if (!gl.getShaderParameter(fs, gl.COMPILE_STATUS)){\n        alert(\"Fragment shader failed to compile, see console for log\");\n        console.log(gl.getShaderInfoLog(fs));\n        return null;\n    }\n\n    var program = gl.createProgram();\n    gl.attachShader(program, vs);\n    gl.attachShader(program, fs);\n    gl.linkProgram(program);\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)){\n        alert(\"Shader failed to link, see console for log\");\n        console.log(gl.getProgramInfoLog(program));\n        return null;\n    }\n    return program;\n}\n\n// var getGLExtension = function(ext) {\n//     if (!gl.getExtension(ext)) {\n//         alert(\"Missing \" + ext + \" WebGL extension\");\n//         return false;\n//     }\n//     return true;\n// }\n\n/* The arcball camera will be placed at the position 'eye', rotating\n * around the point 'center', with the up vector 'up'. 'screenDims'\n * should be the dimensions of the canvas or region taking mouse input\n * so the mouse positions can be normalized into [-1, 1] from the pixel\n * coordinates.\n */\nvar ArcballCamera = function(eye, center, up, zoomSpeed, screenDims) {\n\n    var veye = vec3.set(vec3.create(), eye[0], eye[1], eye[2]);\n    var vcenter = vec3.set(vec3.create(), center[0], center[1], center[2]);\n    var vup = vec3.set(vec3.create(), up[0], up[1], up[2]);\n    vec3.normalize(vup, vup);\n\n    var zAxis = vec3.sub(vec3.create(), vcenter, veye);\n    var viewDist = vec3.len(zAxis);\n    vec3.normalize(zAxis, zAxis);\n\n    var xAxis = vec3.cross(vec3.create(), zAxis, vup);\n    vec3.normalize(xAxis, xAxis);\n\n    var yAxis = vec3.cross(vec3.create(), xAxis, zAxis);\n    vec3.normalize(yAxis, yAxis);\n\n    vec3.cross(xAxis, zAxis, yAxis);\n    vec3.normalize(xAxis, xAxis);\n\n    this.zoomSpeed = zoomSpeed;\n    this.invScreen = [1.0 / screenDims[0], 1.0 / screenDims[1]];\n\n    this.centerTranslation = mat4.fromTranslation(mat4.create(), center);\n    mat4.invert(this.centerTranslation, this.centerTranslation);\n\n    var vt = vec3.set(vec3.create(), 0, 0, -1.0 * viewDist);\n    this.translation = mat4.fromTranslation(mat4.create(), vt);\n\n    var rotMat = mat3.fromValues(xAxis[0], xAxis[1], xAxis[2],\n        yAxis[0], yAxis[1], yAxis[2],\n        -zAxis[0], -zAxis[1], -zAxis[2]);\n    mat3.transpose(rotMat, rotMat);\n    this.rotation = quat.fromMat3(quat.create(), rotMat);\n    quat.normalize(this.rotation, this.rotation);\n\n    this.camera = mat4.create();\n    this.invCamera = mat4.create();\n    this.updateCameraMatrix();\n}\n\nArcballCamera.prototype.rotate = function(prevMouse, curMouse) {\n    var mPrev = vec2.set(vec2.create(),\n        clamp(prevMouse[0] * 2.0 * this.invScreen[0] - 1.0, -1.0, 1.0),\n        clamp(1.0 - prevMouse[1] * 2.0 * this.invScreen[1], -1.0, 1.0));\n\n    var mCur = vec2.set(vec2.create(),\n        clamp(curMouse[0] * 2.0 * this.invScreen[0] - 1.0, -1.0, 1.0),\n        clamp(1.0 - curMouse[1] * 2.0 * this.invScreen[1], -1.0, 1.0));\n\n    var mPrevBall = screenToArcball(mPrev);\n    var mCurBall = screenToArcball(mCur);\n    // rotation = curBall * prevBall * rotation\n    this.rotation = quat.mul(this.rotation, mPrevBall, this.rotation);\n    this.rotation = quat.mul(this.rotation, mCurBall, this.rotation);\n\n    this.updateCameraMatrix();\n}\n\nArcballCamera.prototype.zoom = function(amount) {\n    var vt = vec3.set(vec3.create(), 0.0, 0.0, amount * this.invScreen[1] * this.zoomSpeed);\n    var t = mat4.fromTranslation(mat4.create(), vt);\n    this.translation = mat4.mul(this.translation, t, this.translation);\n    if (this.translation[14] >= -0.2) {\n        this.translation[14] = -0.2;\n    }\n    this.updateCameraMatrix();\n}\n\nArcballCamera.prototype.pan = function(mouseDelta) {\n    var delta = vec4.set(vec4.create(), mouseDelta[0] * this.invScreen[0] * Math.abs(this.translation[14]),\n        mouseDelta[1] * this.invScreen[1] * Math.abs(this.translation[14]), 0, 0);\n    var worldDelta = vec4.transformMat4(vec4.create(), delta, this.invCamera);\n    var translation = mat4.fromTranslation(mat4.create(), worldDelta);\n    this.centerTranslation = mat4.mul(this.centerTranslation, translation, this.centerTranslation);\n    this.updateCameraMatrix();\n}\n\nArcballCamera.prototype.updateCameraMatrix = function() {\n    // camera = translation * rotation * centerTranslation\n    var rotMat = mat4.fromQuat(mat4.create(), this.rotation);\n    this.camera = mat4.mul(this.camera, rotMat, this.centerTranslation);\n    this.camera = mat4.mul(this.camera, this.translation, this.camera);\n    this.invCamera = mat4.invert(this.invCamera, this.camera);\n}\n\nArcballCamera.prototype.eyePos = function() {\n    return [this.invCamera[12], this.invCamera[13], this.invCamera[14]];\n}\n\nArcballCamera.prototype.eyeDir = function() {\n    var dir = vec4.set(vec4.create(), 0.0, 0.0, -1.0, 0.0);\n    dir = vec4.transformMat4(dir, dir, this.invCamera);\n    dir = vec4.normalize(dir, dir);\n    return [dir[0], dir[1], dir[2]];\n}\n\nArcballCamera.prototype.upDir = function() {\n    var dir = vec4.set(vec4.create(), 0.0, 1.0, 0.0, 0.0);\n    dir = vec4.transformMat4(dir, dir, this.invCamera);\n    dir = vec4.normalize(dir, dir);\n    return [dir[0], dir[1], dir[2]];\n}\n\nvar screenToArcball = function(p) {\n    var dist = vec2.dot(p, p);\n    if (dist <= 1.0) {\n        return quat.set(quat.create(), p[0], p[1], Math.sqrt(1.0 - dist), 0);\n    } else {\n        var unitP = vec2.normalize(vec2.create(), p);\n        // cgmath is w, x, y, z\n        // glmatrix is x, y, z, w\n        return quat.set(quat.create(), unitP[0], unitP[1], 0, 0);\n    }\n}\nvar clamp = function(a, min, max) {\n    return a < min ? min : a > max ? max : a;\n}\n\nvar pointDist = function(a, b) {\n    var v = [b[0] - a[0], b[1] - a[1]];\n    return Math.sqrt(Math.pow(v[0], 2.0) + Math.pow(v[1], 2.0));\n}\n\nvar Buffer = function(capacity, dtype) {\n    this.len = 0;\n    this.capacity = capacity;\n    if (dtype == \"uint8\") {\n        this.buffer = new Uint8Array(capacity);\n    } else if (dtype == \"int8\") {\n        this.buffer = new Int8Array(capacity);\n    } else if (dtype == \"uint16\") {\n        this.buffer = new Uint16Array(capacity);\n    } else if (dtype == \"int16\") {\n        this.buffer = new Int16Array(capacity);\n    } else if (dtype == \"uint32\") {\n        this.buffer = new Uint32Array(capacity);\n    } else if (dtype == \"int32\") {\n        this.buffer = new Int32Array(capacity);\n    } else if (dtype == \"float32\") {\n        this.buffer = new Float32Array(capacity);\n    } else if (dtype == \"float64\") {\n        this.buffer = new Float64Array(capacity);\n    } else {\n        console.log(\"ERROR: unsupported type \" + dtype);\n    }\n}\n\nBuffer.prototype.append = function(buf) {\n    if (this.len + buf.length >= this.capacity) {\n        var newCap = Math.floor(this.capacity * 1.5);\n        var tmp = new (this.buffer.constructor)(newCap);\n        tmp.set(this.buffer);\n\n        this.capacity = newCap;\n        this.buffer = tmp;\n    }\n    this.buffer.set(buf, this.len);\n    this.len += buf.length;\n}\n\nBuffer.prototype.clear = function() {\n    this.len = 0;\n}\n\nBuffer.prototype.stride = function() {\n    return this.buffer.BYTES_PER_ELEMENT;\n}\n\nBuffer.prototype.view = function(offset, length) {\n    return new (this.buffer.constructor)(this.buffer.buffer, offset, length);\n}\n\n// Various utilities that don't really fit anywhere else\n\n// Parse the hex string to RGB values in [0, 255]\nvar hexToRGB = function(hex) {\n    var val = parseInt(hex.substr(1), 16);\n    var r = (val >> 16) & 255;\n    var g = (val >> 8) & 255;\n    var b = val & 255;\n    return [r, g, b];\n}\n\n// Parse the hex string to RGB values in [0, 1]\nvar hexToRGBf = function(hex) {\n    var c = hexToRGB(hex);\n    return [c[0] / 255.0, c[1] / 255.0, c[2] / 255.0];\n}\n\n/* The controller can register callbacks for various events on a canvas:\n *\n * mousemove: function(prevMouse, curMouse, evt)\n *     receives both regular mouse events, and single-finger drags (sent as a left-click),\n *\n * press: function(curMouse, evt)\n *     receives mouse click and touch start events\n *\n * wheel: function(amount)\n *     mouse wheel scrolling\n *\n * pinch: function(amount)\n *     two finger pinch, receives the distance change between the fingers\n *\n * twoFingerDrag: function(dragVector)\n *     two finger drag, receives the drag movement amount\n */\nvar Controller = function(camera) {\n    this.camera = camera;\n    this.mousemove = null;\n    this.press = null;\n    this.wheel = null;\n    this.twoFingerDrag = null;\n    this.pinch = null;\n}\n\nController.prototype.registerForCanvas = function(canvas) {\n    var prevMouse = null;\n    var mouseState = [false, false];\n    var self = this;\n    canvas.addEventListener(\"mousemove\", function(evt) {\n        evt.preventDefault();\n        var rect = canvas.getBoundingClientRect();\n        var curMouse = [evt.clientX - rect.left, evt.clientY - rect.top];\n        if (!prevMouse) {\n            prevMouse = [evt.clientX - rect.left, evt.clientY - rect.top];\n        } else if (self.mousemove) {\n            self.mousemove(prevMouse, curMouse, evt);\n        }\n        prevMouse = curMouse;\n    });\n\n    canvas.addEventListener(\"mousedown\", function(evt) {\n        evt.preventDefault();\n        var rect = canvas.getBoundingClientRect();\n        var curMouse = [evt.clientX - rect.left, evt.clientY - rect.top];\n        if (self.press) {\n            self.press(curMouse, evt);\n        }\n    });\n\n    canvas.addEventListener(\"wheel\", function(evt) {\n        evt.preventDefault();\n        if (self.wheel) {\n            self.wheel(-evt.deltaY);\n        }\n    });\n\n    canvas.oncontextmenu = function (evt) {\n        evt.preventDefault();\n    };\n\n    var touches = {};\n    canvas.addEventListener(\"touchstart\", function(evt) {\n        var rect = canvas.getBoundingClientRect();\n        evt.preventDefault();\n        for (var i = 0; i < evt.changedTouches.length; ++i) {\n            var t = evt.changedTouches[i];\n            touches[t.identifier] = [t.clientX - rect.left, t.clientY - rect.top];\n            if (evt.changedTouches.length == 1 && self.press) {\n                self.press(touches[t.identifier], evt);\n            }\n        }\n    });\n\n    canvas.addEventListener(\"touchmove\", function(evt) {\n        evt.preventDefault();\n        var rect = canvas.getBoundingClientRect();\n        var numTouches = Object.keys(touches).length;\n        // Single finger to rotate the camera\n        if (numTouches == 1) {\n            if (self.mousemove) {\n                var t = evt.changedTouches[0];\n                var prevTouch = touches[t.identifier];\n                var curTouch = [t.clientX - rect.left, t.clientY - rect.top];\n                evt.buttons = 1;\n                self.mousemove(prevTouch, curTouch, evt);\n            }\n        } else {\n            var curTouches = {};\n            for (var i = 0; i < evt.changedTouches.length; ++i) {\n                var t = evt.changedTouches[i];\n                curTouches[t.identifier] = [t.clientX - rect.left, t.clientY - rect.top];\n            }\n\n            // If some touches didn't change make sure we have them in\n            // our curTouches list to compute the pinch distance\n            // Also get the old touch points to compute the distance here\n            var oldTouches = [];\n            for (t in touches) {\n                if (!(t in curTouches)) {\n                    curTouches[t] = touches[t];\n                }\n                oldTouches.push(touches[t]);\n            }\n\n            var newTouches = [];\n            for (t in curTouches) {\n                newTouches.push(curTouches[t]);\n            }\n\n            // Determine if the user is pinching or panning\n            var motionVectors = [\n                vec2.set(vec2.create(), newTouches[0][0] - oldTouches[0][0],\n                    newTouches[0][1] - oldTouches[0][1]),\n                vec2.set(vec2.create(), newTouches[1][0] - oldTouches[1][0],\n                    newTouches[1][1] - oldTouches[1][1])\n            ];\n            var motionDirs = [vec2.create(), vec2.create()];\n            vec2.normalize(motionDirs[0], motionVectors[0]);\n            vec2.normalize(motionDirs[1], motionVectors[1]);\n\n            var pinchAxis = vec2.set(vec2.create(), oldTouches[1][0] - oldTouches[0][0],\n                oldTouches[1][1] - oldTouches[0][1]);\n            vec2.normalize(pinchAxis, pinchAxis);\n\n            var panAxis = vec2.lerp(vec2.create(), motionVectors[0], motionVectors[1], 0.5);\n            vec2.normalize(panAxis, panAxis);\n\n            var pinchMotion = [\n                vec2.dot(pinchAxis, motionDirs[0]),\n                vec2.dot(pinchAxis, motionDirs[1])\n            ];\n            var panMotion = [\n                vec2.dot(panAxis, motionDirs[0]),\n                vec2.dot(panAxis, motionDirs[1])\n            ];\n\n            // If we're primarily moving along the pinching axis and in the opposite direction with\n            // the fingers, then the user is zooming.\n            // Otherwise, if the fingers are moving along the same direction they're panning\n            if (self.pinch && Math.abs(pinchMotion[0]) > 0.5 && Math.abs(pinchMotion[1]) > 0.5\n                && Math.sign(pinchMotion[0]) != Math.sign(pinchMotion[1]))\n            {\n                // Pinch distance change for zooming\n                var oldDist = pointDist(oldTouches[0], oldTouches[1]);\n                var newDist = pointDist(newTouches[0], newTouches[1]);\n                self.pinch(newDist - oldDist);\n            } else if (self.twoFingerDrag && Math.abs(panMotion[0]) > 0.5 && Math.abs(panMotion[1]) > 0.5\n                && Math.sign(panMotion[0]) == Math.sign(panMotion[1]))\n            {\n                // Pan by the average motion of the two fingers\n                var panAmount = vec2.lerp(vec2.create(), motionVectors[0], motionVectors[1], 0.5);\n                panAmount[1] = -panAmount[1];\n                self.twoFingerDrag(panAmount);\n            }\n        }\n\n        // Update the existing list of touches with the current positions\n        for (var i = 0; i < evt.changedTouches.length; ++i) {\n            var t = evt.changedTouches[i];\n            touches[t.identifier] = [t.clientX - rect.left, t.clientY - rect.top];\n        }\n    });\n\n    var touchEnd = function(evt) {\n        evt.preventDefault();\n        for (var i = 0; i < evt.changedTouches.length; ++i) {\n            var t = evt.changedTouches[i];\n            delete touches[t.identifier];\n        }\n    }\n    canvas.addEventListener(\"touchcancel\", touchEnd);\n    canvas.addEventListener(\"touchend\", touchEnd);\n}\n\nexport {\n    Frustum,\n    Shader,\n    ArcballCamera,\n    Controller,\n}","// Code from https://github.com/Twinklebear/webgl-volume-raycaster\n// blog: https://www.willusher.io/webgl/2019/01/13/volume-rendering-with-webgl\n\nexport const vertShader =\n`#version 300 es\n#line 4\nlayout(location=0) in vec3 pos;\nuniform mat4 proj_view;\nuniform vec3 eye_pos;\nuniform vec3 volume_scale;\n\nout vec3 vray_dir;\nflat out vec3 transformed_eye;\n\nvoid main(void) {\n\t// TODO: For non-uniform size volumes we need to transform them differently as well\n\t// to center them properly\n\tvec3 volume_translation = vec3(0.5) - volume_scale * 0.5;\n\tgl_Position = proj_view * vec4(pos * volume_scale + volume_translation, 1);\n\ttransformed_eye = (eye_pos - volume_translation) / volume_scale;\n\tvray_dir = pos - transformed_eye;\n}`;\n\nexport const fragShader =\n`#version 300 es\n#line 24\nprecision highp int;\nprecision highp float;\nuniform highp sampler3D volume;\nuniform highp sampler2D colormap;\nuniform ivec3 volume_dims;\nuniform float dt_scale;\n\nin vec3 vray_dir;\nflat in vec3 transformed_eye;\nout vec4 color;\n\nvec2 intersect_box(vec3 orig, vec3 dir) {\n\tconst vec3 box_min = vec3(0);\n\tconst vec3 box_max = vec3(1);\n\tvec3 inv_dir = 1.0 / dir;\n\tvec3 tmin_tmp = (box_min - orig) * inv_dir;\n\tvec3 tmax_tmp = (box_max - orig) * inv_dir;\n\tvec3 tmin = min(tmin_tmp, tmax_tmp);\n\tvec3 tmax = max(tmin_tmp, tmax_tmp);\n\tfloat t0 = max(tmin.x, max(tmin.y, tmin.z));\n\tfloat t1 = min(tmax.x, min(tmax.y, tmax.z));\n\treturn vec2(t0, t1);\n}\n\n// Pseudo-random number gen from\n// http://www.reedbeta.com/blog/quick-and-easy-gpu-random-numbers-in-d3d11/\n// with some tweaks for the range of values\nfloat wang_hash(int seed) {\n\tseed = (seed ^ 61) ^ (seed >> 16);\n\tseed *= 9;\n\tseed = seed ^ (seed >> 4);\n\tseed *= 0x27d4eb2d;\n\tseed = seed ^ (seed >> 15);\n\treturn float(seed % 2147483647) / float(2147483647);\n}\n\nfloat linear_to_srgb(float x) {\n\tif (x <= 0.0031308f) {\n\t\treturn 12.92f * x;\n\t}\n\treturn 1.055f * pow(x, 1.f / 2.4f) - 0.055f;\n}\n\nvoid main(void) {\n\tvec3 ray_dir = normalize(vray_dir);\n\tvec2 t_hit = intersect_box(transformed_eye, ray_dir);\n\tif (t_hit.x > t_hit.y) {\n\t\tdiscard;\n\t}\n\tt_hit.x = max(t_hit.x, 0.0);\n\tvec3 dt_vec = 1.0 / (vec3(volume_dims) * abs(ray_dir));\n\tfloat dt = dt_scale * min(dt_vec.x, min(dt_vec.y, dt_vec.z));\n\tfloat offset = wang_hash(int(gl_FragCoord.x + 640.0 * gl_FragCoord.y));\n\tvec3 p = transformed_eye + (t_hit.x + offset * dt) * ray_dir;\n\tfor (float t = t_hit.x; t < t_hit.y; t += dt) {\n\t\tfloat val = texture(volume, p).r;\n\t\tvec4 val_color = vec4(texture(colormap, vec2(val, 0.5)).rgb, val);\n\t\t// Opacity correction\n\t\tval_color.a = 1.0 - pow(1.0 - val_color.a, dt_scale);\n\t\tcolor.rgb += (1.0 - color.a) * val_color.a * val_color.rgb;\n\t\tcolor.a += (1.0 - color.a) * val_color.a;\n\t\tif (color.a >= 0.95) {\n\t\t\tbreak;\n\t\t}\n\t\tp += ray_dir * dt;\n\t}\n    color.r = linear_to_srgb(color.r);\n    color.g = linear_to_srgb(color.g);\n    color.b = linear_to_srgb(color.b);\n}`;\n\n","// Fenced code from: https://github.com/Twinklebear/webgl-volume-raycaster\n\nimport React, { Component } from 'react'\nimport { connect, ConnectedProps } from 'react-redux'\n\nimport { State_t } from '../../app/model'\nimport { fetch_data_cache } from '../../api'\n\nimport { selectors } from '../'\nimport { apply_green_LUT } from '../helpers'\n\nimport { mat4, vec3 } from '../webgl/gl-matrix'\nimport { ArcballCamera, Shader, Controller } from '../webgl/webgl-util'\nimport { fragShader, vertShader } from '../webgl/shader-srcs'\n\nconst cubeStrip = [\n  1, 1, 0,\n  0, 1, 0,\n  1, 1, 1,\n  0, 1, 1,\n  0, 0, 1,\n  0, 1, 0,\n  0, 0, 0,\n  1, 1, 0,\n  1, 0, 0,\n  1, 1, 1,\n  1, 0, 1,\n  0, 0, 1,\n  1, 0, 0,\n  0, 0, 0\n];\n\nconst mapStateToProps = (state: State_t) => {\n  return {\n    shape_x: selectors.get_shape_x(state),\n    shape_y: selectors.get_shape_y(state),\n    shape_z: selectors.get_shape_z(state),\n    scale_x: selectors.get_scale_x(state),\n    scale_y: selectors.get_scale_y(state),\n    scale_z: selectors.get_scale_z(state),\n    height: (selectors.get_shape_y(state) * selectors.get_scale_y(state)\n      + selectors.get_shape_z(state) * selectors.get_scale_z(state)),\n    width: (selectors.get_shape_x(state) * selectors.get_scale_x(state)\n      + selectors.get_shape_z(state) * selectors.get_scale_z(state)),\n    data_url: selectors.get_vol_url(state),\n    x: selectors.get_x(state),\n    y: selectors.get_y(state),\n    z: selectors.get_z(state),\n    LUT: selectors.get_LUT(state),\n    gamma: selectors.get_gamma(state)\n  }\n}\n\nconst connector = connect(mapStateToProps)\n\ntype ReduxProps_t = ConnectedProps<typeof connector>\ntype VolumeView_props_t = ReduxProps_t & {\n  left: number,\n  top: number,\n}\n\ntype VolumeView_state_t = {\n  data: Uint8ClampedArray | null\n}\n\nclass _VolumeView\n  extends Component<VolumeView_props_t, VolumeView_state_t> {\n\n  state: VolumeView_state_t\n  abort_controller: AbortController\n\n  // Begin from volume-raycaster.js\n\n  canvas: HTMLCanvasElement | null = null\n  gl: WebGL2RenderingContext | null = null\n  shader: Shader | null = null\n  volumeTexture: WebGLTexture | null = null\n  proj: mat4 = mat4.create()\n  camera = new ArcballCamera(vec3.create(), vec3.create(), vec3.create(), 2,\n    [500, 500])\n  projView = mat4.create()\n  targetFrameTime = 50\n  samplingRate = 1.0\n  WIDTH = 640\n  HEIGHT = 480\n\n  static readonly defaultEye = vec3.set(vec3.create(), 0.5, 0.5, 1.5)\n  static readonly center = vec3.set(vec3.create(), 0.5, 0.5, 0.5)\n  static readonly up = vec3.set(vec3.create(), 0.0, 1.0, 0.0)\n\n  // End from volume-raycaster.js\n\n  constructor(props: VolumeView_props_t) {\n    super(props)\n    this.abort_controller = new AbortController()\n    this.state = {\n      data: null,\n    }\n\n    // Begin from volume-raycaster.js\n\n    this.WIDTH = props.width\n    this.HEIGHT = props.height\n    this.proj = mat4.perspective(mat4.create(), 60 * Math.PI / 180.0,\n      this.WIDTH / this.HEIGHT, 0.1, 100)\n\n    this.camera = new ArcballCamera(\n      _VolumeView.defaultEye, _VolumeView.center, _VolumeView.up,\n      2,\n      [this.WIDTH, this.HEIGHT])\n\n    // End from volume-raycaster.js\n  }\n\n  componentDidMount() {\n\n    this.canvas = this.refs.canvas as HTMLCanvasElement\n    this.gl = this.canvas.getContext(\"webgl2\") as WebGL2RenderingContext\n\n    const gl = this.gl\n\n    const controller = new Controller(this.camera);\n    controller.mousemove = function (prev: number[], cur: number[],\n      evt: MouseEvent) {\n\n      if (evt.buttons === 1) {\n        this.camera.rotate(prev, cur);\n\n      } else if (evt.buttons === 2) {\n        this.camera.pan([cur[0] - prev[0], prev[1] - cur[1]]);\n      }\n    };\n    controller.wheel = function (amt: number) { this.camera.zoom(amt); };\n    controller.pinch = controller.wheel;\n    controller.twoFingerDrag = function (drag: number) {\n      this.camera.pan(drag);\n    }\n    controller.registerForCanvas(this.canvas);\n\n    const vao = gl.createVertexArray();\n    gl.bindVertexArray(vao);\n\n    var vbo = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\n    gl.bufferData(gl.ARRAY_BUFFER,\n      new Float32Array(cubeStrip), gl.STATIC_DRAW);\n\n    gl.enableVertexAttribArray(0);\n    gl.vertexAttribPointer(0, 3, gl.FLOAT, false, 0, 0);\n\n    this.shader = new Shader(gl, vertShader, fragShader);\n    this.shader.use(gl);\n\n    // @ts-ignore Property 'volume' does not exist on type '{}'\n    gl.uniform1i(this.shader.uniforms[\"volume\"], 0);\n    // @ts-ignore\n    gl.uniform1i(this.shader.uniforms[\"colormap\"], 1);\n    // @ts-ignore\n    gl.uniform1f(this.shader.uniforms[\"dt_scale\"], this.samplingRate);\n\n    // Setup required OpenGL state for drawing the back faces and\n    // composting with the background color\n    gl.enable(gl.CULL_FACE);\n    gl.cullFace(gl.FRONT);\n    gl.enable(gl.BLEND);\n    gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\n    // Load the default colormap and upload it, then draw the volume.\n    const colormapImage = new Image();\n    colormapImage.onload = ((gl, draw) => function () {\n      var colormap = gl.createTexture();\n      gl.activeTexture(gl.TEXTURE1);\n      gl.bindTexture(gl.TEXTURE_2D, colormap);\n      gl.texStorage2D(gl.TEXTURE_2D, 1, gl.SRGB8_ALPHA8, 180, 1);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_R, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, 180, 1,\n        gl.RGBA, gl.UNSIGNED_BYTE, colormapImage);\n\n      draw();\n    })(gl, this.draw_to_canvas)\n    colormapImage.src = \"webgl_colormaps/samsel-linear-green.png\";\n\n    // End from volume-raycaster.js\n\n    this.fetch_and_draw()\n\n  }\n\n  componentDidUpdate(prev_props: VolumeView_props_t) {\n    if (this.props.data_url !== prev_props.data_url)\n      this.fetch_and_draw()\n    else if (this.props.LUT !== prev_props.LUT)\n      this.draw_to_canvas()\n  }\n\n  fetch_and_draw = () => {\n\n    this.abort_controller.abort()\n    this.abort_controller = new AbortController()\n\n    fetch_data_cache(this.props.data_url, this.abort_controller.signal)\n      .then(data => this.setState({ data }))\n      .then(this.draw_to_canvas)\n  }\n\n  draw_to_canvas = () => {\n\n    if ((this.state.data === null) ||\n      (this.state.data === undefined) ||\n      (this.props.width === 0) ||\n      (this.props.height === 0) ||\n      (this.gl === null) ||\n      (this.camera === null)) {\n\n      return\n    }\n\n    const gl = this.gl\n    const volDims = [\n      this.props.shape_x,\n      this.props.shape_y,\n      this.props.shape_z\n    ]\n\n    const LUTdata = apply_green_LUT(this.state.data, this.props.LUT, this.props.gamma)\n\n    const tex = gl.createTexture();\n\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_3D, tex);\n    gl.texStorage3D(gl.TEXTURE_3D, 1, gl.R8, volDims[0], volDims[1], volDims[2]);\n    gl.texParameteri(gl.TEXTURE_3D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_3D, gl.TEXTURE_WRAP_R, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_3D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_3D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.texSubImage3D(gl.TEXTURE_3D, 0, 0, 0, 0,\n      volDims[0], volDims[1], volDims[2],\n      gl.RED, gl.UNSIGNED_BYTE, LUTdata);\n\n    var longestAxis = Math.max(volDims[0], Math.max(volDims[1], volDims[2]));\n    var volScale = [\n      volDims[0] / longestAxis * this.props.scale_x,\n      volDims[1] / longestAxis * this.props.scale_y,\n      volDims[2] / longestAxis * this.props.scale_z,\n    ]\n\n    // @ts-ignore Property 'volume_dims' does not exist on type '{}'\n    gl.uniform3iv(this.shader.uniforms[\"volume_dims\"], volDims)\n    // @ts-ignore Property 'volume_scale' does not exist on type '{}'\n    gl.uniform3fv(this.shader.uniforms[\"volume_scale\"], volScale)\n\n    if (!this.volumeTexture) {\n      this.volumeTexture = tex;\n      setInterval(() => {\n\n        // Save them some battery if they're not viewing the tab\n        if (document.hidden) {\n          return;\n        }\n        const startTime = new Date()\n        gl.clearColor(0.0, 0.0, 0.0, 1.0)\n        gl.clear(gl.COLOR_BUFFER_BIT)\n\n        this.projView = mat4.mul(this.projView as mat4, this.proj,\n          this.camera.camera);\n\n        // @ts-ignore Property 'proj_view' does not exist on type '{}'\n        gl.uniformMatrix4fv(this.shader.uniforms[\"proj_view\"],\n          false,\n          this.projView)\n\n        var eye = [this.camera.invCamera[12],\n        this.camera.invCamera[13],\n        this.camera.invCamera[14]]\n\n        // @ts-ignore Property 'eye_pos' does not exist on type '{}'\n        gl.uniform3fv(this.shader.uniforms[\"eye_pos\"], eye);\n\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, cubeStrip.length / 3);\n        // Wait for rendering to actually finish\n        gl.finish()\n\n        const endTime = new Date();\n        const renderTime = (endTime.getTime() - startTime.getTime())\n        const targetSamplingRate = renderTime / this.targetFrameTime\n        if (this.samplingRate < targetSamplingRate) {\n          this.samplingRate = (\n            0.8 * this.samplingRate +\n            0.2 * targetSamplingRate)\n          // @ts-ignore\n          gl.uniform1f(this.shader.uniforms[\"dt_scale\"], this.samplingRate);\n        }\n\n      }, this.targetFrameTime)\n    }\n    else {\n      gl.deleteTexture(this.volumeTexture);\n      this.volumeTexture = tex;\n    }\n\n  }\n\n  render() {\n\n    return (\n      <div style={{\n        position: \"relative\",\n        left: this.props.left,\n        top: this.props.top,\n        right: \"0px\",\n      }}>\n\n        <canvas ref=\"canvas\"\n          width={this.props.width}\n          height={this.props.height}\n          style={{\n            position: \"absolute\",\n            left: \"0px\",\n            top: \"0px\",\n            zIndex: 1,\n          }}>\n        </canvas>\n\n      </div>)\n  }\n}\n\nexport const VolumeView = connector(_VolumeView)\n","import React from 'react'\nimport { bindActionCreators } from 'redux'\nimport { connect, ConnectedProps } from \"react-redux\"\n\nimport { Slider, TextField } from '@material-ui/core';\n\nimport { AppDispatch_t } from '../../index'\nimport { actions } from '../actions'\nimport * as selectors from '../selectors'\nimport { saga_actions as annotations_saga_actions } from '../../annotations'\nimport { selectors as annotations_selectors } from '../../annotations'\nimport { State_t } from '../../app/model'\nimport { AnnotationViewZ, AnnotationViewX, AnnotationViewY }\n  from './AnnotationView'\nimport { AnnotationPanel } from '../../annotations'\nimport { saga_actions } from '../sagas'\nimport WindowPanel from './WindowPanel'\nimport { WorldlinesPanel } from '../../worldlines'\nimport { VolumeView } from './VolumeView'\nimport { ProvenancePanel } from '../../provenances'\n\nconst XYZSliderBase = (props: {\n  left: number,\n  top: number,\n  length: number,\n  flip: boolean,\n  orientation: \"horizontal\" | \"vertical\",\n  val: number,\n  handler: (x: number) => any\n}) => {\n\n  return <Slider\n    style={{\n      position: \"absolute\",\n      left: props.left,\n      top: props.top,\n      width: (props.orientation === \"horizontal\") ? props.length : 0,\n      height: (props.orientation === \"vertical\") ? props.length : 0\n    }}\n    color=\"primary\"\n    orientation={props.orientation}\n    defaultValue={0.5}\n    value={props.flip ? (1 - props.val) : props.val}\n    min={0}\n    max={1}\n    step={0.0001}\n    track={false}\n    scale={props.flip ? (x) => (1 - x) : (x) => x}\n    onChange={(e, v\n    ) => props.handler(props.flip ? 1 - (v as number) : (v as number))} />\n}\n\nconst TSliderBase = (props: {\n  left: number,\n  top: number,\n  length: number,\n  val: number,\n  max_val: number,\n  handler: (x: number) => any\n}) => {\n\n  return <Slider\n    style={{\n      position: \"absolute\",\n      left: props.left,\n      top: props.top,\n      width: props.length,\n    }}\n    color=\"secondary\"\n    orientation=\"horizontal\"\n    defaultValue={0}\n    value={props.val}\n    min={0}\n    max={props.max_val}\n    track={false}\n    step={1}\n    onChange={(e, v) => props.handler(v as number)} />\n}\n\nconst LUTSliderBase = (props: {\n  left: number,\n  top: number,\n  length: number,\n  color: string,\n  val: [number, number],\n  handler: (x: [number, number]) => any\n}) => {\n  const [value, setValue] = React.useState<number[]>([0, 255]);\n\n  const handleChange = (event: any, newValue: number | number[]) => {\n    setValue(newValue as number[]);\n    props.handler(newValue as [number, number])\n  };\n\n  return (\n\n    <Slider\n      style={{\n        position: \"absolute\",\n        left: props.left,\n        top: props.top,\n        width: props.length,\n        color: props.color,\n      }}\n      value={value}\n      min={0}\n      max={255}\n      onChange={handleChange}\n      valueLabelDisplay=\"auto\"\n    />\n\n  );\n}\n\nconst GammaBoxBase = (props: {\n  left: number,\n  top: number,\n  length: number,\n  val: number,\n  handler: (x: number) => any\n}) => {\n\n  return (\n\n    <TextField\n      variant={\"outlined\"}\n      style={{\n        position: \"absolute\",\n        left: props.left,\n        top: props.top,\n        width: props.length,\n      }}\n      label={\"\\u03B3\"}\n      defaultValue={1.0}\n      value={props.val}\n      type={\"number\"}\n      inputProps={{\n        maxLength: 3,\n        step: \"0.1\"\n      }}\n      onChange={(e\n      ) => props.handler(parseFloat(e.target.value).toFixed(1) as unknown as number)}\n    />\n\n  );\n}\n\nconst mapStateToProps = (state: State_t) => {\n  return {\n    window_state: selectors.get_state(state),\n    annotations_z: annotations_selectors.get_z_annotations(state),\n    annotations_3D: annotations_selectors.get_annotations_view3D(state),\n    size_x: selectors.get_shape_x(state) * selectors.get_scale_x(state),\n    size_y: selectors.get_shape_y(state) * selectors.get_scale_y(state),\n    size_z: selectors.get_shape_z(state) * selectors.get_scale_z(state),\n    x: selectors.get_x(state),\n    y: selectors.get_y(state),\n    z: selectors.get_z(state),\n    t_idx: selectors.get_t_idx(state),\n    shape_t: selectors.get_shape_t(state),\n    LUT: selectors.get_LUT(state),\n    gamma: selectors.get_gamma(state),\n    view: selectors.get_view(state),\n  }\n}\n\nconst mapDispatchToProps = (dispatch: AppDispatch_t) => {\n  return {\n    actions: bindActionCreators({ ...actions }, dispatch),\n    saga_actions: bindActionCreators({ ...saga_actions }, dispatch),\n    delete_annotation: () => dispatch(\n      annotations_saga_actions.delete_annotation()),\n  }\n}\n\nconst connector = connect(mapStateToProps, mapDispatchToProps)\ntype ReduxProps_t = ConnectedProps<typeof connector>\n\ntype AnnotationWindow_props_t = ReduxProps_t & {\n}\n\nconst _AnnotationWindow = (props: AnnotationWindow_props_t) => {\n\n  const origin_left = 20;\n  const origin_top = 20;\n  const padding_1 = 10;\n\n  const x_image_left = origin_left + props.size_x + padding_1;\n  const x_image_top = origin_top;\n\n  const y_image_left = origin_left;\n  const y_image_top = origin_top + props.size_y + padding_1;\n\n  const x_slider_left = origin_left;\n  const x_slider_top = y_image_top + props.size_z;\n\n  const y_slider_left = x_image_left + props.size_z + 2 * padding_1;\n  const y_slider_top = origin_top;\n\n  const z_slider_1_left = x_image_left;\n  const z_slider_1_top = x_slider_top;\n\n  const z_slider_2_left = y_slider_left;\n  const z_slider_2_top = y_slider_top + y_image_top - origin_top;\n\n  const t_slider_left = origin_left\n  const t_slider_top = x_slider_top + 2 * padding_1\n  const t_slider_length = props.size_x + props.size_z + padding_1\n\n  const annotation_panel_left = y_slider_left + 5 * padding_1\n\n  const LUT_slider_length = t_slider_length / 3 - 6 * padding_1\n  const LUT_top = t_slider_top + 5 * padding_1\n  const LUT_R_left = origin_left\n  const LUT_G_left = LUT_R_left + LUT_slider_length + 4 * padding_1\n  const LUT_B_left = LUT_G_left + LUT_slider_length + 4 * padding_1\n  const Gamma_left = LUT_B_left + LUT_slider_length + 4 * padding_1\n\n  const window_panel_left = origin_left\n  const window_panel_top = LUT_top + 5 * padding_1\n\n\n  let views\n  if (props.view === \"vol\") {\n    views = (\n      <VolumeView\n        left={origin_left}\n        top={origin_top} />\n    )\n  }\n  else {\n    views = (\n      <React.Fragment>\n        <AnnotationViewZ left={origin_left} top={origin_top} />\n        <AnnotationViewX left={x_image_left} top={x_image_top} />\n        <AnnotationViewY left={y_image_left} top={y_image_top} />\n      </React.Fragment>\n    )\n  }\n\n  const XSlider =\n    <XYZSliderBase\n      left={x_slider_left}\n      top={x_slider_top}\n      length={props.size_x}\n      orientation=\"horizontal\"\n      flip={false}\n      val={props.x}\n      handler={props.actions.set_x} />\n\n  const YSlider =\n    <XYZSliderBase\n      left={y_slider_left}\n      top={y_slider_top}\n      length={props.size_y}\n      orientation=\"vertical\"\n      flip={true}\n      val={props.y}\n      handler={props.actions.set_y} />\n\n  const ZSlider1 =\n    <XYZSliderBase\n      left={z_slider_1_left}\n      top={z_slider_1_top}\n      length={props.size_z}\n      orientation=\"horizontal\"\n      flip={false}\n      val={props.z}\n      handler={props.actions.set_z} />\n\n  const ZSlider2 =\n    <XYZSliderBase\n      left={z_slider_2_left}\n      top={z_slider_2_top}\n      length={props.size_z}\n      orientation=\"vertical\"\n      flip={true}\n      val={props.z}\n      handler={props.actions.set_z} />\n\n  const TSlider =\n    <TSliderBase\n      left={t_slider_left}\n      top={t_slider_top}\n      length={t_slider_length}\n      val={props.t_idx}\n      max_val={props.shape_t - 1}\n      handler={props.actions.set_t_idx} />\n\n  const LUTSliderRed =\n    <LUTSliderBase\n      left={LUT_R_left}\n      top={LUT_top}\n      length={LUT_slider_length}\n      val={props.LUT.red}\n      color=\"red\"\n      handler={([l, h]) => props.actions.set_LUT_color([\"red\", l, h])} />\n  const LUTSliderGreen =\n    <LUTSliderBase\n      left={LUT_G_left}\n      top={LUT_top}\n      length={LUT_slider_length}\n      val={props.LUT.green}\n      color=\"green\"\n      handler={([l, h]) => props.actions.set_LUT_color([\"green\", l, h])} />\n  const LUTSliderBlue =\n    <LUTSliderBase\n      left={LUT_B_left}\n      top={LUT_top}\n      length={LUT_slider_length}\n      val={props.LUT.blue}\n      color=\"blue\"\n      handler={([l, h]) => props.actions.set_LUT_color([\"blue\", l, h])} />\n\n  const gammaBox =\n    <GammaBoxBase\n      left={Gamma_left}\n      top={LUT_top - 2*padding_1}\n      length={LUT_slider_length / 3}\n      val={props.gamma}\n      handler={props.actions.set_gamma} />\n\n  const keydown_handler = (event: React.KeyboardEvent) => {\n\n    const key = String.fromCharCode(event.which)\n    const ctrl = event.ctrlKey\n    const shift = event.shiftKey\n\n    switch (key) {\n      case \"F\": {\n        if (shift) props.saga_actions.adjust_t(10)\n        else props.saga_actions.adjust_t(1)\n        break;\n      }\n      case \"D\": {\n        if (shift) props.saga_actions.adjust_t(-10)\n        else props.saga_actions.adjust_t(-1)\n        break;\n      }\n      case \"V\": {\n        if (shift) props.actions.set_z(props.z + 0.2)\n        else if (ctrl) props.actions.set_z(props.z + 0.02)\n        else props.actions.set_z(props.z + 0.05)\n        break;\n      }\n      case \"C\": {\n        if (shift) props.actions.set_z(props.z - 0.2)\n        else if (ctrl) props.actions.set_z(props.z - 0.01)\n        else props.actions.set_z(props.z - 0.05)\n        break;\n      }\n      case \"R\": {\n        props.actions.adjust_c_idx(1)\n        break\n      }\n      case \"E\": {\n        props.actions.adjust_c_idx(-1)\n        break\n      }\n      case \"W\": {\n        props.saga_actions.adjust_selected_worldline(1)\n        break\n      }\n      case \"Q\": {\n        props.saga_actions.adjust_selected_worldline(-1)\n        break\n      }\n      case \".\": {\n        props.delete_annotation()\n        break\n      }\n      case \"S\": {\n        if (ctrl) props.saga_actions.save()\n        break\n      }\n      case \"O\": {\n        props.actions.toggle_fill_circles()\n        break\n      }\n      case \"A\": {\n        props.actions.toggle_all_annotations()\n        break\n      }\n      case \"1\":\n      case \"2\":\n      case \"3\":\n      case \"4\":\n      case \"5\":\n      case \"6\":\n      case \"7\":\n      case \"8\":\n      case \"9\":\n      case \"0\":\n        if (!ctrl && !shift) props.saga_actions.rpc_from_key(key)\n        break\n    }\n\n    event.preventDefault()\n  }\n\n  const keyup_handler = (event: React.KeyboardEvent) => {\n    //const key = String.fromCharCode(event.which)\n  }\n\n  return (\n    <div style={{ position: \"absolute\" }}>\n      <div tabIndex={0}\n        onKeyDown={keydown_handler}\n        onKeyUp={keyup_handler}>\n\n        {views}\n\n        {XSlider}\n        {YSlider}\n        {ZSlider1}\n        {ZSlider2}\n        {TSlider}\n\n        {LUTSliderRed}\n        {LUTSliderGreen}\n        {LUTSliderBlue}\n\n        {gammaBox}\n\n      </div>\n\n      <WindowPanel\n        left={window_panel_left}\n        top={window_panel_top} />\n\n      <div style={{ position: \"absolute\",\n        left: annotation_panel_left,\n        width: \"340px\" }}>\n\n        <AnnotationPanel/>\n\n        <ProvenancePanel/>\n\n        <WorldlinesPanel/>\n\n      </div>\n\n\n    </div>\n  )\n}\n\nconst AnnotationWindow = connector(_AnnotationWindow)\n\nexport default AnnotationWindow","import React from 'react'\n\nimport { AnnotationWindow } from '../../annotation_window'\n\n\nconst App = () => {\n  return (\n    <div>\n      <AnnotationWindow />\n    </div>\n  );\n}\n\nexport default App","import { combineReducers } from 'redux'\n\nimport {\n  actions as annotation_window_actions,\n  reducer as annotation_window_reducer\n} from '../annotation_window'\n\nimport {\n  actions as annotations_actions,\n  reducer as annotations_reducer\n} from '../annotations'\n\nimport {\n  actions as worldlines_actions,\n  reducer as worldlines_reducer\n} from '../worldlines'\n\nimport {\n  actions as provenances_actions,\n  reducer as provenances_reducer\n} from '../provenances'\n\nexport const actions = {\n  annotation_window: annotation_window_actions,\n  annotations: annotations_actions,\n  worldlines: worldlines_actions,\n  provenances: provenances_actions\n}\n\nexport const reducer = combineReducers({\n  annotation_window: annotation_window_reducer,\n  annotations: annotations_reducer,\n  worldlines: worldlines_reducer,\n  provenances: provenances_reducer\n});","import { all } from 'redux-saga/effects'\n\nimport {\n  sagas as annotation_window_sagas,\n  saga_actions as annotation_window_saga_actions,\n} from '../annotation_window'\n\nimport {\n  sagas as annotations_sagas,\n  saga_actions as annotations_saga_actions,\n} from '../annotations'\n\nimport {\n  sagas as worldlines_sagas,\n  saga_actions as worldlines_saga_actions,\n} from '../worldlines'\n\nimport {\n  sagas as provenances_sagas,\n  saga_actions as provenances_saga_actions,\n} from '../provenances'\n\nexport function* saga() {\n  yield all([\n    ...annotation_window_sagas,\n    ...annotations_sagas,\n    ...worldlines_sagas,\n    ...provenances_sagas\n  ].map(f => f()))\n}\n\nexport const saga_actions = {\n  annotation_window: annotation_window_saga_actions,\n  annotations: annotations_saga_actions,\n  worldlines: worldlines_saga_actions,\n  provenances: provenances_saga_actions\n}","/* This file should provide an interface to visualize the state and dispatch\nactions. UI and styling should be minimal. */\n\nimport React from 'react'\nimport { connect } from \"react-redux\"\nimport ReactJson from 'react-json-view'\n\nimport { actions } from '../actions'\nimport { saga_actions } from '../sagas'\nimport { State_t } from '../../app/model'\nimport { FloatForm } from '../../test_components/ActionForm'\n\nimport * as annotation_window_selectors\n  from '../../annotation_window/selectors'\n\nconst _Test = ({ state, x_idx, ...A }: any) => {\n\n  const derived_state = { x_idx }\n\n  const full_state = { bare_state: state, derived_state }\n\n  // const state_json = JSON.stringify(full_state, null, 4);\n\n  return (\n    <div>\n\n      {/* <pre><code>app: {state_json}</code></pre> */}\n      <ReactJson theme=\"monokai\" src={full_state} />\n\n      <br />\n\n      Simple Actions:\n      <FloatForm name=\"set_shape_x\" action={A.set_shape_x} />\n      <FloatForm name=\"set_x\" action={A.set_x} />\n      <FloatForm name=\"set_t_idx\" action={A.set_t_idx} />\n      <FloatForm name=\"adjust_x\" action={A.adjust_x} />\n      <FloatForm name=\"set_scale_x\" action={A.set_scale_x} />\n\n      <br />\n\n      Async Actions:\n      <br />\n\n      <button onClick={() => A.fetch_state()}>\n        fetch_state\n      </button>\n\n      <button onClick={() => A.insert_annotation_here()}>\n        insert_annotation\n      </button>\n\n      <FloatForm name=\"fetch_annotations\" action={A.get_annotations} />\n\n    </div>\n  )\n}\n\nconst mapStateToProps = (state: State_t) => {\n  return {\n    state: state,\n    x_idx: annotation_window_selectors.get_x_idx(state)\n  }\n}\n\nconst AppTest =\n  connect(mapStateToProps,\n    { ...actions.annotation_window,\n      ...actions.annotations,\n      ...saga_actions.annotation_window,\n      ...saga_actions.annotations\n    })(_Test)\n\nexport default AppTest","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux'\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom'\nimport { configureStore, getDefaultMiddleware } from \"@reduxjs/toolkit\"\nimport createSagaMiddleware from 'redux-saga'\n\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles'\nimport { blue, pink } from '@material-ui/core/colors';\n\nimport './index.css';\nimport { App, AppTest, reducer, saga } from './app';\nimport * as serviceWorker from './serviceWorker';\nimport { saga_actions } from './app'\n\nconst sagaMiddleware = createSagaMiddleware();\nconst middleware = [...getDefaultMiddleware({ thunk: false }), sagaMiddleware];\n\n\nconst store = configureStore({\n  reducer,\n  middleware,\n});\n\nexport type AppDispatch_t = typeof store.dispatch\n\nsagaMiddleware.run(saga);\n\nconst darkTheme = createMuiTheme({\n  palette: {\n    type: 'dark',\n    primary: blue,\n    secondary: pink,\n  },\n  typography: {\n    fontFamily: [\n      'source-code-pro',\n      '-apple-system',\n      'BlinkMacSystemFont',\n      '\"Segoe UI\"',\n      'Roboto',\n      '\"Helvetica Neue\"',\n      'Arial',\n      'sans-serif',\n      '\"Apple Color Emoji\"',\n      '\"Segoe UI Emoji\"',\n      '\"Segoe UI Symbol\"',\n    ].join(','),\n  },\n})\n\nReactDOM.render(\n  <Provider store={store}>\n    <ThemeProvider theme={darkTheme}>\n      <Router>\n        <Switch>\n          <Route exact path=\"/\" component={App} />\n          <Route path=\"/AppTest\" component={AppTest} />\n        </Switch>\n      </Router>\n    </ThemeProvider>\n  </Provider>,\n  document.getElementById('root')\n)\n\nstore.dispatch(saga_actions.annotation_window.fetch_state())\nstore.dispatch(saga_actions.worldlines.get_worldlines())\nstore.dispatch(saga_actions.annotations.get_annotations())\nstore.dispatch(saga_actions.provenances.fetch_provenances())\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}